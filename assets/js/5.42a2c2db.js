(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{400:function(t,s,a){t.exports=a.p+"assets/img/image-20220913221350917.f0d907a6.png"},401:function(t,s,a){t.exports=a.p+"assets/img/image-20220913221607964.6e5c8c45.png"},402:function(t,s,a){t.exports=a.p+"assets/img/image-20220913221657891.8bf67734.png"},403:function(t,s,a){t.exports=a.p+"assets/img/image-20220913221720804.ae27a87f.png"},404:function(t,s,a){t.exports=a.p+"assets/img/image-20220913221835192.30dc3614.png"},405:function(t,s,a){t.exports=a.p+"assets/img/image-20220913222032709.60cc48de.png"},406:function(t,s,a){t.exports=a.p+"assets/img/image-20220913222234020.7551e4d4.png"},407:function(t,s,a){t.exports=a.p+"assets/img/image-20220913222425403.b4ccd91b.png"},408:function(t,s,a){t.exports=a.p+"assets/img/image-20220913222443316.365d5306.png"},409:function(t,s,a){t.exports=a.p+"assets/img/image-20220913222724448.b7a1496b.png"},410:function(t,s,a){t.exports=a.p+"assets/img/image-20220913222812126.2a359206.png"},411:function(t,s,a){t.exports=a.p+"assets/img/image-20220913222705329.5c8483ab.png"},412:function(t,s,a){t.exports=a.p+"assets/img/image-20220913222944750.04ec7e50.png"},413:function(t,s,a){t.exports=a.p+"assets/img/image-20220913223252686.d3baf3d5.png"},414:function(t,s,a){t.exports=a.p+"assets/img/image-20220913223506910.0986d8b2.png"},415:function(t,s,a){t.exports=a.p+"assets/img/image-20220913223523002.33ed26fe.png"},416:function(t,s,a){t.exports=a.p+"assets/img/image-20220913223859497.aeb191eb.png"},417:function(t,s,a){t.exports=a.p+"assets/img/image-20220913223923405.2d5bbab5.png"},418:function(t,s,a){t.exports=a.p+"assets/img/image-20220914130708180.aa261e97.png"},419:function(t,s,a){t.exports=a.p+"assets/img/image-20220914130836788.e45df153.png"},420:function(t,s,a){t.exports=a.p+"assets/img/image-20220914130902123.c24c7504.png"},421:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131052551.d797dc4f.png"},422:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131203006.f9278484.png"},423:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131219666.e95edfdf.png"},424:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131540692.fdf95dc7.png"},425:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131604073.16af1aee.png"},426:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131656450.95d2ddde.png"},427:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131711676.c27dd4f4.png"},428:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131722965.a4873a5e.png"},429:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131740660.12ecaed9.png"},430:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131831231.a18fee37.png"},431:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131844591.84cce74d.png"},432:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132045019.94eb80ea.png"},433:function(t,s,a){t.exports=a.p+"assets/img/image-20220914131931306.86d963bf.png"},434:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132144981.802615a8.png"},435:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132207976.38332bd6.png"},436:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132215241.387de923.png"},437:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132223988.b27ddf17.png"},438:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132230488.39c81aa3.png"},439:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132240603.373a2db6.png"},440:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132253855.6b1659d7.png"},441:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132302808.5ec63c69.png"},442:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132311231.20e24c1c.png"},443:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132340752.36883bcc.png"},444:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132357240.5e496157.png"},445:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132410841.9c4bbb2f.png"},446:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132427833.4e826b34.png"},447:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132442050.9a44c32c.png"},448:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132512387.16c13cef.png"},449:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132518808.b5a353b0.png"},450:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132527007.31f107e5.png"},451:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132532785.0e0e9403.png"},452:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132539393.413afece.png"},453:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132603667.c2661268.png"},454:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132631064.7a7eecdc.png"},455:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132643249.e0302368.png"},456:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132724137.9c94ec38.png"},457:function(t,s,a){t.exports=a.p+"assets/img/image-20220914132735788.56a94c49.png"},458:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133016377.5da1c662.png"},459:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133231146.e5b20d78.png"},460:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133420399.cc21801e.png"},461:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133448065.44cb402d.png"},462:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133522453.091cf43e.png"},463:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133643454.ec084d0a.png"},464:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133702361.3c0b9253.png"},465:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133737753.e86a0809.png"},466:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133752048.12e639d8.png"},467:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133813106.35420715.png"},468:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133839125.a81681dc.png"},469:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133901390.a659f59b.png"},470:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133917406.a718b671.png"},471:function(t,s,a){t.exports=a.p+"assets/img/image-20220914133946539.f39c7c32.png"},472:function(t,s,a){t.exports=a.p+"assets/img/image-20220914134151040.176b3467.png"},473:function(t,s,a){t.exports=a.p+"assets/img/image-20220914134219250.f544e843.png"},474:function(t,s,a){t.exports=a.p+"assets/img/image-20220914134232457.71d7388b.png"},475:function(t,s,a){t.exports=a.p+"assets/img/image-20220914134301309.18256d9b.png"},476:function(t,s,a){t.exports=a.p+"assets/img/image-20220914134338997.a39478fe.png"},477:function(t,s,a){t.exports=a.p+"assets/img/image-20220914134420756.729292d0.png"},478:function(t,s,a){t.exports=a.p+"assets/img/image-20220914134548864.196e0040.png"},977:function(t,s,a){"use strict";a.r(s);var e=a(6),i=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"日常维护监控排错"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日常维护监控排错"}},[t._v("#")]),t._v(" 日常维护监控排错")]),t._v(" "),s("h2",{attrs:{id:"数据库审计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库审计"}},[t._v("#")]),t._v(" 数据库审计")]),t._v(" "),s("p",[s("img",{attrs:{src:a(400),alt:"image-20220913221350917"}})]),t._v(" "),s("h2",{attrs:{id:"索引维护"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引维护"}},[t._v("#")]),t._v(" 索引维护")]),t._v(" "),s("p",[t._v("索引膨胀之后不容易缩，采取重建索引的方式")]),t._v(" "),s("p",[s("img",{attrs:{src:a(401),alt:"image-20220913221607964"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(402),alt:"image-20220913221657891"}})]),t._v(" "),s("h2",{attrs:{id:"在线回收空间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在线回收空间"}},[t._v("#")]),t._v(" 在线回收空间")]),t._v(" "),s("p",[s("img",{attrs:{src:a(403),alt:"image-20220913221720804"}})]),t._v(" "),s("h2",{attrs:{id:"在线加列"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在线加列"}},[t._v("#")]),t._v(" 在线加列")]),t._v(" "),s("p",[t._v("10以后的版本还是需要设置超时")]),t._v(" "),s("p",[s("img",{attrs:{src:a(404),alt:"image-20220913221835192"}})]),t._v(" "),s("h2",{attrs:{id:"清理wal日志-就是redo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清理wal日志-就是redo"}},[t._v("#")]),t._v(" 清理wal日志（就是redo）")]),t._v(" "),s("p",[t._v("删除之后会导致数据库起不来")]),t._v(" "),s("p",[s("img",{attrs:{src:a(405),alt:"image-20220913222032709"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(406),alt:"image-20220913222234020"}})]),t._v(" "),s("h2",{attrs:{id:"清理审计日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清理审计日志"}},[t._v("#")]),t._v(" 清理审计日志")]),t._v(" "),s("p",[s("img",{attrs:{src:a(407),alt:"image-20220913222425403"}})]),t._v(" "),s("h2",{attrs:{id:"进程维护"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进程维护"}},[t._v("#")]),t._v(" 进程维护")]),t._v(" "),s("p",[s("img",{attrs:{src:a(408),alt:"image-20220913222443316"}})]),t._v(" "),s("h2",{attrs:{id:"序列耗尽"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#序列耗尽"}},[t._v("#")]),t._v(" 序列耗尽")]),t._v(" "),s("p",[s("img",{attrs:{src:a(409),alt:"image-20220913222724448"}})]),t._v(" "),s("h2",{attrs:{id:"审计日志分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#审计日志分析"}},[t._v("#")]),t._v(" 审计日志分析")]),t._v(" "),s("p",[s("img",{attrs:{src:a(410),alt:"image-20220913222812126"}})]),t._v(" "),s("p",[t._v("用pgBadger去分析")]),t._v(" "),s("p",[s("img",{attrs:{src:a(411),alt:"image-20220913222705329"}})]),t._v(" "),s("h2",{attrs:{id:"freeze预测与解决"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#freeze预测与解决"}},[t._v("#")]),t._v(" freeze预测与解决")]),t._v(" "),s("h2",{attrs:{id:"大表分区"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#大表分区"}},[t._v("#")]),t._v(" 大表分区")]),t._v(" "),s("p",[t._v("分区方法：pg_pathman 和pg12之后内置分区")]),t._v(" "),s("p",[s("img",{attrs:{src:a(412),alt:"image-20220913222944750"}})]),t._v(" "),s("h2",{attrs:{id:"冷热分离存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#冷热分离存储"}},[t._v("#")]),t._v(" 冷热分离存储")]),t._v(" "),s("p",[s("img",{attrs:{src:a(413),alt:"image-20220913223252686"}})]),t._v(" "),s("h2",{attrs:{id:"清理未使用对象-表索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清理未使用对象-表索引"}},[t._v("#")]),t._v(" 清理未使用对象，表索引")]),t._v(" "),s("p",[s("img",{attrs:{src:a(414),alt:"image-20220913223506910"}})]),t._v(" "),s("h2",{attrs:{id:"长事务的清理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#长事务的清理"}},[t._v("#")]),t._v(" 长事务的清理")]),t._v(" "),s("p",[s("img",{attrs:{src:a(415),alt:"image-20220913223523002"}})]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("postgres"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show restart_after_crash ;")]),t._v("\n restart_after_crash \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("---------------------")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("row")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("不能kill ，上面这个配置之后才会自动拉起")]),t._v(" "),s("h2",{attrs:{id:"锁等待清理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#锁等待清理"}},[t._v("#")]),t._v(" 锁等待清理")]),t._v(" "),s("p",[s("img",{attrs:{src:a(416),alt:"image-20220913223859497"}})]),t._v(" "),s("h2",{attrs:{id:"小版本升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小版本升级"}},[t._v("#")]),t._v(" 小版本升级")]),t._v(" "),s("p",[s("img",{attrs:{src:a(417),alt:"image-20220913223923405"}})]),t._v(" "),s("p",[t._v("有可能需要重建索引")]),t._v(" "),s("h2",{attrs:{id:"大版本升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#大版本升级"}},[t._v("#")]),t._v(" 大版本升级")]),t._v(" "),s("p",[s("img",{attrs:{src:a(418),alt:"image-20220914130708180"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(419),alt:"image-20220914130836788"}})]),t._v(" "),s("h2",{attrs:{id:"监控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监控"}},[t._v("#")]),t._v(" 监控")]),t._v(" "),s("p",[s("img",{attrs:{src:a(420),alt:"image-20220914130902123"}})]),t._v(" "),s("p",[t._v("锁等待，长事务，数据库年龄，活跃会话")]),t._v(" "),s("p",[s("img",{attrs:{src:a(421),alt:"image-20220914131052551"}})]),t._v(" "),s("h2",{attrs:{id:"优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[t._v("#")]),t._v(" 优化")]),t._v(" "),s("p",[s("img",{attrs:{src:a(422),alt:"image-20220914131203006"}}),s("img",{attrs:{src:a(423),alt:"image-20220914131219666"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(424),alt:"image-20220914131540692"}})]),t._v(" "),s("h2",{attrs:{id:"top-sql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#top-sql"}},[t._v("#")]),t._v(" TOP sql")]),t._v(" "),s("p",[s("img",{attrs:{src:a(425),alt:"image-20220914131604073"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(426),alt:"image-20220914131656450"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(427),alt:"image-20220914131711676"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(428),alt:"image-20220914131722965"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(429),alt:"image-20220914131740660"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(430),alt:"image-20220914131831231"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(431),alt:"image-20220914131844591"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(432),alt:"image-20220914132045019"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(433),alt:"image-20220914131931306"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(434),alt:"image-20220914132144981"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(435),alt:"image-20220914132207976"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(436),alt:"image-20220914132215241"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(437),alt:"image-20220914132223988"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(438),alt:"image-20220914132230488"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(439),alt:"image-20220914132240603"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(440),alt:"image-20220914132253855"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(441),alt:"image-20220914132302808"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(442),alt:"image-20220914132311231"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(443),alt:"image-20220914132340752"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(444),alt:"image-20220914132357240"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(445),alt:"image-20220914132410841"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(446),alt:"image-20220914132427833"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(447),alt:"image-20220914132442050"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(448),alt:"image-20220914132512387"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(449),alt:"image-20220914132518808"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(450),alt:"image-20220914132527007"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(451),alt:"image-20220914132532785"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(452),alt:"image-20220914132539393"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(453),alt:"image-20220914132603667"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(454),alt:"image-20220914132631064"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(455),alt:"image-20220914132643249"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(456),alt:"image-20220914132724137"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(457),alt:"image-20220914132735788"}})]),t._v(" "),s("p",[t._v("优化，没有加索引，没有加对索引")]),t._v(" "),s("p",[t._v("什么情况下推荐索引：")]),t._v(" "),s("p",[t._v("扫描大量记录，返回的数量少的；")]),t._v(" "),s("p",[t._v("通过数据库统计信息")]),t._v(" "),s("p",[t._v("seq_scan和seq_tup_read")]),t._v(" "),s("p",[s("img",{attrs:{src:a(458),alt:"image-20220914133016377"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(459),alt:"image-20220914133231146"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(460),alt:"image-20220914133420399"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(461),alt:"image-20220914133448065"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(462),alt:"image-20220914133522453"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(463),alt:"image-20220914133643454"}}),s("img",{attrs:{src:a(464),alt:"image-20220914133702361"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(465),alt:"image-20220914133737753"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(466),alt:"image-20220914133752048"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(467),alt:"image-20220914133813106"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(468),alt:"image-20220914133839125"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(469),alt:"image-20220914133901390"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(470),alt:"image-20220914133917406"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(471),alt:"image-20220914133946539"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(472),alt:"image-20220914134151040"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(473),alt:"image-20220914134219250"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(474),alt:"image-20220914134232457"}})]),t._v(" "),s("h2",{attrs:{id:"上报错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上报错误"}},[t._v("#")]),t._v(" 上报错误")]),t._v(" "),s("p",[s("img",{attrs:{src:a(475),alt:"image-20220914134301309"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(476),alt:"image-20220914134338997"}})]),t._v(" "),s("p",[t._v("当前会话对应进程")]),t._v(" "),s("p",[s("img",{attrs:{src:a(477),alt:"image-20220914134420756"}})]),t._v(" "),s("h2",{attrs:{id:"异常问题上报"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异常问题上报"}},[t._v("#")]),t._v(" 异常问题上报")]),t._v(" "),s("p",[s("img",{attrs:{src:a(478),alt:"image-20220914134548864"}})])])}),[],!1,null,null,null);s.default=i.exports}}]);