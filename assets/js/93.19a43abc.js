(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{1007:function(s,a,n){"use strict";n.r(a);var t=n(6),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_1-django基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-django基础"}},[s._v("#")]),s._v(" 1.django基础")]),s._v(" "),a("h2",{attrs:{id:"创建一个项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建一个项目"}},[s._v("#")]),s._v(" 创建一个项目")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("django-admin startproject tango_with_django_project\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("❏ "),a("strong",[s._v("init")]),s._v(".py：一个空 Python 脚本，存在的目的是告诉 Python 解释器，这个目录是一个Python 包；\n❏ settings.py：存放 Django 项目的所有设置；\n❏ urls.py：存放项目的 URL 模式；\n❏ wsgi.py：用于运行开发服务器和把项目部署到生产环境的一个 Python 脚本。")]),s._v(" "),a("p",[s._v("manage.py ：它提供了一系列维护 Django 项目的命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("python manage.py runserver\n或者让所有机器都可以访问，指定端口\npython manage.py runserver 0.0.0.0:5555\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("运行程序")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd tango\npython manage.py runserver\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("可以看到")]),s._v(" "),a("p",[s._v("Starting development server at http://127.0.0.1:8000/")]),s._v(" "),a("p",[s._v("通过浏览器访问")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image-20230114082841815.png",alt:"image-20230114082841815"}})]),s._v(" "),a("h2",{attrs:{id:"创建一个应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建一个应用"}},[s._v("#")]),s._v(" 创建一个应用")]),s._v(" "),a("p",[s._v("一个项目可以有多个应用")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("python manage.py startapp rango_app\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("❏ admin.py：注册模型，让 Django 为你创建管理界面；\n❏ apps.py：当前应用的配置；\n❏ models.py：存放应用的数据模型，即数据的实体及其之间的关系；\n❏ tests.py：存放测试应用代码的函数；\n❏ views.py：存放处理请求并返回响应的函数；\n❏ migrations 目录：存放与模型有关的数据库信息。")]),s._v(" "),a("p",[s._v("在动手创建模型和视图之前，必须告诉 Django 项目这个新应用的存在，")]),s._v(" "),a("p",[s._v("要修改项目配置目录中的 settings.py 文件。打开那个文件，找到 INSTALLED_APPS 列表，把 rango 添加到末尾：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'rango_app',\n]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"编写视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写视图"}},[s._v("#")]),s._v(" 编写视图")]),s._v(" "),a("p",[s._v("在app中的views.py编写")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('from django.http import HttpResponse\n\ndef index(request):\n    return HttpResponse("测试返回视图")\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("❏ 首先，从 django.http 模块中导入 HttpResponse 对象。\n❏ 在 views.py 文件中，一个函数就是一个视图。这里我们只编写了一个视图，即 index 。\n❏ 视图函数至少有一个参数，即一个 HttpRequest 对象，它也在 django.http 模块中。按约\n定，这个参数名为 request ，不过你可以根据自己的意愿随意使用其他名称。\n❏ 视图必须返回一个 HttpResponse 对象。简单的 HttpResponse 对象的参数是一个字符串，表\n示要发给客户端的页面内容。")]),s._v(" "),a("p",[a("strong",[s._v("为了让用户能访问视图，要把一个统一资源定位地址（Uniform Resource Loca-tor，URL）映射到视图上。")])]),s._v(" "),a("p",[s._v("打开项目配置目录中的 urls.py 文件，在 urlpatterns 中添加一行代码：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("from rango_app import views\nurlpatterns = [\n    url(r'^$',views.index,name='index'),\n    url(r'^admin/', admin.site.urls),\n]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"image/image-20230114090506232.png",alt:"image-20230114090506232"}})]),s._v(" "),a("h2",{attrs:{id:"映射url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#映射url"}},[s._v("#")]),s._v(" 映射URL")]),s._v(" "),a("p",[s._v("为了提升模块化程度，我们可以换种方式把入站 URL 映射到视图上，而不直接在项目层设置。首先，要修改项目的 urls.py 文件，把针对 Rango 应用的请求交给 Rango 应用处理。然后，在 Rango应用中指定如何处理请求。在urls.py中配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("from django.conf.urls import url,include\nfrom django.contrib import admin\nfrom rango_app import views\n\nurlpatterns = [\n    url(r'^$',views.index, name='index'),\n    url(r'^rango/', include('rango_app.urls')),\n    # 上面的映射把以 rango/ 开头的 URL 交给 rango 应用处理\n    url(r'^admin/', admin.site.urls),\n]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("在rango_app下新建urls.py文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("from django.conf.urls import url\nfrom rango_app import views\n\nurlpatterns = [\n    url(r'^$',views.index,name='index'),\n]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("urlpatterns 是个 Python 列表。新增的映射寻找能匹配 ^rango/ 模式的 URL。遇到这样的 URL 时， rango/ 后面的部分传给 Rango，由 rango.urls 处理。这一步是通过django.conf.urls 模块中的 include() 函数实现的。这是一种分段处理 URL 字符串的方式")]),s._v(" "),a("p",[s._v("完整的 URL 先去掉域名，余下的部分（ rango/ ）传给 tango_with_django 项目，找到匹配的映射后，再把 rango/ 去掉，把空字符串传给 rango 应用处理。")]),s._v(" "),a("p",[s._v("重启项目，访问http://127.0.0.1:8000/rango/")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image-20230114092850057.png",alt:"image-20230114092850057"}})]),s._v(" "),a("h2",{attrs:{id:"流程总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流程总结"}},[s._v("#")]),s._v(" 流程总结")]),s._v(" "),a("p",[s._v("创建 Django 项目\n➊ 执行 python django-admin.py startproject "),a("name",[s._v(" 命令，其中 "),a("name",[s._v(" 是想创建的项目名\n称。\n创建 Django 应用\n➊ 执行 python manage.py startapp "),a("appname",[s._v(" 命令，其中 "),a("appname",[s._v(" 是想创建的应用名称。\n➋ 把应用名称添加到项目配置目录中的 settings.py 文件里，放到 INSTALLED_APPS 列表的末\n尾，告诉 Django 项目这个应用的存在。\n➌ 在项目的 urls.py 文件中添加一个映射，指向新建的应用。\n➍ 在应用的目录中新建 urls.py 文件，把入站 URL 与视图对应起来。\n➎ 在应用的 view.py 文件中编写所需的视图，确保视图返回一个 HttpResponse 对象。")])],1)],1)],1)],1),s._v(" "),a("h1",{attrs:{id:"_2-模板和媒体文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-模板和媒体文件"}},[s._v("#")]),s._v(" 2.模板和媒体文件")]),s._v(" "),a("h2",{attrs:{id:"配置目录模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置目录模板"}},[s._v("#")]),s._v(" 配置目录模板")]),s._v(" "),a("p",[s._v("模板可以理解为构建完整的 HTML 页面所需的骨架。模板中有"),a("strong",[s._v("静态内容")]),s._v("（不变的部分），也有特殊的句法（"),a("strong",[s._v("动态内容")]),s._v("，即模板标签）。Django 视图会把动态内容替换成真正的数据，"),a("strong",[s._v("生成最终的 HTML 响应")]),s._v("。")]),s._v(" "),a("p",[s._v("在templates下创建rango目录，告诉 Django 你把模板放在什么位置")]),s._v(" "),a("p",[s._v("settings.py，找到 TEMPLATES")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("TEMPLATES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BACKEND'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.template.backends.django.DjangoTemplates'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 'DIRS': [BASE_DIR / 'templates']")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DIRS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BASE_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'templates'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'APP_DIRS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'OPTIONS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'context_processors'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.template.context_processors.debug'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.template.context_processors.request'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.auth.context_processors.auth'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.messages.context_processors.messages'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("templates/rango/添加一个index.html")]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token doctype"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<!")]),a("span",{pre:!0,attrs:{class:"token doctype-tag"}},[s._v("DOCTYPE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token name"}},[s._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("html")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("lang")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("meta")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("charset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("rango"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("Rango says..."),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    hey there partner!"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("strong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("{{ boldmessage }}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("strong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("/rango/about/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("About"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("修改views中的index函数")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -*- coding: utf-8 -*-")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" __future__ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" unicode_literals\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("shortcuts "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" render\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("http "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" HttpResponse\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("shortcuts "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" render\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Create your views here.")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 构建一个字典，将上下文传给模板引擎")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意boldmessage键对应于模板中的{{ boldmessage}}")]),s._v("\n    context_dict "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'boldmessage'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Crunchy, creamy, cookie, candy, cupcake!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"是a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回一个渲染后的相应给客户端")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#为了方便使用render函数的简短形式")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意第二个参数就是我们想要使用的模板")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" render"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rango/index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("context"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("context_dict"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# return HttpResponse("测试返回视图")')]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("about")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" HttpResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Rango sras here is the abot page"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[a("strong",[s._v("模板上下文:")])]),s._v(" "),a("p",[s._v("模板上下文是一个Python 字典，把模板变量名映射到值上。在前面的模板中，有个名为 boldmessage 的模板变量。在修改后的 index() 视图中，我们把 Crunchy, creamy, cookie, candy, cupcake! 字符串赋给模板变量 boldmessage 。这样，渲染模板时，模板中的 "+s._s(s.boldmessage)+" 将会替换为字符串 Crunchy, creamy, cookie, candy, cupcake! 。")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image-20230114114137241.png",alt:"image-20230114114137241"}})]),s._v(" "),a("h2",{attrs:{id:"配置静态文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置静态文件"}},[s._v("#")]),s._v(" 配置静态文件")]),s._v(" "),a("p",[s._v("配置静态文件目录")]),s._v(" "),a("p",[s._v("在setting.py下配置")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# STATIC_DIR = os.path.join(BASE_DIR, 'static')")]),s._v("\nSTATICFILES_DIRS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BASE_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'static'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n检查最后有没有，没有加上\nSTATIC_URL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/static/'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("在templates设置同级目录static.在static下创建images目录，把照片")]),s._v(" "),a("p",[s._v("放在里面")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image-20230114121502563.png",alt:"image-20230114121502563"}})]),s._v(" "),a("p",[s._v("访问")]),s._v(" "),a("p",[s._v("http://127.0.0.1:8000/static/images/wallhaven-9ddzdk.jpg")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image-20230114121346607.png",alt:"image-20230114121346607"}})]),s._v(" "),a("p",[s._v("在模板中引用静态文件，修改index.html")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<!DOCTYPE html>\n{% load staticfiles %}\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>rango</title>\n</head>\n<body>\n<h1>Rango says...</h1>\n<div>\n    hey there partner!<br/>\n    <strong>{{ boldmessage }}</strong><br/>\n</div>\n\n<div>\n    <a href="/rango/about/">About</a><br/>\n    <img src="{% static "images/wallhaven-9ddzdk.jpg" alt="Picture of Rango"%}"/>\n</div>\n\n\n</body>\n</html>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("{% load staticfiles %}:")]),s._v(" "),a("p",[s._v("告诉 Django 模板引擎，我们将在模板中使用静态文件。")]),s._v(" "),a("p",[s._v('<img src="{% static "images/wallhaven-9ddzdk.jpg" alt="Picture of Rango"%}"/>:')]),s._v(" "),a("p",[s._v('static "images/wallhaven-9ddzdk.jpg" 告诉 Django，我们想显示静态目录中名为 images/wallhaven-9ddzdk.jpg 的图像')]),s._v(" "),a("p",[s._v("static 标签会在images/wallhaven-9ddzdk.jpg 前加上 STATIC_URL 指定的 URL，得到 /static/images/wallhaven-9ddzdk.jpg")]),s._v(" "),a("p",[s._v("添加别的配置文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image-20230114123550083.png",alt:"image-20230114123550083"}})]),s._v(" "),a("p",[s._v("配置媒体文件")]),s._v(" "),a("p",[s._v("媒体文件交给署后应该寻找其他方式托管应用的媒体文件")]),s._v(" "),a("p",[s._v("和templates同一个目录")]),s._v(" "),a("p",[s._v("在setting.py下配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("MEDIA_DIR = os.path.join(BASE_DIR, 'media')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("告诉 Django，媒体文件将上传到 Django 项目根目录中的 media 目录里")]),s._v(" "),a("p",[s._v("在 settings.py 中找个地方添加两个变量： MEDIA_ROOT 和 MEDIA_URL 。")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("MEDIA_ROOT "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MEDIA_DIR\nMEDIA_URL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/media/'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("在模板中引入上传的内容时，能方便引用 MEDIA_URL 路径Django 提供了模板上下文处理器。")]),s._v(" "),a("p",[s._v("找到 settings.py 文件中的 TEMPLATES 列表里面嵌套着 context_processors 列表。在context_processors 列表中添加一个处理器，django.template.context_processors.media 。")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'OPTIONS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'context_processors'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.template.context_processors.debug'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.template.context_processors.request'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.auth.context_processors.auth'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.messages.context_processors.messages'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.template.context_processors.media'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"调整-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调整-url"}},[s._v("#")]),s._v(" 调整 URL")]),s._v(" "),a("p",[s._v("在开发环境中服务器媒体文件的最后一步是，让 Django 使用 MEDIA_URL 服务器媒体内容。")]),s._v(" "),a("p",[s._v("urls.py 模块，修改 urlpatterns 列表，调用 static() 函数：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("from django.conf.urls import url,include\nfrom django.contrib import admin\nfrom rango_app import views\nfrom django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = [\n    url(r'^$',views.index, name='index'),\n    url(r'^rango/', include('rango_app.urls')),\n    # 上面的映射把以 rango/ 开头的 URL 交给 rango 应用处理\n    # url(r'luoyao/',include('rango_app.urls')),\n    url(r'^admin/', admin.site.urls),\n] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("现在可以通过 /media/ URL 访问 media 目录中的媒体文件了。")]),s._v(" "),a("h2",{attrs:{id:"配置media"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置media"}},[s._v("#")]),s._v(" 配置media")]),s._v(" "),a("p",[s._v("为用户上传下载图片的时候使用的动态存储")]),s._v(" "),a("p",[s._v("这里找了半天的错误，访问图片的时候一直报错，是因为setting里配置用问题")]),s._v(" "),a("p",[s._v("错误复现方法：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("STATICFILES_DIRS = [os.path.join(BASE_DIR, 'static'), ]\nMEDIA_ROOT = [os.path.join(BASE_DIR, 'media'), ]\n......\nSTATIC_URL = '/static/'\nMEDIA_URL = '/media/'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("不太懂为什么上一个会报错，访问图片位置：http://127.0.0.1:8000/media/img.png")]),s._v(" "),a("p",[s._v("这个看起来是，路径多解释了一次")]),s._v(" "),a("p",[s._v("\"E:\\code\\python\\tango_with_django_project['E:\\code\\python\\tango_with_django_project\\media']\\img.png\" does not exist")]),s._v(" "),a("p",[s._v("解决方法")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("STATICFILES_DIRS = [os.path.join(BASE_DIR, 'static'), ]\nMEDIA_DIR = os.path.join(BASE_DIR, 'media')\nMEDIA_ROOT = MEDIA_DIR\n......\nSTATIC_URL = '/static/'\nMEDIA_URL = '/media/'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("整体配置方法：")]),s._v(" "),a("p",[s._v("创建一个与template的同级目录，放一张图片")]),s._v(" "),a("p",[s._v("setting.py")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("STATICFILES_DIRS = [os.path.join(BASE_DIR, 'static'), ]\nMEDIA_ROOT = [os.path.join(BASE_DIR, 'media'), ]\nMEDIA_URL = '/media/'\n......\nSTATIC_URL = '/static/'\ntemplates的option应该为这样\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n                'django.template.context_processors.media',\n            ],\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("urls.py")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("from django.conf.urls import url,include\nfrom django.contrib import admin\nfrom rango_app import views\nfrom django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = [\n    url(r'^$',views.index, name='index'),\n    url(r'^rango/', include('rango_app.urls')),\n    # 上面的映射把以 rango/ 开头的 URL 交给 rango 应用处理\n    url(r'^admin/', admin.site.urls),\n] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("访问图片：http://127.0.0.1:8000/media/img.png")]),s._v(" "),a("p",[s._v("在网页中引用方式：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    <img src="{{ MEDIA_URL }}img.png"/>\n    img.png图片名\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"流程总结-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流程总结-2"}},[s._v("#")]),s._v(" 流程总结")]),s._v(" "),a("p",[s._v("➊ 首先，创建要使用的模板，保存到 templates 目录中（在项目的 settings.py 模块中设定）。\n模板中可以使用 Django 模板变量（例如 "+s._s(s.variable_name)+" ）或模板标签。模板变量的\n值在相应的视图中设定。\n➋ 在应用的 views.py 文件中找到所需的视图，或者新建一个。\n➌ 把视图相关的逻辑写在视图函数中。例如，从数据库中检索数据，存到列表中。\n➍ 在视图中构建一个字典，通过模板上下文传给模板引擎。\n➎ 使用 render() 辅助函数生成响应。这个函数的参数是请求对象、模板文件名和上下文字\n典。\n➏ 如果还没把视图映射到 URL 上，修改项目的 urls.py 文件和应用的 urls.py 文件。")]),s._v(" "),a("p",[s._v("在网页中引入静态文件的步骤也很重要，应该熟练掌握。具体方法参见下述步骤。")]),s._v(" "),a("p",[s._v("➊ 把想用的静态文件放到项目的 static 目录中。这个目录在项目的 settings.py 模块中的\nSTATICFILES_DIRS 列表中设定。\n➋ 在模板中引用静态文件。例如，图像通过 "),a("img"),s._v(' 标签插入 HTML 页面。\n➌ 记得在模板中加上 {% load staticfiles %} ，然后使用 {% static "'),a("filename",[s._v('" %} 标签引\n用静态文件。把 '),a("filename",[s._v(" 替换成图像或其他资源的路径。只要想引用静态文件，使用\nstatic 模板标签。")])],1)],1),s._v(" "),a("p",[s._v("伺服媒体文件的步骤与伺服静态文件差不多。")]),s._v(" "),a("p",[s._v("➊ 把媒体文件放到项目的 media 目录中。这个目录由项目的 settings.py 模块中的 MEDIA_ROOT\n变量设定。\n➋ 在模板中使用 "+s._s(s.MEDIA_URL)+" 上下文变量引用媒体文件。例如，引用上传的图像\ncat.jpg： "),a("img",{attrs:{src:"{{ MEDIA_URL}}cat.jpg"}}),s._v(" 。")]),s._v(" "),a("h1",{attrs:{id:"_3-模型与数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-模型与数据库"}},[s._v("#")]),s._v(" 3.模型与数据库")]),s._v(" "),a("p",[s._v("创建模型")]),s._v(" "),a("p",[s._v("在setting.py配置号数据库，这里使用的默认的sqlite3数据库")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("在自己的app的models.py里面设置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals\nfrom django.db import models\n# Create your models here.\nclass Category(models.Model):\n    name = models.CharField(max_length=128,unique=True)\n    \n    def __str__(self):\n        return self.name\nclass Page(models.Model):\n    category = models.ForeignKey(Category)\n    title = models.CharField(max_length=128)\n    url = models.URLField()\n    views = models.IntegerField(default=0)\n    \n    def __str__(self):\n        return self.title\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("常用几种类型")]),s._v(" "),a("p",[s._v("❏ CharField ：存储字符数据（如字符串）的字段。 max_length 参数指定最多可存储的字符\n数。\n❏ URLField ：类似于 CharField ，不过是专用于存储 URL 的。也可指定 max_length 参数。\n❏ IntegerField ：存储整数。\n❏ DateField ：存储 Python datetime.date 对象。")]),s._v(" "),a("p",[s._v("模型之间关系")]),s._v(" "),a("p",[s._v("❏ ForeignKey ：用于建立一对多关系。\n❏ OneToOneField ：用于建立一对一关系。\n❏ ManyToManyField ：用于建立多对多关系。")]),s._v(" "),a("h2",{attrs:{id:"创建和迁移数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建和迁移数据库"}},[s._v("#")]),s._v(" 创建和迁移数据库")]),s._v(" "),a("p",[s._v("设置")]),s._v(" "),a("p",[s._v("创建数据库及相关的表,创建超级用户，Aa123456")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" E:\\code\\python\\tango_with_django_project>python manage.py migrate\n(venv) E:\\code\\python\\tango_with_django_project>python manage.py createsuperuser\nUsername (leave blank to use '47361'): root\nEmail address: ly201552y@163.com\nPassword:\nPassword (again):\nSuperuser created successfully.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("创建和更新模型表")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\code\\python\\tango_with_django_project"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" python manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py makemigrations rango_app\nMigrations "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rango_app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  rango_app\\migrations\\0001_initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Create model Category\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Create model Page\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("创建好迁移后，要提交到数据库。为此要再次执行 migrate 命令。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(venv) E:\\code\\python\\tango_with_django_project> python manage.py migrate\nOperations to perform:\n  Apply all migrations: admin, auth, contenttypes, rango_app, sessions\nRunning migrations:\n  Applying rango_app.0001_initial... OK\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("小知识：查看 Django ORM 为某个迁移执行的底层 SQL")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('(venv) E:\\code\\python\\tango_with_django_project> python manage.py sqlmigrate rango_app 0001\nBEGIN;\n--\n-- Create model Category\n--\nCREATE TABLE "rango_app_category" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(128) NOT NULL UNIQUE);\n--\n-- Create model Page\n--\nCREATE TABLE "rango_app_page" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "title" varchar(128) NOT NULL, "url" varchar(200) NOT NULL, "views" integer NOT NULL, "category_id" integer NOT NULL REFERENCES "rango_app_category" (\n"id"));\nCREATE INDEX "rango_app_page_category_id_93ad8e6d" ON "rango_app_page" ("category_id");\nCOMMIT;\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"django-模型和-shell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#django-模型和-shell"}},[s._v("#")]),s._v(" Django 模型和 shell")]),s._v(" "),a("p",[s._v("进行shell调试")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('python manage.py shell\n(venv) E:\\code\\python\\tango_with_django_project>python manage.py shell\nPython 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 20:42:59) [MSC v.1500 32 bit (Intel)] on win32\nType "help", "copyright", "credits" or "license" for more information.\n(InteractiveConsole)\n>>> from rango_app.models import Category\n>>> print(Category.objects.all())\n<QuerySet [<Category: test>]>\n# 创建一个分类对象，存入数据库\n>>> c=Category(name="hahha")\n>>> c.save()\n>>> print(Category.objects.all())\n<QuerySet [<Category: test>, <Category: hahha>]>\n>>>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"配置管理界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置管理界面"}},[s._v("#")]),s._v(" 配置管理界面")]),s._v(" "),a("p",[s._v("可以浏览、标记和删除模型实例表示的数据")]),s._v(" "),a("p",[s._v("检查项目的 settings.py ，django.contrib.admin （在 INSTALLED_APPS 列表中）和项目的 urls.py 模块中有个匹配admin/ 的 URL 模式（在 urlpattern 中）。")]),s._v(" "),a("p",[s._v("启动开发服务器，访问http://127.0.0.1:8000/admin")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" python manage.py runserver\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"image/image-20230115155352721.png",alt:"image-20230115155352721"}})]),s._v(" "),a("p",[s._v("但是没有 Rango 应用的 Category 和 Page 模型。为了显示这两个模型，我们要给Django 一些提示。")]),s._v(" "),a("p",[s._v("打开 rango_app/admin.py 文件，注册想在管理界面显示的类。下述代码注册 Category 和 Page 两个类。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals\n\nfrom django.contrib import admin\nfrom rango_app.models import Category,Page\n# Register your models here.\n\nadmin.site.register(Category)\nadmin.site.register(Page)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("img",{attrs:{src:"image/image-20230115155609788.png",alt:"image-20230115155609788"}})]),s._v(" "),a("p",[s._v("这样就可以访问到了")]),s._v(" "),a("p",[s._v("管理界面中有拼写错误（应该是 Categories ，而不是 Categorys ）？为了修正这个错误，可以在模型定义中添加嵌套的 Meta 类，在里面声明 verbose_name_plural 属性。下面是修改后的 Category 模型。 Meta 类有很多作用")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("class Category(models.Model):\n    name = models.CharField(max_length=128,unique=True)\n    class Meta:\n        verbose_name_plural = 'Categories'\n\n    def __str__(self):\n        return self.name\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"编写一个填充脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写一个填充脚本"}},[s._v("#")]),s._v(" 编写一个填充脚本")]),s._v(" "),a("p",[s._v("把测试数据输入数据库是件麻烦事。编写一个脚本，把真实可信的数据自动填充到数据库中。")]),s._v(" "),a("p",[s._v("在 Django 项目的根目录中新建一个 Python 文件，命名为populate_rango.py，写入下述代码：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h1",{attrs:{id:"name-main-是什么意思"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#name-main-是什么意思"}},[s._v("#")]),s._v(" "),a("strong",[s._v("name")]),s._v(" == '"),a("strong",[s._v("main")]),s._v("'是什么意思？")]),s._v(" "),a("p",[s._v("既让 Python 模块作为可重用的模块，也让其作为独立的 Python 脚本。可重用的模块是指可以导入其他模块（例如通过 import 语句），而独\n立的 Python 脚本可以在终端或命令提示符中执行（ python module.py ）。")]),s._v(" "),a("p",[s._v("if "),a("strong",[s._v("name")]),s._v(" == '"),a("strong",[s._v("main")]),s._v("' 条件语句中的代码仅在作为独立的 Python 脚本运行时才执行。如果作为模块导入，那一段代码不执行，因为导入做是为了访问模块中的类或函数。")]),s._v(" "),a("h1",{attrs:{id:"可能遇到报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可能遇到报错"}},[s._v("#")]),s._v(" 可能遇到报错")]),s._v(" "),a("h2",{attrs:{id:"项目无法启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目无法启动"}},[s._v("#")]),s._v(" 项目无法启动")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Traceback (most recent call last):\n  File "manage.py", line 22, in <module>\n    execute_from_command_line(sys.argv)\n  File "E:\\code\\python\\tango_with_django_project\\venv\\lib\\site-packages\\django\\core\\management\\__init__.py", line 364, in execute_from_command_line\n    utility.execute()\n  File "E:\\code\\python\\tango_with_django_project\\venv\\lib\\site-packages\\django\\core\\management\\__init__.py", line 308, in execute\n    settings.INSTALLED_APPS\n  File "E:\\code\\python\\tango_with_django_project\\venv\\lib\\site-packages\\django\\conf\\__init__.py", line 56, in __getattr__\n    self._setup(name)\n  File "E:\\code\\python\\tango_with_django_project\\venv\\lib\\site-packages\\django\\conf\\__init__.py", line 41, in _setup\n    self._wrapped = Settings(settings_module)\n  File "E:\\code\\python\\tango_with_django_project\\venv\\lib\\site-packages\\django\\conf\\__init__.py", line 110, in __init__\n    mod = importlib.import_module(self.SETTINGS_MODULE)\n  File "D:\\software\\python2.7\\Lib\\importlib\\__init__.py", line 37, in import_module\n    __import__(name)\n  File "E:\\code\\python\\tango_with_django_project\\tango_with_django_project\\settings.py", line 57, in <module>\n    \'DIRS\': [BASE_DIR / \'templates\']\nTypeError: unsupported operand type(s) for /: \'str\' and \'str\'\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("修改setting中的配置，无法识别反斜杠导致的")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("        # 'DIRS': [BASE_DIR / 'templates']\n        'DIRS': [os.path.join(BASE_DIR,'templates')]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);