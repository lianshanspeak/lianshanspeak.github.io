(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{397:function(s,t,e){s.exports=e.p+"assets/img/864900-20211013212551394-2104716484.29c2025d.png"},398:function(s,t,e){s.exports=e.p+"assets/img/864900-20211013212649514-904708608.5c08da6a.png"},971:function(s,t,e){"use strict";e.r(t);var n=e(6),a=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"postgresql导入数据库脚本文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postgresql导入数据库脚本文件"}},[s._v("#")]),s._v(" postgresql导入数据库脚本文件")]),s._v(" "),t("Badge",{attrs:{text:"要点"}}),s._v(" "),t("p",[t("strong",[s._v("psql -1 -f支持在一个事务中的脚本，要么所有sql执行成功，要么所有sql执行失败，文件所有sql回滚")])]),s._v(" "),t("p",[s._v("--编写脚本文件")]),s._v(" "),t("p",[s._v("[postgres@localhost ~]$ cat test_2.sql\ncreate table test_2(id int4);\ninsert into test_2 values (1);\ninsert into test_2 values (2);\ninsert into test_2 values (3);\ninsert into test_2 values (4);")]),s._v(" "),t("p",[s._v("导入数据（也可以指定库，用户），加上参数q之后可以不在显示具体信息")]),s._v(" "),t("p",[s._v("[postgres@localhost ~]$ psql -f test_2.sql\nCREATE TABLE\nINSERT 0 1\nINSERT 0 1\nINSERT 0 1\nINSERT 0 1")]),s._v(" "),t("p",[s._v("或者")]),s._v(" "),t("p",[s._v("[postgres@localhost ~]$ psql -q -f test_2.sql")]),s._v(" "),t("p",[s._v("psql -1 -f支持在一个事务中的脚本，要么所有sql执行成功，要么所有sql执行失败，文件所有sql回滚")]),s._v(" "),t("p",[t("img",{attrs:{src:e(397),alt:"img"}}),t("img",{attrs:{src:e(398),alt:"img"}})]),s._v(" "),t("h2",{attrs:{id:"通过-v参数传递变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过-v参数传递变量"}},[s._v("#")]),s._v(" 通过-v参数传递变量")]),s._v(" "),t("p",[s._v("--编写test_2.sql脚本")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[postgres@localhost ~]$ cat test_2.sql\nselect * from test_2 where id=:v_id;\n通过-v传递参数\n[postgres@localhost ~]$ psql -v v_id=1 -f test_2.sql\nid\n----\n1\n(1 row)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])],1)}),[],!1,null,null,null);t.default=a.exports}}]);