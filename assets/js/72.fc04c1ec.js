(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{973:function(s,t,a){"use strict";a.r(t);var e=a(6),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"如何查找top-sql-例如io消耗最高的sql-包含sql优化内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何查找top-sql-例如io消耗最高的sql-包含sql优化内容"}},[s._v("#")]),s._v(" 如何查找TOP SQL (例如IO消耗最高的SQL) (包含SQL优化内容)")]),s._v(" "),t("h2",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),t("p",[s._v("数据库是较大型的应用，对于繁忙的数据库，需要消耗大量的内存、CPU、IO、网络资源。")]),s._v(" "),t("p",[s._v("SQL优化是数据库优化的手段之一，优化什么SQL效果最佳呢？首先要了解最耗费资源的SQL，即TOP SQL。")]),s._v(" "),t("p",[s._v("从哪里可以了解数据库的资源都被哪些SQL消耗掉了呢？")]),s._v(" "),t("p",[s._v("资源分为多个维度，CPU，内存，IO等。如何能了解各个维度层面的TOP SQL呢？")]),s._v(" "),t("p",[s._v("pg_stat_statements插件可以用于统计数据库的资源开销，分析TOP SQL。")]),s._v(" "),t("h2",{attrs:{id:"加载pg-stat-statements模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#加载pg-stat-statements模块"}},[s._v("#")]),s._v(" 加载pg_stat_statements模块")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vi $PGDATA/postgresql.conf    \nshared_preload_libraries='pg_stat_statements'    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("如果要跟踪IO消耗的时间，还需要打开如下参数")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("track_io_timing = on    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("设置单条SQL的最长长度，超过被截断显示（可选）")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("track_activity_query_size = 2048    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"配置pg-stat-statements采样参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置pg-stat-statements采样参数"}},[s._v("#")]),s._v(" 配置pg_stat_statements采样参数")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vi $PGDATA/postgresql.conf    \npg_stat_statements.max = 10000           # 在pg_stat_statements中最多保留多少条统计信息，通过LRU算法，覆盖老的记录。    \npg_stat_statements.track = all           # all - (所有SQL包括函数内嵌套的SQL), top - 直接执行的SQL(函数内的sql不被跟踪), none - (不跟踪)    \npg_stat_statements.track_utility = off   # 是否跟踪非DML语句 (例如DDL，DCL)， on表示跟踪, off表示不跟踪    \npg_stat_statements.save = on             # 重启后是否保留统计信息    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("重启数据库")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pg_ctl restart -m fast    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"创建pg-stat-statements-extension"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建pg-stat-statements-extension"}},[s._v("#")]),s._v(" 创建pg_stat_statements extension")]),s._v(" "),t("p",[s._v("在需要查询TOP SQL的数据库中，创建extension")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("create extension pg_stat_statements;    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"分析top-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分析top-sql"}},[s._v("#")]),s._v(" 分析TOP SQL")]),s._v(" "),t("h3",{attrs:{id:"pg-stat-statements输出内容介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pg-stat-statements输出内容介绍"}},[s._v("#")]),s._v(" pg_stat_statements输出内容介绍")]),s._v(" "),t("p",[s._v("查询pg_stat_statements视图，可以得到统计信息")]),s._v(" "),t("p",[s._v("SQL语句中的一些过滤条件在pg_stat_statements中会被替换成变量，减少重复显示的问题。")]),s._v(" "),t("p",[s._v("pg_stat_statements视图包含了一些重要的信息，例如：")]),s._v(" "),t("p",[s._v("\\1. SQL的调用次数，总的耗时，最快执行时间，最慢执行时间，平均执行时间，执行时间的方差（看出抖动），总共扫描或返回或处理了多少行；")]),s._v(" "),t("p",[s._v("\\2. shared buffer的使用情况，命中，未命中，产生脏块，驱逐脏块。")]),s._v(" "),t("p",[s._v("\\3. local buffer的使用情况，命中，未命中，产生脏块，驱逐脏块。")]),s._v(" "),t("p",[s._v("\\4. temp buffer的使用情况，读了多少脏块，驱逐脏块。")]),s._v(" "),t("p",[s._v("\\5. 数据块的读写时间。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[s._v("Name")])]),s._v(" "),t("th",[t("strong",[s._v("Type")])]),s._v(" "),t("th",[t("strong",[s._v("References")])]),s._v(" "),t("th",[t("strong",[s._v("Description")])])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("userid")]),s._v(" "),t("td",[s._v("oid")]),s._v(" "),t("td",[s._v("pg_authid.oid")]),s._v(" "),t("td",[s._v("OID of user who executed the statement")])]),s._v(" "),t("tr",[t("td",[s._v("dbid")]),s._v(" "),t("td",[s._v("oid")]),s._v(" "),t("td",[s._v("pg_database.oid")]),s._v(" "),t("td",[s._v("OID of database in which the statement was executed")])]),s._v(" "),t("tr",[t("td",[s._v("queryid")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Internal hash code, computed from the statement's  parse tree")])]),s._v(" "),t("tr",[t("td",[s._v("query")]),s._v(" "),t("td",[s._v("text")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Text of a representative statement")])]),s._v(" "),t("tr",[t("td",[s._v("calls")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Number of times executed")])]),s._v(" "),t("tr",[t("td",[s._v("total_time")]),s._v(" "),t("td",[s._v("double precision")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total time spent in the statement, in milliseconds")])]),s._v(" "),t("tr",[t("td",[s._v("min_time")]),s._v(" "),t("td",[s._v("double precision")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Minimum time spent in the statement, in  milliseconds")])]),s._v(" "),t("tr",[t("td",[s._v("max_time")]),s._v(" "),t("td",[s._v("double precision")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Maximum time spent in the statement, in  milliseconds")])]),s._v(" "),t("tr",[t("td",[s._v("mean_time")]),s._v(" "),t("td",[s._v("double precision")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Mean time spent in the statement, in milliseconds")])]),s._v(" "),t("tr",[t("td",[s._v("stddev_time")]),s._v(" "),t("td",[s._v("double precision")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Population standard deviation of time spent in the  statement, in milliseconds")])]),s._v(" "),t("tr",[t("td",[s._v("rows")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of rows retrieved or affected by the  statement")])]),s._v(" "),t("tr",[t("td",[s._v("shared_blks_hit")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of shared block cache hits by the  statement")])]),s._v(" "),t("tr",[t("td",[s._v("shared_blks_read")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of shared blocks read by the statement")])]),s._v(" "),t("tr",[t("td",[s._v("shared_blks_dirtied")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of shared blocks dirtied by the  statement")])]),s._v(" "),t("tr",[t("td",[s._v("shared_blks_written")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of shared blocks written by the  statement")])]),s._v(" "),t("tr",[t("td",[s._v("local_blks_hit")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of local block cache hits by the  statement")])]),s._v(" "),t("tr",[t("td",[s._v("local_blks_read")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of local blocks read by the statement")])]),s._v(" "),t("tr",[t("td",[s._v("local_blks_dirtied")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of local blocks dirtied by the  statement")])]),s._v(" "),t("tr",[t("td",[s._v("local_blks_written")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of local blocks written by the  statement")])]),s._v(" "),t("tr",[t("td",[s._v("temp_blks_read")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of temp blocks read by the statement")])]),s._v(" "),t("tr",[t("td",[s._v("temp_blks_written")]),s._v(" "),t("td",[s._v("bigint")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total number of temp blocks written by the  statement")])]),s._v(" "),t("tr",[t("td",[s._v("blk_read_time")]),s._v(" "),t("td",[s._v("double precision")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total time the statement spent reading blocks, in  milliseconds (if track_io_timing is enabled, otherwise zero)")])]),s._v(" "),t("tr",[t("td",[s._v("blk_write_time")]),s._v(" "),t("td",[s._v("double precision")]),s._v(" "),t("td",[s._v("-")]),s._v(" "),t("td",[s._v("Total time the statement spent writing blocks, in  milliseconds (if track_io_timing is enabled, otherwise zero)")])])])]),s._v(" "),t("h3",{attrs:{id:"最耗io-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最耗io-sql"}},[s._v("#")]),s._v(" 最耗IO SQL")]),s._v(" "),t("p",[s._v("单次调用最耗IO SQL TOP 5")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by (blk_read_time+blk_write_time)/calls desc limit 5;    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("总最耗IO SQL TOP 5")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by (blk_read_time+blk_write_time) desc limit 5;    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"最耗时-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最耗时-sql"}},[s._v("#")]),s._v(" 最耗时 SQL")]),s._v(" "),t("p",[s._v("单次调用最耗时 SQL TOP 5")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by mean_time desc limit 5;    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("总最耗时 SQL TOP 5(最需要关注的是这个)")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by total_time desc limit 5;    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"响应时间抖动最严重-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#响应时间抖动最严重-sql"}},[s._v("#")]),s._v(" 响应时间抖动最严重 SQL")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by stddev_time desc limit 5;    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"最耗共享内存-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最耗共享内存-sql"}},[s._v("#")]),s._v(" 最耗共享内存 SQL")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by (shared_blks_hit+shared_blks_dirtied) desc limit 5;    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"最耗临时空间-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最耗临时空间-sql"}},[s._v("#")]),s._v(" 最耗临时空间 SQL")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by temp_blks_written desc limit 5;    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"重置统计信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重置统计信息"}},[s._v("#")]),s._v(" 重置统计信息")]),s._v(" "),t("p",[s._v("用户也可以定期清理历史的统计信息，通过调用如下SQL")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select pg_stat_statements_reset(); \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"慢sql到底慢在哪里"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#慢sql到底慢在哪里"}},[s._v("#")]),s._v(" 慢SQL到底慢在哪里？")]),s._v(" "),t("p",[s._v("如果要分析慢SQL到底慢在哪里，使用数据库命令"),t("code",[s._v("explain (analyze,verbose,timing,costs,buffers,timing) SQL;")]),s._v("就可以，再加上一些开关，可以看到更加详细的信息。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("开关, 当前会话生效，打印更加详细的信息\n \nset client_min_messages=debug5;\nset log_checkpoints = on;\nset log_error_verbosity = verbose ;\nset log_lock_waits = on;                  \nset log_replication_commands = off;\nset log_temp_files = 0;\nset track_activities = on;\nset track_counts = on;\nset track_io_timing = on;\nset track_functions = 'all';\nset trace_sort=on;\nset log_statement_stats = off;\nset log_parser_stats = on;\nset log_planner_stats = on;\nset log_executor_stats = on;\nset log_autovacuum_min_duration=0;\nset deadlock_timeout = '1s';\nset debug_print_parse = off;\nset debug_print_rewritten = off;\nset debug_print_plan = off;\nset debug_pretty_print = on;\n如\nexplain (analyze,verbose,timing,costs,buffers) select count(*),relkind from pg_class group by relkind order by count(*) desc limit 1;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("h2",{attrs:{id:"慢sql、top-sql优化示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#慢sql、top-sql优化示例"}},[s._v("#")]),s._v(" 慢SQL、TOP SQL优化示例")]),s._v(" "),t("p",[s._v("1、查看真实的执行计划")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" lock_timeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1s'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" statement_timeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("analyze")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("verbose"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("timing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("costs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("buffers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("timing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- SQL代替为要分析的SQL  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rollback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("2、从explain结果中，找到最耗时的NODE")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("postgres"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  explain (analyze,verbose,timing,costs,buffers) select count(*),c34 from test where c33<3 group by c34;   ")]),s._v("\n                      QUERY "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PLAN")]),s._v("             \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------------------------------------------------------------------------------------------------------------  ")]),s._v("\n HashAggregate  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cost"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18042933.67")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".18042933")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".78")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" width"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("actual "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("79898.384")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".79898")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".386")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" loops"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n   Output: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c34  \n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Group")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Key")]),s._v(": test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c34  \n   Buffers: shared hit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3296")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("read")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16663371")]),s._v("  \n   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  Seq Scan "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cost"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".17916667")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".00")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25253334")]),s._v(" width"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("actual "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.065")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".74406")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".748")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24997473")]),s._v(" loops"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  大量耗费  \n         Output: id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c4"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c6"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c7"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c9"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c11"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c13"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c14"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c15"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c16"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c17"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c18"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c19"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c20"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c21"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c22"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c23"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c24"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c25"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c26"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c28"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c29"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c30"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c31"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c32"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c33"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c34"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c35"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c36"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c37"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c38"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c39"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c40"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c41"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c42"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c43"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c44"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c45"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c46"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c47"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c48"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c49"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c50"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c51"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c52"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c53"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c54"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c55"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c56"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c57"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c58"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c59"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c60"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c61"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c62"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c63"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c64  \n         Filter: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c33 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Rows")]),s._v(" Removed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" Filter: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("75002527")]),s._v("  过滤了大量的行，但是还有很多行需要被查询  \n         Buffers: shared hit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3296")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("read")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16663371")]),s._v("  \n Planning "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Time")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.096")]),s._v(" ms  \n Execution "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Time")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("79898.435")]),s._v(" ms  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("3、针对NODE进行优化")]),s._v(" "),t("p",[s._v("3.1、以上例子，实际上就是扫描花费了很多时间，并且扫描后过滤的结果占比比较低，可以使用索引解决。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("postgres=# create index idx on test (c33,c34);  \n  \npostgres=# explain (analyze,verbose,timing,costs,buffers) select count(*),c34 from test where c33<3 group by c34;   \n                                                                    QUERY PLAN                                                                      \n--------------------------------------------------------------------------------------------------------------------------------------------------  \n HashAggregate  (cost=685855.26..685855.37 rows=11 width=16) (actual time=8056.793..8056.795 rows=11 loops=1)  \n   Output: count(*), c34  \n   Group Key: test.c34  \n   Buffers: shared hit=112642  \n   ->  Index Only Scan using idx on public.test  (cost=0.57..557588.60 rows=25653333 width=8) (actual time=0.031..3691.071 rows=24997473 loops=1)  \n         Output: c33, c34  \n         Index Cond: (test.c33 < 3)  \n         Heap Fetches: 0  \n         Buffers: shared hit=112642   扫描了多少 index 数据块   \n Planning Time: 0.166 ms  \n Execution Time: 8056.842 ms  \n(11 rows)  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("3.2、加索引后的优化，聚集。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("如果未使用index only scan，那么需要回表，回表可能导致扫描更多的数据块。  \n  \n当数据分散存储是，使用聚集可以优化，本例使用了idx only scan，不需要优化  \n  \ncluster test using idx;  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("3.3、聚集后的优化，并行。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("postgres=# set max_parallel_workers_per_gather =32;  \nSET  \npostgres=#  explain (analyze,verbose,timing,costs,buffers) select count(*),c34 from test where c33<3 group by c34;   \n                                                                                QUERY PLAN                                                                                  \n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------  \n Finalize GroupAggregate  (cost=318089.48..318125.45 rows=11 width=16) (actual time=999.918..1000.053 rows=11 loops=1)  \n   Output: count(*), c34  \n   Group Key: test.c34  \n   Buffers: shared hit=9623  \n   ->  Gather Merge  (cost=318089.48..318124.02 rows=264 width=16) (actual time=999.768..999.973 rows=275 loops=1)  \n         Output: c34, (PARTIAL count(*))  \n         Workers Planned: 24  \n         Workers Launched: 24  \n         Buffers: shared hit=9623  \n         ->  Sort  (cost=317088.90..317088.93 rows=11 width=16) (actual time=926.196..926.198 rows=11 loops=25)  \n               Output: c34, (PARTIAL count(*))  \n               Sort Key: test.c34  \n               Sort Method: quicksort  Memory: 25kB  \n               Worker 0:  Sort Method: quicksort  Memory: 25kB  \n               Worker 1:  Sort Method: quicksort  Memory: 25kB  \n               Worker 2:  Sort Method: quicksort  Memory: 25kB  \n               Worker 3:  Sort Method: quicksort  Memory: 25kB  \n               Worker 4:  Sort Method: quicksort  Memory: 25kB  \n               Worker 5:  Sort Method: quicksort  Memory: 25kB  \n               Worker 6:  Sort Method: quicksort  Memory: 25kB  \n               Worker 7:  Sort Method: quicksort  Memory: 25kB  \n               Worker 8:  Sort Method: quicksort  Memory: 25kB  \n               Worker 9:  Sort Method: quicksort  Memory: 25kB  \n               Worker 10:  Sort Method: quicksort  Memory: 25kB  \n               Worker 11:  Sort Method: quicksort  Memory: 25kB  \n               Worker 12:  Sort Method: quicksort  Memory: 25kB  \n               Worker 13:  Sort Method: quicksort  Memory: 25kB  \n               Worker 14:  Sort Method: quicksort  Memory: 25kB  \n               Worker 15:  Sort Method: quicksort  Memory: 25kB  \n               Worker 16:  Sort Method: quicksort  Memory: 25kB  \n               Worker 17:  Sort Method: quicksort  Memory: 25kB  \n               Worker 18:  Sort Method: quicksort  Memory: 25kB  \n               Worker 19:  Sort Method: quicksort  Memory: 25kB  \n               Worker 20:  Sort Method: quicksort  Memory: 25kB  \n               Worker 21:  Sort Method: quicksort  Memory: 25kB  \n               Worker 22:  Sort Method: quicksort  Memory: 25kB  \n               Worker 23:  Sort Method: quicksort  Memory: 25kB  \n               Buffers: shared hit=207494  \n               Worker 0: actual time=923.125..923.126 rows=11 loops=1  \n                 Buffers: shared hit=8571  \n               Worker 1: actual time=922.567..922.568 rows=11 loops=1  \n                 Buffers: shared hit=7575  \n               Worker 2: actual time=923.209..923.210 rows=11 loops=1  \n                 Buffers: shared hit=8448  \n               Worker 3: actual time=922.613..922.615 rows=11 loops=1  \n                 Buffers: shared hit=7958  \n               Worker 4: actual time=923.265..923.266 rows=11 loops=1  \n                 Buffers: shared hit=8706  \n               Worker 5: actual time=923.329..923.330 rows=11 loops=1  \n                 Buffers: shared hit=8800  \n               Worker 6: actual time=923.298..923.299 rows=11 loops=1  \n                 Buffers: shared hit=8637  \n               Worker 7: actual time=922.778..922.780 rows=11 loops=1  \n                 Buffers: shared hit=7168  \n               Worker 8: actual time=923.348..923.349 rows=11 loops=1  \n                 Buffers: shared hit=8804  \n               Worker 9: actual time=923.303..923.304 rows=11 loops=1  \n                 Buffers: shared hit=8576  \n               Worker 10: actual time=923.270..923.272 rows=11 loops=1  \n                 Buffers: shared hit=8848  \n               Worker 11: actual time=923.308..923.309 rows=11 loops=1  \n                 Buffers: shared hit=8500  \n               Worker 12: actual time=923.415..923.417 rows=11 loops=1  \n                 Buffers: shared hit=8606  \n               Worker 13: actual time=922.827..922.828 rows=11 loops=1  \n                 Buffers: shared hit=7402  \n               Worker 14: actual time=923.307..923.309 rows=11 loops=1  \n                 Buffers: shared hit=8415  \n               Worker 15: actual time=922.994..922.996 rows=11 loops=1  \n                 Buffers: shared hit=7467  \n               Worker 16: actual time=923.456..923.457 rows=11 loops=1  \n                 Buffers: shared hit=8460  \n               Worker 17: actual time=923.364..923.366 rows=11 loops=1  \n                 Buffers: shared hit=8647  \n               Worker 18: actual time=923.287..923.289 rows=11 loops=1  \n                 Buffers: shared hit=8549  \n               Worker 19: actual time=922.968..922.969 rows=11 loops=1  \n                 Buffers: shared hit=7211  \n               Worker 20: actual time=923.361..923.363 rows=11 loops=1  \n                 Buffers: shared hit=8650  \n               Worker 21: actual time=923.178..923.179 rows=11 loops=1  \n                 Buffers: shared hit=7691  \n               Worker 22: actual time=923.129..923.131 rows=11 loops=1  \n                 Buffers: shared hit=7609  \n               Worker 23: actual time=923.427..923.428 rows=11 loops=1  \n                 Buffers: shared hit=8573  \n               ->  Partial HashAggregate  (cost=317088.60..317088.71 rows=11 width=16) (actual time=926.136..926.138 rows=11 loops=25)  \n                     Output: c34, PARTIAL count(*)  \n                     Group Key: test.c34  \n                     Buffers: shared hit=207326  \n                     Worker 0: actual time=923.055..923.058 rows=11 loops=1  \n                       Buffers: shared hit=8564  \n                     Worker 1: actual time=922.506..922.509 rows=11 loops=1  \n                       Buffers: shared hit=7568  \n                     Worker 2: actual time=923.159..923.162 rows=11 loops=1  \n                       Buffers: shared hit=8441  \n                     Worker 3: actual time=922.551..922.553 rows=11 loops=1  \n                       Buffers: shared hit=7951  \n                     Worker 4: actual time=923.220..923.223 rows=11 loops=1  \n                       Buffers: shared hit=8699  \n                     Worker 5: actual time=923.285..923.288 rows=11 loops=1  \n                       Buffers: shared hit=8793  \n                     Worker 6: actual time=923.254..923.257 rows=11 loops=1  \n                       Buffers: shared hit=8630  \n                     Worker 7: actual time=922.695..922.698 rows=11 loops=1  \n                       Buffers: shared hit=7161  \n                     Worker 8: actual time=923.290..923.293 rows=11 loops=1  \n                       Buffers: shared hit=8797  \n                     Worker 9: actual time=923.254..923.256 rows=11 loops=1  \n                       Buffers: shared hit=8569  \n                     Worker 10: actual time=923.223..923.226 rows=11 loops=1  \n                       Buffers: shared hit=8841  \n                     Worker 11: actual time=923.224..923.226 rows=11 loops=1  \n                       Buffers: shared hit=8493  \n                     Worker 12: actual time=923.373..923.376 rows=11 loops=1  \n                       Buffers: shared hit=8599  \n                     Worker 13: actual time=922.766..922.769 rows=11 loops=1  \n                       Buffers: shared hit=7395  \n                     Worker 14: actual time=923.232..923.235 rows=11 loops=1  \n                       Buffers: shared hit=8408  \n                     Worker 15: actual time=922.935..922.938 rows=11 loops=1  \n                       Buffers: shared hit=7460  \n                     Worker 16: actual time=923.406..923.409 rows=11 loops=1  \n                       Buffers: shared hit=8453  \n                     Worker 17: actual time=923.317..923.319 rows=11 loops=1  \n                       Buffers: shared hit=8640  \n                     Worker 18: actual time=923.204..923.206 rows=11 loops=1  \n                       Buffers: shared hit=8542  \n                     Worker 19: actual time=922.893..922.895 rows=11 loops=1  \n                       Buffers: shared hit=7204  \n                     Worker 20: actual time=923.283..923.286 rows=11 loops=1  \n                       Buffers: shared hit=8643  \n                     Worker 21: actual time=923.089..923.092 rows=11 loops=1  \n                       Buffers: shared hit=7684  \n                     Worker 22: actual time=923.049..923.051 rows=11 loops=1  \n                       Buffers: shared hit=7602  \n                     Worker 23: actual time=923.379..923.381 rows=11 loops=1  \n                       Buffers: shared hit=8566  \n                     ->  Parallel Index Only Scan using idx on public.test  (cost=0.57..311744.15 rows=1068889 width=8) (actual time=0.294..726.243 rows=999899 loops=25)  \n                           Output: c33, c34  \n                           Index Cond: (test.c33 < 3)  \n                           Heap Fetches: 0  \n                           Buffers: shared hit=207326  \n                           Worker 0: actual time=0.249..739.989 rows=1028079 loops=1  \n                             Buffers: shared hit=8564  \n                           Worker 1: actual time=0.500..698.527 rows=912456 loops=1  \n                             Buffers: shared hit=7568  \n                           Worker 2: actual time=0.449..733.146 rows=1010592 loops=1  \n                             Buffers: shared hit=8441  \n                           Worker 3: actual time=0.554..712.277 rows=953955 loops=1  \n                             Buffers: shared hit=7951  \n                           Worker 4: actual time=0.088..736.872 rows=1047915 loops=1  \n                             Buffers: shared hit=8699  \n                           Worker 5: actual time=0.172..734.815 rows=1056267 loops=1  \n                             Buffers: shared hit=8793  \n                           Worker 6: actual time=0.052..737.294 rows=1040346 loops=1  \n                             Buffers: shared hit=8630  \n                           Worker 7: actual time=0.086..696.398 rows=862866 loops=1  \n                             Buffers: shared hit=7161  \n                           Worker 8: actual time=0.051..735.082 rows=1053918 loops=1  \n                             Buffers: shared hit=8797  \n                           Worker 9: actual time=0.336..740.511 rows=1031994 loops=1  \n                             Buffers: shared hit=8569  \n                           Worker 10: actual time=0.496..735.275 rows=1063836 loops=1  \n                             Buffers: shared hit=8841  \n                           Worker 11: actual time=0.238..728.468 rows=1016595 loops=1  \n                             Buffers: shared hit=8493  \n                           Worker 12: actual time=0.049..737.655 rows=1035648 loops=1  \n                             Buffers: shared hit=8599  \n                           Worker 13: actual time=0.302..699.745 rows=888966 loops=1  \n                             Buffers: shared hit=7395  \n                           Worker 14: actual time=0.200..729.542 rows=1011114 loops=1  \n                             Buffers: shared hit=8408  \n                           Worker 15: actual time=0.296..695.864 rows=898623 loops=1  \n                             Buffers: shared hit=7460  \n                           Worker 16: actual time=0.070..734.046 rows=1015812 loops=1  \n                             Buffers: shared hit=8453  \n                           Worker 17: actual time=0.053..737.755 rows=1040868 loops=1  \n                             Buffers: shared hit=8640  \n                           Worker 18: actual time=0.081..737.488 rows=1030689 loops=1  \n                             Buffers: shared hit=8542  \n                           Worker 19: actual time=0.092..694.639 rows=870957 loops=1  \n                             Buffers: shared hit=7204  \n                           Worker 20: actual time=0.523..737.503 rows=1040607 loops=1  \n                             Buffers: shared hit=8643  \n                           Worker 21: actual time=1.978..709.165 rows=925182 loops=1  \n                             Buffers: shared hit=7684  \n                           Worker 22: actual time=0.294..699.942 rows=907497 loops=1  \n                             Buffers: shared hit=7602  \n                           Worker 23: actual time=0.120..739.781 rows=1030689 loops=1  \n                             Buffers: shared hit=8566  \n Planning Time: 0.311 ms  \n Execution Time: 1007.876 ms  \n(193 rows)  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br"),t("span",{staticClass:"line-number"},[s._v("143")]),t("br"),t("span",{staticClass:"line-number"},[s._v("144")]),t("br"),t("span",{staticClass:"line-number"},[s._v("145")]),t("br"),t("span",{staticClass:"line-number"},[s._v("146")]),t("br"),t("span",{staticClass:"line-number"},[s._v("147")]),t("br"),t("span",{staticClass:"line-number"},[s._v("148")]),t("br"),t("span",{staticClass:"line-number"},[s._v("149")]),t("br"),t("span",{staticClass:"line-number"},[s._v("150")]),t("br"),t("span",{staticClass:"line-number"},[s._v("151")]),t("br"),t("span",{staticClass:"line-number"},[s._v("152")]),t("br"),t("span",{staticClass:"line-number"},[s._v("153")]),t("br"),t("span",{staticClass:"line-number"},[s._v("154")]),t("br"),t("span",{staticClass:"line-number"},[s._v("155")]),t("br"),t("span",{staticClass:"line-number"},[s._v("156")]),t("br"),t("span",{staticClass:"line-number"},[s._v("157")]),t("br"),t("span",{staticClass:"line-number"},[s._v("158")]),t("br"),t("span",{staticClass:"line-number"},[s._v("159")]),t("br"),t("span",{staticClass:"line-number"},[s._v("160")]),t("br"),t("span",{staticClass:"line-number"},[s._v("161")]),t("br"),t("span",{staticClass:"line-number"},[s._v("162")]),t("br"),t("span",{staticClass:"line-number"},[s._v("163")]),t("br"),t("span",{staticClass:"line-number"},[s._v("164")]),t("br"),t("span",{staticClass:"line-number"},[s._v("165")]),t("br"),t("span",{staticClass:"line-number"},[s._v("166")]),t("br"),t("span",{staticClass:"line-number"},[s._v("167")]),t("br"),t("span",{staticClass:"line-number"},[s._v("168")]),t("br"),t("span",{staticClass:"line-number"},[s._v("169")]),t("br"),t("span",{staticClass:"line-number"},[s._v("170")]),t("br"),t("span",{staticClass:"line-number"},[s._v("171")]),t("br"),t("span",{staticClass:"line-number"},[s._v("172")]),t("br"),t("span",{staticClass:"line-number"},[s._v("173")]),t("br"),t("span",{staticClass:"line-number"},[s._v("174")]),t("br"),t("span",{staticClass:"line-number"},[s._v("175")]),t("br"),t("span",{staticClass:"line-number"},[s._v("176")]),t("br"),t("span",{staticClass:"line-number"},[s._v("177")]),t("br"),t("span",{staticClass:"line-number"},[s._v("178")]),t("br"),t("span",{staticClass:"line-number"},[s._v("179")]),t("br"),t("span",{staticClass:"line-number"},[s._v("180")]),t("br"),t("span",{staticClass:"line-number"},[s._v("181")]),t("br"),t("span",{staticClass:"line-number"},[s._v("182")]),t("br"),t("span",{staticClass:"line-number"},[s._v("183")]),t("br"),t("span",{staticClass:"line-number"},[s._v("184")]),t("br"),t("span",{staticClass:"line-number"},[s._v("185")]),t("br"),t("span",{staticClass:"line-number"},[s._v("186")]),t("br"),t("span",{staticClass:"line-number"},[s._v("187")]),t("br"),t("span",{staticClass:"line-number"},[s._v("188")]),t("br"),t("span",{staticClass:"line-number"},[s._v("189")]),t("br"),t("span",{staticClass:"line-number"},[s._v("190")]),t("br"),t("span",{staticClass:"line-number"},[s._v("191")]),t("br"),t("span",{staticClass:"line-number"},[s._v("192")]),t("br"),t("span",{staticClass:"line-number"},[s._v("193")]),t("br"),t("span",{staticClass:"line-number"},[s._v("194")]),t("br"),t("span",{staticClass:"line-number"},[s._v("195")]),t("br"),t("span",{staticClass:"line-number"},[s._v("196")]),t("br"),t("span",{staticClass:"line-number"},[s._v("197")]),t("br"),t("span",{staticClass:"line-number"},[s._v("198")]),t("br"),t("span",{staticClass:"line-number"},[s._v("199")]),t("br")])]),t("p",[s._v("3.4、并行后的优化，列存储。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("当前未有内置列存，可以使用VOPS插件，或者CSTORE插件  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("3.5、列存后的优化，动态编译、向量计算。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("set jit=on  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);