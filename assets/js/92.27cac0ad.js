(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1002:function(s,t,a){"use strict";a.r(t);var n=a(6),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"image/image-20221204101823056.png",alt:"image-20221204101823056"}})]),s._v(" "),t("p",[s._v("多进程实现多任务")]),s._v(" "),t("p",[s._v("引入multiprocessing模块")]),s._v(" "),t("p",[s._v("调用的时候和threading使用方法一致")]),s._v(" "),t("p",[s._v("p1 = multiprocessing.Process(target(test1))")]),s._v(" "),t("p",[s._v("p1.start()")]),s._v(" "),t("p",[s._v("可以在后台看到有多个进程的多任务")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-4-13-centos process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef|grep 01")]),s._v("\nroot         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr11 ?        00:01:00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ksoftirqd/0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1195")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr11 ?        00:01:49 /usr/sbin/crond -n\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1694")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 01:53 ?        00:00:00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kworker/0:2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1837")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27021")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Aug13 ?        01:46:31 barad_agent\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2592")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2591")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Aug13 ?        00:01:15 nginx: worker process\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2637")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 01:58 ?        00:00:03 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kworker/0:0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6515")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1620")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":45 pts/1    00:00:00 python 01.对比多?程和多线程.py\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6516")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6515")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":45 pts/1    00:00:00 python 01.对比多?程和多线程.py\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6517")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6515")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":45 pts/1    00:00:00 python 01.对比多?程和多线程.py\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("使用threading的时候只有一个任务,且ctrl + C停止不了，只有一个线程")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-4-13-centos process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef|grep 01")]),s._v("\nroot         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr11 ?        00:01:00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ksoftirqd/0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1195")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr11 ?        00:01:49 /usr/sbin/crond -n\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1694")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 01:53 ?        00:00:00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kworker/0:2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1837")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27021")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Aug13 ?        01:46:31 barad_agent\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2592")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2591")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Aug13 ?        00:01:15 nginx: worker process\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2637")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 01:58 ?        00:00:03 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kworker/0:0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7076")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7065")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Sep13 ?        01:23:30 /usr/local/nodejs/node-v14.15.3-linux-x64/bin/node /root/vuepress-theme-vdoing/node_modules/.bin/vuepress dev docs\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7344")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1620")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":49 pts/1    00:00:00 python 01.对比多?程和多线程.py\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("主进程有什么子进程就有什么资源，代码是共享的")]),s._v(" "),t("p",[s._v("代码+资源 = 进程")]),s._v(" "),t("p",[s._v("进程多不一定是越多越好，进程占用资源大，线程占有资源少")]),s._v(" "),t("h2",{attrs:{id:"进程和线程的区分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程和线程的区分"}},[s._v("#")]),s._v(" 进程和线程的区分")]),s._v(" "),t("p",[s._v("手机上qq多开理解为多进程。资源和代码的总称")]),s._v(" "),t("p",[s._v("线程是进程起的资源，线程去运行的，例如总线程")]),s._v(" "),t("p",[s._v("进程之间互相独立，线程之间共享全局变量")]),s._v(" "),t("p",[s._v("进程可以理解为流水线，线程就是流水线上的工人")]),s._v(" "),t("p",[s._v("优缺点：")]),s._v(" "),t("p",[s._v("进程资源浪费，线程占用资源少")]),s._v(" "),t("h2",{attrs:{id:"多任务如何实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多任务如何实现"}},[s._v("#")]),s._v(" 多任务如何实现")]),s._v(" "),t("p",[s._v("一份代码多个箭头（线程）")]),s._v(" "),t("p",[s._v("多个资源，每个资源一个箭头")]),s._v(" "),t("h2",{attrs:{id:"进程间通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程间通信"}},[s._v("#")]),s._v(" 进程间通信")]),s._v(" "),t("p",[s._v("进程间通信实现")]),s._v(" "),t("p",[s._v("1.socket。")]),s._v(" "),t("p",[s._v("2.文件")]),s._v(" "),t("p",[s._v("3.queue队列（先进先出）")]),s._v(" "),t("h3",{attrs:{id:"队列"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#队列"}},[s._v("#")]),s._v(" 队列")]),s._v(" "),t("p",[s._v("初始化queue对象")]),s._v(" "),t("p",[s._v("q=Queue(3)")]),s._v(" "),t("p",[s._v("判断队列是否满了")]),s._v(" "),t("p",[s._v("q.full(),没有满返回False,满了返回True")]),s._v(" "),t("p",[s._v("q.empty()判断是否为空")]),s._v(" "),t("p",[s._v("往队列里面放数据")]),s._v(" "),t("p",[s._v("q.put(XXX)，XXX为任意数据类型")]),s._v(" "),t("p",[s._v("q.get()，取数据，数据内容先进先出，没有可取数据时，一直等待数据")]),s._v(" "),t("p",[s._v("q.get_nowait()取数据，没有可取得数据得时候报错，不等待")]),s._v(" "),t("p",[s._v("q.full()判断是否为满")]),s._v(" "),t("p",[s._v("q.empty()判断是否为空")]),s._v(" "),t("p",[s._v("用queue得目的，解耦")]),s._v(" "),t("p",[s._v("耦和性越低越好")]),s._v(" "),t("p",[s._v("比如下载数据和处理数据")]),s._v(" "),t("p",[s._v("使用queue之后可以边下载，边处理。")]),s._v(" "),t("h2",{attrs:{id:"进程池"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程池"}},[s._v("#")]),s._v(" 进程池")]),s._v(" "),t("p",[s._v("先创建一个池里面有一些进程。")]),s._v(" "),t("p",[s._v("引入进程池，减少了程序进程创建和销毁的时间。使用以前的进程。避免开销")]),s._v(" "),t("p",[s._v("任务数不确定采用进程池")]),s._v(" "),t("p",[s._v("如何创建进程池")]),s._v(" "),t("p",[s._v("1.导入multiprocessing 的pool类")]),s._v(" "),t("p",[s._v("2.创建一个进程池，最大进程数为3")]),s._v(" "),t("p",[s._v("po =Pool(3)")]),s._v(" "),t("p",[s._v("3.po.apply_async(worker,(XXX)):worker是函数名称，XXX是需要传的参数")]),s._v(" "),t("p",[s._v("4.关闭进程池")]),s._v(" "),t("p",[s._v("po.close()")]),s._v(" "),t("p",[s._v("5.等待进程池中的所有任务执行完了之后在往下执行。")]),s._v(" "),t("p",[s._v("po.join()")]),s._v(" "),t("h2",{attrs:{id:"多任务文件夹copy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多任务文件夹copy"}},[s._v("#")]),s._v(" 多任务文件夹copy")])])}),[],!1,null,null,null);t.default=r.exports}}]);