(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{393:function(s,t,a){s.exports=a.p+"assets/img/864900-20211013151726612-813942021.4d54aa94.png"},394:function(s,t,a){s.exports=a.p+"assets/img/864900-20211013154537897-34133189.a0678237.png"},395:function(s,t,a){s.exports=a.p+"assets/img/864900-20211013154638930-1652145244.2156545c.png"},396:function(s,t){s.exports="data:image/png;base64,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"},969:function(s,t,a){"use strict";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"基础配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础配置"}},[s._v("#")]),s._v(" 基础配置")]),s._v(" "),t("h2",{attrs:{id:"部署管理配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署管理配置"}},[s._v("#")]),s._v(" 部署管理配置")]),s._v(" "),t("p",[s._v("使用pg_ctl方式进行管理")]),s._v(" "),t("p",[s._v("1.数据库的启动，查看状态，关闭")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('[root@localhost ~]# su - postgres\nLast login: Tue Oct 12 23:34:33 EDT 2021 on pts/1\n[postgres@localhost ~]$ /opt/pgsql/bin/pg_ctl -D /pgdata/10/data/ start\nwaiting for server to start....2021-10-13 00:40:19.174 EDT [25652] LOG:  listening on IPv6 address "::1", port 1921\n2021-10-13 00:40:19.174 EDT [25652] LOG:  listening on IPv4 address "127.0.0.1", port 1921\n2021-10-13 00:40:19.176 EDT [25652] LOG:  listening on Unix socket "/tmp/.s.PGSQL.1921"\n2021-10-13 00:40:19.189 EDT [25653] LOG:  database system was shut down at 2021-10-12 23:36:10 EDT\n2021-10-13 00:40:19.191 EDT [25652] LOG:  database system is ready to accept connections\n done\nserver started\n[postgres@localhost ~]$ /opt/pgsql/bin/pg_ctl -D /pgdata/10/data/ status\npg_ctl: server is running (PID: 25652)\n/opt/pg10/bin/postgres "-D" "/pgdata/10/data"\n[postgres@localhost ~]$ /opt/pgsql/bin/pg_isready -p 1921\n/tmp:1921 - accepting connections\n[postgres@localhost ~]$ /opt/pgsql/bin/pg_ctl -D /pgdata/10/data/ -ms stop　　#smart（-ms）,fast(-mf),immediate(-mi)三种关闭模式\nwaiting for server to shut down....2021-10-13 00:43:51.783 EDT [25652] LOG:  received smart shutdown request\n2021-10-13 00:43:51.784 EDT [25652] LOG:  worker process: logical replication launcher (PID 25659) exited with exit code 1\n2021-10-13 00:43:51.785 EDT [25654] LOG:  shutting down\n2021-10-13 00:43:51.791 EDT [25652] LOG:  database system is shut down\n done\nserver stopped\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("2.配置开机启动")]),s._v(" "),t("p",[s._v("1.配置服务脚本，将linux脚本拷贝到/etc/init.d/中，将脚本重命名为postgresql-10并赋予执行权限")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost ~]# ls postgresql-10.0/contrib/start-scripts/\nfreebsd  linux  osx\n[root@localhost ~]# cp postgresql-10.0/contrib/start-scripts/linux /etc/init.d/postgresql-10\n[root@localhost ~]# chmod +x /etc/init.d/postgresql-10\n[root@localhost ~]# ls -lh /etc/init.d/postgresql-10\n-rwxr-xr-x. 1 root root 3.5K Oct 13 00:48 /etc/init.d/postgresql-10\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("使用")]),s._v(" "),t("p",[s._v("chkconfig --list查看postgresql是否开机启动")]),s._v(" "),t("p",[s._v("设置开机启动，或关闭chkconfig postgresql-10 on/off")]),s._v(" "),t("p",[s._v("3.数据库配置基础")]),s._v(" "),t("p",[s._v("postgresql中两个重要的全局配置文件postgresql.conf(文件配置，资源限制，集权设置)和pg_hba.conf（客户端连接和认证）都存于初始化目录中")]),s._v(" "),t("p",[s._v("全局配置的修改方法")]),s._v(" "),t("ul",[t("li",[s._v("修改postgresql.cong文件")]),s._v(" "),t("li",[s._v("在库中通过alter system set 命令修改全局配置（会产生一个postgresql.auto.conf文件，数据库启动时会加载此文件，并覆盖postgresql.conf中配置，不要修改它）")])]),s._v(" "),t("p",[s._v("非全局修改方法")]),s._v(" "),t("ul",[t("li",[s._v("设置database级别")]),s._v(" "),t("li",[s._v("alter database name set configparameter")]),s._v(" "),t("li",[s._v("设置session级别配置")]),s._v(" "),t("li",[s._v("通过set命令设置当前session配置")])]),s._v(" "),t("p",[s._v("查询配置　　show all")]),s._v(" "),t("p",[s._v("使配置生效：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select pg_reload_conf();\n或者\n[postgres@localhost ~]$ /opt/pgsql/bin/pg_ctl -D /pgdata/10/data reload\nserver signaled\n2021-10-13 01:31:28.393 EDT [25748] LOG:  received SIGHUP, reloading configuration files\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("允许数据库远程访问，需修改监听地址，pg_hba.conf文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" vi /pgdata/10/data/postgresql.conf\n找到#listen_addresses = 'localhost'改为\nlisten_addresses = '*'\n重启数据库：　 /opt/pgsql/bin/pg_ctl -D /pgdata/10/data stop/startecho \"host mydb pguser 0.0.0.0/0 md5\" >> /pgdata/10/data/pg_hba.confreload生效/opt/pgsql/bin/pg_ctl -D /pgdata/10/data/ reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p"),s._v(" "),t("p",[s._v("配置默认环境，设置完后执行source ~/.bashrc")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vi ~/.bashrc\nexport PG_HOME=/opt/pgsql\nexport PATH=$PG_HOME/bin:$PATH\nPGUSER=postgres\nPGHOST=127.0.0.1\nPGDATABASE=postgres\nPGPORT=1921\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"基本操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本操作"}},[s._v("#")]),s._v(" 基本操作")]),s._v(" "),t("p",[s._v("--创建用户，创建空间目录，创建数据库，赋权")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("postgres=# create role pguser with password 'pguser';\nCREATE ROLE\n[root@localhost ~]# mkdir -p /database/pg10/pg_tbs/tbs_mydb\nroot@localhost ~]# chown -R postgres.postgres /database\n[postgres@localhost ~]$ psql\npsql (10.0)\nType \"help\" for help.\n\npostgres=# create tablespace tbs_mydb owner pguser location '/database/pg10/pg_tbs/tbs_mydb';\nCREATE TABLESPACE\npostgres=# create database mydb with owner = pguser TEMPLATE=template0 ENCODING = 'UTF8' TABLESPACE=tbs_mydb;\nCREATE DATABASE\n\npostgres=# grant ALL on DATABASE mydb to pguser with Grant option;(WITH GRANT OPTION 这个选项表示该用户可以将自己拥有的权限授权给别人)\nGRANT\npostgres=# grant ALL on TABLESPACE tbs_mydb to pguser ;\nGRANT\n\npostgres=# alter role pguser login ;\nALTER ROLE\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("--psql元命令介绍")]),s._v(" "),t("p",[s._v("\\l查看库")]),s._v(" "),t("p",[s._v("\\db查看表空间")]),s._v(" "),t("p",[t("img",{attrs:{src:a(393),alt:"img"}})]),s._v(" "),t("p",[s._v("\\d查看表定义")]),s._v(" "),t("p",[s._v("mydb=> create table test_1(id int,name text ,create_time timestamp without time zone default clock_timestamp());\nCREATE TABLE")]),s._v(" "),t("p",[s._v('mydb=> alter table test_1 add primary key (id);\nALTER TABLE\nmydb=> \\d test_1\nTable "public.test_1"\nColumn | Type | Collation | Nullable | Default\n-------------+-----------------------------+-----------+----------+-------------------\nid | integer | | not null |\nname | text | | |\ncreate_time | timestamp without time zone | | | clock_timestamp()\nIndexes:\n"test_1_pkey" PRIMARY KEY, btree (id)')]),s._v(" "),t("p",[s._v("查看表，索引大小")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mydb=> insert into test_1 (id,name) select n,n || '_francs' from generate_series(1,500000) n;\nINSERT 0 500000\nmydb=> select * from test_1  limit 1;\n id |   name   |        create_time\n----+----------+----------------------------\n  1 | 1_francs | 2021-10-13 03:36:25.607786\n(1 row)\nmydb=> \\di+ test_1_pkey\n                          List of relations\n Schema |    Name     | Type  | Owner  | Table  | Size  | Description\n--------+-------------+-------+--------+--------+-------+-------------\n public | test_1_pkey | index | pguser | test_1 | 11 MB |\n(1 row)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("\\sf查看函数代码")]),s._v(" "),t("p",[t("img",{attrs:{src:a(394),alt:"img"}})]),s._v(" "),t("p",[s._v("\\x设置查询结果输出模式")]),s._v(" "),t("p",[t("img",{attrs:{src:a(395),alt:"img"}})]),s._v(" "),t("p",[s._v("psql导入、导出数据表")]),s._v(" "),t("p",[s._v("COPY是sql命令，需要superuser，主机上的文件")]),s._v(" "),t("p",[s._v("\\copy是元命令，不需要superuser，psql端文件")]),s._v(" "),t("p",[s._v("COPY导入导出命令")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[postgres@localhost ~]$ cat test_copy.txt\n1    a\n2    b\n3    c\n4    d\n[postgres@localhost ~]$ psql mydb postgres\nmydb=# COPY public.test_copy from '/home/postgres/test_copy.txt';（实例名）\nCOPY 4\nmydb=# select * from test_copy ;\n id | name\n----+------\n  1 | a\n  2 | b\n  3 | c\n  4 | d\n(4 rows)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("导出")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mydb=# COPY public.test_copy to '/home/postgres/test.txt';\nCOPY 4\nmydb=# \\q\n[postgres@localhost ~]$ ls\ntest_copy.txt  test.txt\n[postgres@localhost ~]$ cat test.txt\n1    a\n2    b\n3    c\n4    d\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("导出到csv格式：加 with csv header导出格式为csv，并显示字段名称")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mydb=# copy public.test_copy to '/home/postgres/test_copy.csv' with csv header;\nCOPY 4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(396),alt:"img"}})]),s._v(" "),t("p",[s._v("如何导出部分数据，导出表test_copy，id等于2的数据")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mydb=# copy (select * from public.test_copy where id=2) to '/home/postgres/test_copy.csv' with csv header;\nCOPY 1\nmydb=# \\q\n[postgres@localhost ~]$ ls\ntest_copy.csv  test_copy.txt  test.txt\n[postgres@localhost ~]$ cat test_copy.csv\nid,name\n2,b\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("\\copy原命令数据导入导出，一样的，把COPY命令换位\\copy即可")]),s._v(" "),t("p",[s._v("小表用\\copy,大表建议用COPY效率更高")])])}),[],!1,null,null,null);t.default=e.exports}}]);