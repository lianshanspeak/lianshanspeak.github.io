(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{939:function(s,t,n){"use strict";n.r(t);var a=n(6),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"rsync托管给xinetd服务去管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rsync托管给xinetd服务去管理"}},[s._v("#")]),s._v(" rsync托管给xinetd服务去管理")]),s._v(" "),t("h2",{attrs:{id:"xinetd简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xinetd简介"}},[s._v("#")]),s._v(" xinetd简介")]),s._v(" "),t("p",[s._v("xinetd托管服务也就是extended internet daemon简写，xinetd执行与inetd相同的功能：它启动提供互联网服务的程序。xinetd不是在系统初始化时启动此类服务器，并在连接请求到达之前处于休眠状态，而是唯一启动的守护进程，它在所有服务端口上侦听其配置文件中列出的服务。当请求传入时，xinetd启动相应的服务器。由于其操作方式，xinetd（以及inetd）也被称为超级服务器。\n  xinetd配置文件中列出的服务可以分为两组。第一组中的服务称为多线程服务，它们需要为每个新的连接请求分叉一个新的服务器进程。然后，新服务器处理该连接。对于此类服务，xinetd会不断侦听新的请求，以便生成新的服务器。另一方面，第二组包括服务守护进程负责处理所有新连接请求的服务。这种服务称为单线程服务，xinetd将停止处理新的请求，直到服务器死亡。该组中的服务通常基于数据报。\n  到目前为止，超级服务器存在的唯一原因是通过避免分叉许多可能在其生命周期的大部分时间处于休眠状态的进程来节省系统资源。在实现这一功能的同时，xinetd利用了超级服务器的思想来提供访问控制和日志记录等功能。xinetd服务的主配置文件/etc/xinetd.conf，用于存放被托管的服务的目录:/etc/xinetd.d 。")]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("1.yum -y install xinetd")]),s._v(" "),t("p",[s._v("rpm -ql xinetd #查看软件列表")]),s._v(" "),t("p",[s._v("rpm -ql rsync")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("xinetd服务的配置文件\nman 5 xinetd.conf\nonly_from\t\t只允许访问\nno_access\t\t拒绝访问\naccess_times\t控制访问服务的时间段\nlog_type\t\t\t指定日志类型\ninterface\t\t并发连接数\nper_source\t\t每个IP的最大连接数\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("2.rsync配置文件 /etc/xinetd.d/rsync")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("service rsync\n{\n\tdisable\t= no\t\t//开关；no表示开启该服务；yes表示关闭服务\n\tflags\t\t= IPv6\n\tsocket_type     = stream\n\twait            = no\n\tuser            = root\n\tserver          = /usr/bin/rsync\n\tserver_args     = --daemon\n\tlog_on_failure  += USERID\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("3.启动rsync服务")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rsync --daemon\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("4.启动xinetd服务")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost aa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl start xinetd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost aa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl status xinetd")]),s._v("\n● xinetd.service - Xinetd A Powerful Replacement For Inetd\n   Loaded: loaded "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/usr/lib/systemd/system/xinetd.service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" vendor preset: enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   Active: active "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("running"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since Sat "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-11-12 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":07:18 CST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 1s ago\n  Process: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6515")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/sbin/xinetd -stayalive -pidfile /var/run/xinetd.pid "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$EXTRAOPTIONS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("code"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("exited, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/SUCCESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n Main PID: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6516")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xinetd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Tasks: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n   Memory: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("580")]),s._v(".0K\n   CGroup: /system.slice/xinetd.service\n           └─6516 /usr/sbin/xinetd -stayalive -pidfile /var/run/xinetd.pid\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("rsync服务就托管给了xinetd服务管理；后续需要有些需求，修改配置文件：\n/etc/rsyncd.conf\n/etc/xinetd.d/rsync")])])}),[],!1,null,null,null);t.default=e.exports}}]);