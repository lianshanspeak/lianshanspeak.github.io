(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{946:function(s,a,t){"use strict";t.r(a);var n=t(6),r=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"课程目标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#课程目标"}},[s._v("#")]),s._v(" 课程目标")]),s._v(" "),a("ul",[a("li",[s._v("熟悉awk的"),a("strong",[s._v("命令行模式")]),s._v("基本语法结构")]),s._v(" "),a("li",[s._v("==熟悉awk的相关内部变量==")]),s._v(" "),a("li",[s._v("熟悉awk常用的打印==函数print==")]),s._v(" "),a("li",[s._v("能够在awk中匹配正则表达式打印相关的行")])]),s._v(" "),a("h3",{attrs:{id:"一、awk介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、awk介绍"}},[s._v("#")]),s._v(" 一、awk介绍")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("awk是一种编程语言，主要用于在linux/unix下对==文本和数据==进行处理，是linux/unix下的一个工具。数据可以来自标准输入、一个或多个文件，或其它命令的输出。")])]),s._v(" "),a("li",[a("p",[s._v("awk的处理文本和数据的方式："),a("strong",[s._v("逐行扫描文件")]),s._v("，默认从第一行到最后一行，寻找匹配的==特定模式==的行，并在这些行上进行你想要的操作。")])]),s._v(" "),a("li",[a("p",[s._v("awk分别代表其作者姓氏的第一个字母。因为它的作者是三个人，分别是Alfred Aho、Brian Kernighan、Peter Weinberger。")])]),s._v(" "),a("li",[a("p",[s._v("gawk是awk的GNU版本，它提供了Bell实验室和GNU的一些扩展。")])]),s._v(" "),a("li",[a("p",[s._v("下面介绍的awk是以GNU的gawk为例的，在linux系统中已把awk链接到gawk，所以下面全部以awk进行介绍。")])])]),s._v(" "),a("h4",{attrs:{id:"_1-awk使用方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-awk使用方式"}},[s._v("#")]),s._v(" 1. awk使用方式")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("命令模式语法")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("awk 选项 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'commands'")]),s._v(" 文件名\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("常用选项")]),s._v(" "),a("ul",[a("li",[s._v("-F  定义字段分割符号，默认的分隔符是空格")]),s._v(" "),a("li",[s._v("-v  定义变量并赋值")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("=='=="),a("strong",[s._v("命名部分(commands)")]),s._v("=='==")])]),s._v(" "),a("ul",[a("li",[s._v("正则表达式，地址定位")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/root/{awk语句}'")]),s._v("\t\t\t\tsed中： "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/root/p'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR==1,NR==5{awk语句}'")]),s._v("\t\t\tsed中： "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1,5p'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^root/,/^ftp/{awk语句}'")]),s._v("  \tsed中："),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^root/,/^ftp/p'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("{awk语句1**==;=="),a("strong",[s._v("awk语句2")]),s._v("==;==**...}")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $0;print $1}'")]),s._v("\t\tsed中："),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'p'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR==5{print $0}'")]),s._v("\t\t\t\tsed中："),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5p'")]),s._v("\n注：awk命令语句间用分号间隔\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("BEGIN...END....")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN{awk语句};{处理中};END{awk语句}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN{awk语句};{处理中}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{处理中};END{awk语句}'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("引用shell变量需用双引号引起")])])])])]),s._v(" "),a("li",[a("p",[s._v("脚本模式")]),s._v(" "),a("ul",[a("li",[s._v("脚本执行")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("方法1：\nawk 选项 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f awk的脚本文件  要处理的文本文件\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f awk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh filename\n\nsed "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f sed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i filename\n\n方法2：\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("awk的脚本文件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("或者绝对路径"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t要处理的文本文件\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("awk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh filename\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh filename\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("脚本编写")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/awk -f \t\t定义魔法字符")]),s._v("\n以下是awk引号里的命令清单，不要用引号保护命令，多个命令用分号间隔\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("FS="),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('":"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nNR==1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("NR==3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("print "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\t"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("h4",{attrs:{id:"_2-awk内部相关变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-awk内部相关变量"}},[s._v("#")]),s._v(" 2. awk内部相关变量")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("变量")]),s._v(" "),a("th",[s._v("变量说明")]),s._v(" "),a("th",[s._v("备注")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("$0")]),s._v(" "),a("td",[s._v("当前处理行的所有记录")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("$1,$2,$3...$n")]),s._v(" "),a("td",[s._v("文件中每行以间隔符号分割的不同字段")]),s._v(" "),a("td",[s._v("awk -F: '{print $1,$3}'")])]),s._v(" "),a("tr",[a("td",[s._v("NF")]),s._v(" "),a("td",[s._v("当前记录的字段数（列数）")]),s._v(" "),a("td",[s._v("awk -F: '{print NF}'")])]),s._v(" "),a("tr",[a("td",[s._v("$NF")]),s._v(" "),a("td",[s._v("最后一列")]),s._v(" "),a("td",[s._v("$(NF-1)表示倒数第二列")])]),s._v(" "),a("tr",[a("td",[s._v("FNR/NR")]),s._v(" "),a("td",[s._v("行号")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("FS")]),s._v(" "),a("td",[s._v("定义间隔符")]),s._v(" "),a("td",[s._v("'BEGIN{FS=\":\"};{print $1,$3}'")])]),s._v(" "),a("tr",[a("td",[s._v("OFS")]),s._v(" "),a("td",[s._v("定义输出字段分隔符，默认空格")]),s._v(" "),a("td",[s._v("'BEGIN{OFS=\"\\t\"};print $1,$3}'")])]),s._v(" "),a("tr",[a("td",[s._v("RS")]),s._v(" "),a("td",[s._v("输入记录分割符，默认换行")]),s._v(" "),a("td",[s._v("'BEGIN{RS=\"\\t\"};{print $0}'")])]),s._v(" "),a("tr",[a("td",[s._v("ORS")]),s._v(" "),a("td",[s._v("输出记录分割符，默认换行")]),s._v(" "),a("td",[s._v("'BEGIN{ORS=\"\\n\\n\"};{print $1,$3}'")])]),s._v(" "),a("tr",[a("td",[s._v("FILENAME")]),s._v(" "),a("td",[s._v("当前输入的文件名")]),s._v(" "),a("td")])])]),s._v(" "),a("ul",[a("li",[s._v("示例1")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{print $1,$(NF-1)}' 1.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{print $1,$(NF-1),$NF,NF}' 1.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk '/root/{print $0}' 1.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk '/root/' 1.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '/root/{print $1,$NF}' 1.txt ")]),s._v("\nroot "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '/root/{print $0}' 1.txt      ")]),s._v("\nroot:x:0:0:root:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'NR==1,NR==5' 1.txt ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'NR==1,NR==5{print $0}' 1.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'NR==1,NR==5;/^root/{print $0}' 1.txt ")]),s._v("\nroot:x:0:0:root:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nroot:x:0:0:root:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nbin:x:1:1:bin:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\ndaemon:x:2:2:daemon:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\nadm:x:3:4:adm:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("adm:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v(":x:4:7:"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spool/lpd:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("ul",[a("li",[s._v("示例2")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("FS和OFS:\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{FS=\":\"};/^root/,/^lp/{print $1,$NF}' 1.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: 'BEGIN{OFS=\"\\t\\t\"};/^root/,/^lp/{print $1,$NF}' 1.txt        ")]),s._v("\nroot            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nbin             "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\ndaemon          "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\nadm             "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: 'BEGIN{OFS=\"@@@\"};/^root/,/^lp/{print $1,$NF}' 1.txt     ")]),s._v("\nroot@@@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nbin@@@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\ndaemon@@@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\nadm@@@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v("@@@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\nRS和ORS：\n修改源文件前2行增加制表符和内容：\nvim 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\nroot:x:0:0:root:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash hello   world\nbin:x:1:1:bin:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin        test1   test2\n\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{RS=\"\\t\"};{print $0}' 1.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{ORS=\"\\t\"};{print $0}' 1.txt")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("ul",[a("li",[s._v("格式化输出"),a("code",[s._v("print")]),s._v("和"),a("code",[s._v("printf")])])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("print函数\t\t类似"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("echo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# date |awk \'{print "Month: "$2 "\\nYear: "$NF}\'')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# awk -F: \'{print "username is: " $1 "\\t uid is: "$3}\' /etc/passwd')]),s._v("\n\n\nprintf函数\t\t类似"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{printf \"%-15s %-10s %-15s\\n\", $1,$2,$3}'  /etc/passwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{printf \"|%15s| %10s| %15s|\\n\", $1,$2,$3}' /etc/passwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{printf \"|%-15s| %-10s| %-15s|\\n\", $1,$2,$3}' /etc/passwd")]),s._v("\n\nawk "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'BEGIN{FS=":"};{printf "%-15s %-15s %-15s\\n",$1,$6,$NF}\'')]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("s 字符类型  strings\t\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("20s\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("d 数值类型\t\n占15字符\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 表示左对齐，默认是右对齐\nprintf默认不会在行尾自动换行，加\\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h4",{attrs:{id:"_3-awk工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-awk工作原理"}},[s._v("#")]),s._v(" 3. awk工作原理")]),s._v(" "),a("p",[a("code",[s._v("awk -F: '{print $1,$3}' /etc/passwd")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("awk使用一行作为输入，并将这一行赋给内部变量$0，每一行也可称为一个记录，以换行符(RS)结束")])]),s._v(" "),a("li",[a("p",[s._v("每行被间隔符**==:==**(默认为空格或制表符)分解成字段(或域)，每个字段存储在已编号的变量中，从$1开始")]),s._v(" "),a("p",[s._v("问：awk如何知道用空格来分隔字段的呢？")]),s._v(" "),a("p",[s._v("答：因为有一个内部变量==FS==来确定字段分隔符。初始时，FS赋为空格")])]),s._v(" "),a("li",[a("p",[s._v("awk使用print函数打印字段，打印出来的字段会以==空格分隔==，因为$1,$3之间有一个逗号。逗号比较特殊，它映射为另一个内部变量，称为==输出字段分隔符==OFS，OFS默认为空格")])]),s._v(" "),a("li",[a("p",[s._v("awk处理完一行后，将从文件中获取另一行，并将其存储在$0中，覆盖原来的内容，然后将新的字符串分隔成字段并进行处理。该过程将持续到所有行处理完毕")])])]),s._v(" "),a("h4",{attrs:{id:"_4-awk变量定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-awk变量定义"}},[s._v("#")]),s._v(" 4. awk变量定义")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -v NUM=3 -F: '{ print $NUM }' /etc/passwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -v NUM=3 -F: '{ print NUM }' /etc/passwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -v num=1 'BEGIN{print num}' ")]),s._v("\n1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -v num=1 'BEGIN{print $num}' ")]),s._v("\n注意：\nawk中调用定义的变量不需要加$\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h4",{attrs:{id:"_5-awk中begin-end使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-awk中begin-end使用"}},[s._v("#")]),s._v(" 5. awk中BEGIN...END使用")]),s._v(" "),a("p",[s._v("​\t①==BEGIN==：表示在程序开始前执行")]),s._v(" "),a("p",[s._v("​\t②==END== ：表示所有文件处理完后执行")]),s._v(" "),a("p",[s._v("​\t③用法："),a("code",[s._v("'BEGIN{开始处理之前};{处理中};END{处理结束后}'")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("示例：")])])]),s._v(" "),a("ol",[a("li",[s._v("打印最后一列和倒数第二列（登录shell和家目录）")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("awk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'BEGIN{ print "Login_shell\\t\\tLogin_home\\n*******************"};{print $NF"\\t\\t"$(NF-1)};END{print "************************"}\'')]),s._v(" 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n\nawk "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'BEGIN{ FS=":";print "Login_shell\\tLogin_home\\n*******************"};{print $NF"\\t"$(NF-1)};END{print "************************"}\'')]),s._v(" 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n\nLogin_shell\t\tLogin_home\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("adm\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spool/lpd\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/redhat\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/user01\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("named\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/u01\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/YUNWEI\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("打印/etc/passwd里的用户名、家目录及登录shell")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("u_name      h_dir       shell\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'BEGIN{OFS="\\t\\t";print"u_name\\t\\th_dir\\t\\tshell\\n***************************"}{printf "%-20s %-20s %-20s\\n",$1,$(NF-1),$NF};END{print "****************************"}\'')]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# awk -F: \'BEGIN{print "u_name\\t\\th_dir\\t\\tshell" RS "*****************"}  {printf "%-15s %-20s %-20s\\n",$1,$(NF-1),$NF}END{print "***************************"}\'  /etc/passwd')]),s._v("\n\n格式化输出：\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("echo")]),s._v("\t\tprint\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n\tprintf\n\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("printf "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%-15s %-20s %-20s\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NF-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h4",{attrs:{id:"_6-awk和正则的综合运用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-awk和正则的综合运用"}},[s._v("#")]),s._v(" 6. awk和正则的综合运用")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("运算符")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("==")]),s._v(" "),a("td",[s._v("等于")])]),s._v(" "),a("tr",[a("td",[s._v("!=")]),s._v(" "),a("td",[s._v("不等于")])]),s._v(" "),a("tr",[a("td",[s._v(">")]),s._v(" "),a("td",[s._v("大于")])]),s._v(" "),a("tr",[a("td",[s._v("<")]),s._v(" "),a("td",[s._v("小于")])]),s._v(" "),a("tr",[a("td",[s._v(">=")]),s._v(" "),a("td",[s._v("大于等于")])]),s._v(" "),a("tr",[a("td",[s._v("<=")]),s._v(" "),a("td",[s._v("小于等于")])]),s._v(" "),a("tr",[a("td",[s._v("~")]),s._v(" "),a("td",[s._v("匹配")])]),s._v(" "),a("tr",[a("td",[s._v("!~")]),s._v(" "),a("td",[s._v("不匹配")])]),s._v(" "),a("tr",[a("td",[s._v("!")]),s._v(" "),a("td",[s._v("逻辑非")])]),s._v(" "),a("tr",[a("td",[s._v("&&")]),s._v(" "),a("td",[s._v("逻辑与")])]),s._v(" "),a("tr",[a("td",[s._v("||")]),s._v(" "),a("td",[s._v("逻辑或")])])])]),s._v(" "),a("ul",[a("li",[s._v("示例")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("从第一行开始匹配到以"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v("开头行\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR==1,/^lp/{print $0 }'")]),s._v(" passwd  \n从第一行到第5行          \nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR==1,NR==5{print $0 }'")]),s._v(" passwd\n从以"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v("开头的行匹配到第10行       \nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^lp/,NR==10{print $0 }'")]),s._v(" passwd \n从以root开头的行匹配到以"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v("开头的行       \nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^root/,/^lp/{print $0}'")]),s._v(" passwd\n打印以root开头或者以"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v("开头的行            \nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^root/ || /^lp/{print $0}'")]),s._v(" passwd\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^root/;/^lp/{print $0}'")]),s._v(" passwd\n显示5-10行   \nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR>=5 && NR<=10 {print $0}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd     \nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR<10 && NR>5 {print $0}'")]),s._v(" passwd \n\n打印30-39行以bash结尾的内容：\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou shell05]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'NR>=30 && NR<=39 && $0 ~ /bash$/{print $0}' passwd ")]),s._v("\nstu1:x:500:500::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/stu1:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nyunwei:x:501:501::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/yunwei:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nuser01:x:502:502::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/user01:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nuser02:x:503:503::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/user02:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nuser03:x:504:504::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home/user03:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\n\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'NR>=3 && NR<=8 && /bash$/' 1.txt  ")]),s._v("\nstu7:x:1007:1007::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhome/stu7:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nstu8:x:1008:1008::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhome/stu8:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\nstu9:x:1009:1009::"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhome/stu9:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash\n\n理解"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("号和"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("的含义：\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'NR>=3 && NR<=8 || /bash$/' 1.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@server shell07]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'NR>=3 && NR<=8;/bash$/' 1.txt")]),s._v("\n\n\n打印IP地址\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig eth0|awk 'NR>1 {print $2}'|awk -F':' 'NR<2 {print $2}'    ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig eth0|grep Bcast|awk -F':' '{print $2}'|awk '{print $1}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig eth0|grep Bcast|awk '{print $2}'|awk -F: '{print $2}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig eth0|awk NR==2|awk -F '[ :]+' '{print $4RS$6RS$8}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig eth0|awk \"-F[ :]+\" '/inet addr:/{print $4}'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br")])]),a("h4",{attrs:{id:"_7-课堂练习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-课堂练习"}},[s._v("#")]),s._v(" 7. 课堂练习")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("1、显示可以登录操作系统的用户所有信息     从第7列匹配以bash结尾，输出整行（当前行所有的列）\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou ~]")]),s._v(" awk "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/bash$/{print $0}'")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou ~]")]),s._v(" awk "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/bash$/{print $0}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou ~]")]),s._v(" awk "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/bash$/'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou ~]")]),s._v(" awk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$7 ~ /bash/'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou ~]")]),s._v(" awk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$NF ~ /bash/'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou ~]")]),s._v(" awk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$0 ~ /bash/'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou ~]")]),s._v(" awk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$0 ~ /\\/bin\\/bash/'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n\n2、显示可以登录系统的用户名 \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '$0 ~ /\\/bin\\/bash/{print $1}' /etc/passwd")]),s._v("\n3、打印出系统中普通用户的UID和用户名如下显示：\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# awk -F: \'BEGIN{print "UID\\tUSERNAME"} {if($3>=500 && $3 !=65534 ) {print $3"\\t"$1} }\' /etc/passwdUID\tUSERNAME')]),s._v("\n500\tstu1\n501\tyunwei\n502\tuser01\n503\tuser02\n504\tuser03\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{if($3 >= 500 && $3 != 65534) print $1,$3}' a.txt ")]),s._v("\nredhat 508\nuser01 509\nu01 510\nYUNWEI 511\n\n4、以数字开头\nawk "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^[0-9]/{print $0}'")]),s._v("   1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n5、以任意大小写字母开头\nawk "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^[a-Z]/{print $0}'")]),s._v(" 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("h4",{attrs:{id:"_8-awk的脚本编程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-awk的脚本编程"}},[s._v("#")]),s._v(" 8. awk的脚本编程")]),s._v(" "),a("h5",{attrs:{id:"_8-1-流程控制语句"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-流程控制语句"}},[s._v("#")]),s._v(" 8.1 流程控制语句")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v("语句：\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("then\nxxx\nfi\n\n格式：\nawk 选项 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'正则，地址定位{awk语句}'")]),s._v("  文件名\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("表达式"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("｛语句1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("语句2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("｝"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{if($3>=500 && $3<=60000) {print $1,$3} }'")]),s._v(" passwd\n\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[root@MissHou shell05]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{if($3==0) {print $1\"是管理员\"} }' passwd ")]),s._v("\nroot是管理员\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{if($(id -u)==0) {print \"admin\"} }'")]),s._v("\nadmin\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("语句:\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("then\n\txxxxx\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n\txxx\nfi\n\n\n格式：\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("表达式"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("｛语句"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("语句"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("｝"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("｛语句"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("语句"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{ if($3>=500 && $3 != 65534) {print $1"是普通用户"} else {print $1,"不是普通用户"}}\'')]),s._v(" passwd \n\nawk "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'BEGIN{if( $(id -u)>=500 && $(id -u) !=65534 ) {print "是普通用户"} else {print "不是普通用户"}}\'')]),s._v("\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[xxxx]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("then\n\txxxx\nelif "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[xxx]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("then\n\txxx\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nfi\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("语句：\n\n\n格式：\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("表达式1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("｛语句"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("语句；"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("｝"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("表达式2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("｛语句"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("语句；"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("｝"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("表达式3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("｛语句"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("语句；"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("｝"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("｛语句"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("语句；"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("｝"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{ if($3==0) {print $1,":是管理员"} else if($3>=1 && $3<=499 || $3==65534 ) {print $1,":是系统用户"} else {print $1,":是普通用户"}}\'')]),s._v("\n\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{ if($3==0) {i++} else if($3>=1 && $3<=499 || $3==65534 ) {j++} else {k++}};END{print "管理员个数为:"i "\\n系统用户个数为:"j"\\n普通用户的个数为:"k }\'')]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# awk -F: \'{if($3==0) {print $1,"is admin"} else if($3>=1 && $3<=499 || $3==65534) {print $1,"is sys users"} else {print $1,"is general user"} }\' a.txt ')]),s._v("\nroot is admin\nbin is sys users\ndaemon is sys users\nadm is sys users\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lp")]),s._v(" is sys users\nredhat is general user\nuser01 is general user\nnamed is sys users\nu01 is general user\nYUNWEI is general user\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{  if($3==0) {print $1":管理员"} else if($3>=1 && $3<500 || $3==65534 ) {print $1":是系统用户"} else {print $1":是普通用户"}}\'')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{if($3==0) {i++} else if($3>=1 && $3<500 || $3==65534){j++} else {k++}};END{print "管理员个数为:" i RS "系统用户个数为:"j RS "普通用户的个数为:"k }\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n管理员个数为:1\n系统用户个数为:28\n普通用户的个数为:27\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# awk -F: \'{ if($3==0) {print $1":是管理员"} else if($3>=500 && $3!=65534) {print $1":是普通用户"} else {print $1":是系统用户"}}\' passwd ')]),s._v("\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{if($3==0){i++} else if($3>=500){k++} else{j++}} END{print i; print k; print j}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd\n\nawk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{if($3==0){i++} else if($3>999){k++} else{j++}} END{print "管理员个数: "i; print "普通用个数: "k; print "系统用户: "j}\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd \n\n如果是普通用户打印默认shell，如果是系统用户打印用户名\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{if($3>=1 && $3<500 || $3 == 65534) {print $1} else if($3>=500 && $3<=60000 ) {print $NF} }' /etc/passwd")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br")])]),a("h5",{attrs:{id:"_8-2-循环语句"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-循环语句"}},[s._v("#")]),s._v(" 8.2 循环语句")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(":\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN { i=1; while(i<=10) {print i;i++} }'")]),s._v("\n\n文件里的每一行循环打印10次：\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{ i=1; while(i<=10) {print $0;i++} }' /etc/passwd")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(":\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN { for(i=1;i<=5;i++) {print i} }'")]),s._v("\n\n文件里的每一行循环打印10次：\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{ for(i=1;i<=10;i++) {print $0}}' /etc/passwd")]),s._v("\n\n\n打印1~5\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN { for(i=1;i<=5;i++) {print i} }'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN { i=1;while(i<=5) {print i;i++} }'")]),s._v("\n\n打印1~10中的奇数\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{i=1;while(i<=10) {print i;i+=2} }'")]),s._v("\n\nawk 选项 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{awk语句1 语句2 }'")]),s._v("\n\n计算1-5的和：\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN { for(i=1;i<=5;i++) {(sum+=i)};{print sum} }'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{for(i=1;i<=5;i++) (sum+=i);{print sum}}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{for(i=1;i<=5;i++) (sum+=i);print sum}'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN { i=1;while(i<=5) {(sum+=i) i++};print sum }'")]),s._v("\n\n\n打印1-10的奇数和\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i=1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("i<=10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("i+=2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("awk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v sum=0 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{sum+=$0};END{print sum}'")]),s._v("\n\n嵌套循环：\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y=1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("y<=5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("y+"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x=1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("x<="),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("x+"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$x")]),s._v("\n\tdone\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("echo")]),s._v("\ndone\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN { for(y=1;y<=5;y++) { for(x=1;x<=y;x++) {printf x};print} }'")]),s._v("\n1\n12\n123\n1234\n12345\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{ y=1;while(y<=5) { for(x=1;x<=y;x++) {printf x};y++;print}}'")]),s._v("\n1\n12\n123\n1234\n12345\n\n尝试用三种方法打印99口诀表：\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#awk \'BEGIN{for(y=1;y<=9;y++) { for(x=1;x<=y;x++) {printf x"*"y"="x*y"\\t"};print} }\'')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#awk \'BEGIN{for(y=1;y<=9;y++) { for(x=1;x<=y;x++) printf x"*"y"="x*y"\\t";print} }\'')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#awk \'BEGIN{i=1;while(i<=9){for(j=1;j<=i;j++) {printf j"*"i"="j*i"\\t"};print;i++ }}\'')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#awk \'BEGIN{for(i=1;i<=9;i++){j=1;while(j<=i) {printf j"*"i"="i*j"\\t";j++};print}}\'')]),s._v("\n\n循环的控制：\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),s._v("\t\t条件满足的时候中断循环\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("continue")]),s._v("\t条件满足的时候跳过循环\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{for(i=1;i<=5;i++) {if(i==3) break;print i} }'")]),s._v("\n1\n2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{for(i=1;i<=5;i++){if(i==3) continue;print i}}'")]),s._v("\n1\n2\n4\n5\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{i=1;while(i<=5){if(i==3) break;print i;i++}}'")]),s._v("\n1\n2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{i=0;while(i<5){i++;if(i==3) continue;print i}}'")]),s._v("\n1\n2\n4\n5\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br")])]),a("h5",{attrs:{id:"_8-3-算数运算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-算数运算"}},[s._v("#")]),s._v(" 8.3 算数运算")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("模"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ^"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("幂2^3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n可以在模式中执行计算，awk都将按浮点数方式执行算术运算\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{print 1+1}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{print 1**1}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{print 2**3}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk 'BEGIN{print 2/3}'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("###二. awk统计案例")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 统计"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/passwd 中各种类型shell的数量\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{ shells[$NF]++ };END{for (i in shells) {print i,shells[i]} }' /etc/passwd")]),s._v("\n\nbooks"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[linux]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\nbooks"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[linux]")]),s._v("=1\nshells"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\nshells"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash 5\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin 6\n\nshells"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin/bash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\t\t\ta\nshells"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/nologin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\t\tb\nshells"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin/shutdown"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\tc\n\nbooks"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[linux]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\nbooks"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[php]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\n\n2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 网站访问状态统计　<当前时实状态 netstat>\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -antp|grep 80|awk '{states[$1]++};END{for(i in states){print i,states[i]}}'")]),s._v("\nTIME_WAIT 578\nESTABLISHED 1\nLISTEN 1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -an |grep :80 |awk '{states[$2]++};END{for(i in states){print i,states[i]}}'")]),s._v("\nLISTEN 1\nESTAB 5\nTIME-WAIT 25\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -an |grep :80 |awk '{states[$2]++};END{for(i in states){print i,states[i]}}' |sort -k2 -rn")]),s._v("\nTIME-WAIT 18\nESTAB 8\nLISTEN 1\n\n3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 统计当前访问的每个IP的数量 <当前时实状态 netstat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ss>\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -ant |grep :80 |awk -F: '{ip_count[$8]++};END{for(i in ip_count){print i,ip_count[i]} }' |sort")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -an |grep :80 |awk -F\":\" '!/LISTEN/{ip_count[$(NF-1)]++} END{for(i in ip_count){print i,ip_count[i]}}' |sort -k2 -rn |head")]),s._v("\n\n\n4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 统计Apache/Nginx日志中某一天的PV量 　<统计日志>\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grep '27/Jul/2017' mysqladmin.cc-access_log |wc -l")]),s._v("\n14519\n\n5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 统计Apache/Nginx日志中某一天不同IP的访问量　<统计日志>\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grep '27/Jul/2017' mysqladmin.cc-access_log |awk '{ips[$1]++};END{for(i in ips){print i,ips[i]} }' |sort -k2 -rn |head")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grep '07/Aug/2017' access.log |awk '{ips[$1]++} END{for(i in ips){print i,ips[i]} }' |awk '$2>100' |sort -k2 -rn")]),s._v("\n\n名词引入：\n\n名词：VV = Visit View（访问次数）\n说明：从访客来到您网站到最终关闭网站的所有页面离开，计为1次访问。若访客连续30分钟没有新开和刷新页面，或者访客关闭了浏览器，则被计算为本次访问结束。\n\n独立访客（UV）\n名词：UV= Unique Visitor（独立访客数）\n说明：1天内相同的访客多次访问您的网站只计算1个UV。\n\n网站浏览量（PV）\n名词：PV=PageView "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("网站浏览量"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n说明：指页面的浏览次数，用以衡量网站用户访问的网页数量。多次打开同一页面则浏览量累计。用户每打开一个页面便记录1次PV。\n\n独立IP（IP）\n名词：IP=独立IP数\n说明：指1天内使用不同IP地址的用户访问网站的数量。同一IP无论访问了几个页面，独立IP数均为1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br")])]),a("p",[s._v("###三、课后作业")]),s._v(" "),a("p",[a("strong",[s._v("作业1：")]),s._v("\n1、写一个自动检测磁盘使用率的脚本，当磁盘使用空间达到90%以上时，需要发送邮件给相关人员\n2、写一个脚本监控系统内存和交换分区使用情况")]),s._v(" "),a("p",[a("strong",[s._v("作业2：")]),s._v("\n输入一个IP地址，使用脚本判断其合法性：\n必须符合ip地址规范，第1、4位不能以0开头，不能大于255不能小于0")]),s._v(" "),a("h3",{attrs:{id:"四、企业实战案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、企业实战案例"}},[s._v("#")]),s._v(" 四、企业实战案例")]),s._v(" "),a("h4",{attrs:{id:"_1-任务-背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-任务-背景"}},[s._v("#")]),s._v(" 1. 任务/背景")]),s._v(" "),a("p",[s._v("web服务器集群中总共有9台机器，上面部署的是Apache服务。由于业务不断增长，每天每台机器上都会产生大量的访问日志，现需要将每台web服务器上的apache访问日志"),a("strong",[s._v("保留最近3天")]),s._v("的，3天以前的日志"),a("strong",[s._v("转储")]),s._v("到一台专门的日志服务器上，已做后续分析。如何实现每台服务器上只保留3天以内的日志？")]),s._v(" "),a("h4",{attrs:{id:"_2-具体要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-具体要求"}},[s._v("#")]),s._v(" 2. 具体要求")]),s._v(" "),a("ol",[a("li",[s._v("每台web服务器的日志对应日志服务器相应的目录里。如：web1——>web1.log（在日志服务器上）")]),s._v(" "),a("li",[s._v("每台web服务器上保留最近3天的访问日志，3天以前的日志每天凌晨5:03分转储到日志服务器")]),s._v(" "),a("li",[s._v("如果脚本转储失败，运维人员需要通过跳板机的菜单选择手动清理日志")])]),s._v(" "),a("h4",{attrs:{id:"_3-涉及知识点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-涉及知识点"}},[s._v("#")]),s._v(" 3. 涉及知识点")]),s._v(" "),a("ol",[a("li",[s._v("shell的基本语法结构")]),s._v(" "),a("li",[s._v("文件同步rsync")]),s._v(" "),a("li",[s._v("文件查找命令find")]),s._v(" "),a("li",[s._v("计划任务crontab")]),s._v(" "),a("li",[s._v("apache日志切割")]),s._v(" "),a("li",[s._v("其他")])])])}),[],!1,null,null,null);a.default=r.exports}}]);