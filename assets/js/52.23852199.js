(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{947:function(s,a,t){"use strict";t.r(a);var n=t(6),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"实用的一句命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实用的一句命令"}},[s._v("#")]),s._v(" 实用的一句命令")]),s._v(" "),a("h2",{attrs:{id:"将10天以前的文件移入bak"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将10天以前的文件移入bak"}},[s._v("#")]),s._v(" 将10天以前的文件移入bak")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" log.bak \n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" -type f -mtime +10"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" log.bak \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"删除一个文件中某关键字所在的行-然后在这行插入新的文本。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除一个文件中某关键字所在的行-然后在这行插入新的文本。"}},[s._v("#")]),s._v(" 删除一个文件中某关键字所在的行，然后在这行插入新的文本。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^.*bee.*$/I am a boy/'")]),s._v(" yourfile "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" yourfile.tmp \n\n-e:直接执行命令 \n\ns:模式匹配后替换，将能匹配.*bee.*的行用I am a boy替换。 \n\n.匹配任意字符，*表示零个或多个，.*表示匹配任意多个任意字符 ^为行首，$为行尾 ^.*bee.*$匹配带关键字bee的行 \n\n只删除纯空行\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^\\s*$/d'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n\n删除纯空行和由空格组成的空行\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^[ ]*$/d'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"获取机器开机时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取机器开机时间"}},[s._v("#")]),s._v(" 获取机器开机时间")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" -d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F. "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1}'")]),s._v(" /proc/uptime"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' second ago"')]),s._v(" +"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%Y-%m-%d %H:%M:%S"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"shell中-d-和-n-是啥意思"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell中-d-和-n-是啥意思"}},[s._v("#")]),s._v(" shell中[! -d]和[! -n]是啥意思")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[ ! -n ] 判断变量如果不为空则条件成立\n[ ! -d ] 变量如果不是目录就成立\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"awk的使用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awk的使用方法"}},[s._v("#")]),s._v(" AWK的使用方法")]),s._v(" "),a("p",[s._v("格式：")]),s._v(" "),a("p",[s._v("awk 'BEGIN{};{};END{}'")]),s._v(" "),a("p",[s._v("awk 选项 '正则，地址定位{awk语句}' 文件名")]),s._v(" "),a("p",[s._v("流程控制语句")]),s._v(" "),a("p",[s._v("{if () {语句1；语句2；...}}")]),s._v(" "),a("p",[s._v("{if() {语句1,语句2，..} else {语句1，语句2} }")]),s._v(" "),a("p",[s._v("{if() {语句1,语句2，..} else if() {语句1,语句2，..} else if() {语句1,语句2，..} else {语句1,语句2，..}}")]),s._v(" "),a("p",[s._v("eg:")]),s._v(" "),a("p",[s._v("awk -F: '{if (条件)  {print XXX}}' 文件名")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN{for(i=1;i<=5;i++) {print i}}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN{i=1;while(i<=5) {print i;i++}}'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("什么时候{print i}之前要加分号?")])]),s._v(" "),a("p",[s._v("是不是做的一件事情。同一件事就不加。满足条件立马去做，不要加上分号，加上就是两件事了")]),s._v(" "),a("p",[a("strong",[s._v("i前面什么时候加上$.")])]),s._v(" "),a("p",[s._v("在花括号里就不加")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-4-13-centos shell_test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tail -1 access.log ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("180.101")]),s._v(".245.247 - - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("06/Nov/2022:11:44:31 +0800"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GET /sockjs-node/651/k3rh4iw3/jsonp?c=_jp.amhfmb5 HTTP/1.1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://42.192.17.127/"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python-requests/2.26.0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"42.192.17.127"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-4-13-centos shell_test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk '{ips[$1]++};END{for (i in ips) print i,ips[i]}' access.log ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("180.101")]),s._v(".245.250 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59.83")]),s._v(".208.103 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("180.101")]),s._v(".245.246 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("220.196")]),s._v(".160.73 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("180.101")]),s._v(".245.247 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("220.196")]),s._v(".160.83 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("220.196")]),s._v(".160.151 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("220.196")]),s._v(".160.124 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59.83")]),s._v(".208.108 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("220.196")]),s._v(".160.76 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("如何理解")]),s._v(" "),a("p",[s._v("ips[$1]++：取的每行第一个数字，定义了一个ips数组，索引下标为每行第一个字符串，每次处理一个加一。")]),s._v(" "),a("p",[s._v("i in ips：这里取的就是索引下标")]),s._v(" "),a("p",[s._v("ips[i]:有几个元素")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("awk -v什么意思")])]),s._v(" "),a("p",[s._v("-v一般是用来把shell环境里的变量传进awk")]),s._v(" "),a("h2",{attrs:{id:"set-e与set-e"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-e与set-e"}},[s._v("#")]),s._v(" set -e与set +e")]),s._v(" "),a("p",[s._v("set -e 脚本中后续所有bash命令返回code不是0，脚本立即退出")]),s._v(" "),a("p",[s._v("set +e 后续shell中返回值不是0，也继续执行")]),s._v(" "),a("h2",{attrs:{id:"与"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#与"}},[s._v("#")]),s._v(" ||与&&")]),s._v(" "),a("p",[s._v("|| 左边执行成功，就不执行右边")]),s._v(" "),a("p",[s._v("&&左边执行成功，才执行右边")]),s._v(" "),a("h2",{attrs:{id:"xshell日志记录功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xshell日志记录功能"}},[s._v("#")]),s._v(" Xshell日志记录功能")]),s._v(" "),a("p",[s._v("打开xshell--》文件--\x3e日志--\x3e启动")])])}),[],!1,null,null,null);a.default=e.exports}}]);