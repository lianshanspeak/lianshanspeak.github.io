(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{987:function(s,a,t){"use strict";t.r(a);var r=t(6),v=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mysql技术内幕innodb存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql技术内幕innodb存储引擎"}},[s._v("#")]),s._v(" Mysql技术内幕InnoDB存储引擎")]),s._v(" "),a("h2",{attrs:{id:"第一章-mysql体系结构和存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一章-mysql体系结构和存储引擎"}},[s._v("#")]),s._v(" 第一章 mysql体系结构和存储引擎")]),s._v(" "),a("p",[s._v("知识点1、理解数据库和实例")]),s._v(" "),a("p",[s._v("数据库：文件的集合，在mysql中可以是frm,MYD,MYI")]),s._v(" "),a("p",[s._v("实例：数据库实例在系统上的表现是一个进程。通过数据库实例，来对数据库进行操作")]),s._v(" "),a("p",[s._v("知识点2、读取文件配置顺序")]),s._v(" "),a("p",[s._v("在mysql中启动的时候没有配置文件时，会按照默认参数启动实例")]),s._v(" "),a("p",[s._v("/etc/my.cnf--\x3e/etc/mysql/my.cnf--\x3e/usr/local/mysql/etc/my.cnf--\x3e/.my.cnf;以读取到最后一个参数配置文件为准")]),s._v(" "),a("h3",{attrs:{id:"mysql由哪几部分组成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql由哪几部分组成"}},[s._v("#")]),s._v(" mysql由哪几部分组成")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("[ ] 连接池组件")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 管理服务和工作组件")])]),s._v(" "),a("li",[a("p",[s._v("[ ] sql接口组件")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 查询分析器组件")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 优化器组件")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 缓冲器组件")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 插件式存储引擎")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 物理文件")])])]),s._v(" "),a("h3",{attrs:{id:"存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#存储引擎"}},[s._v("#")]),s._v(" 存储引擎")]),s._v(" "),a("p",[s._v("可以根据不同的应用建立不同的存储引擎表")]),s._v(" "),a("h4",{attrs:{id:"innodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#innodb"}},[s._v("#")]),s._v(" innodb")]),s._v(" "),a("p",[s._v("特点：支持事务，主要面向OLTP（在线事务处理）,行锁设计，支持外键，默认读取不会产生锁")]),s._v(" "),a("p",[s._v("如何工作：")]),s._v(" "),a("p",[s._v("将数据放在一个逻辑的表空间（idb）中，通过MVCC来获得高并发性，实现sql的四种标准隔离，默认为"),a("strong",[s._v("repeatable")]),s._v("，同时使用"),a("strong",[s._v("next-keylocking")]),s._v("策略来避免"),a("strong",[s._v("幻读")])]),s._v(" "),a("p",[s._v("提供以下常见功能")]),s._v(" "),a("p",[a("strong",[s._v("插入缓存")])]),s._v(" "),a("p",[a("strong",[s._v("二次写")])]),s._v(" "),a("p",[a("strong",[s._v("自适应哈希索引")])]),s._v(" "),a("p",[a("strong",[s._v("预读功能")])]),s._v(" "),a("p",[s._v("对于表中的数据存储采用聚集（clustered）的方式,按主键的顺序进行存放，没有设置主键，每行生成一个6字节的rowid作为主键")]),s._v(" "),a("h4",{attrs:{id:"myisam"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#myisam"}},[s._v("#")]),s._v(" Myisam")]),s._v(" "),a("p",[s._v("面向OLAP应用，不支持事务，缓冲池只缓存索引文件，不缓存数据文件。")]),s._v(" "),a("p",[s._v("如何工作：")]),s._v(" "),a("p",[s._v("由MYD（存放数据文件）和MYI（存放索引文件）组成。")]),s._v(" "),a("h4",{attrs:{id:"ndb存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ndb存储引擎"}},[s._v("#")]),s._v(" NDB存储引擎")]),s._v(" "),a("p",[a("strong",[s._v("集群存储引擎")]),s._v("数据全部存放在内存中，，主键查找的速度快，通过添加NDB数据存储节点可以线性提高性能。")]),s._v(" "),a("p",[a("strong",[s._v("注意")]),s._v("：NDB存储引擎的连接操作join，实是在数据库层完成的，不是在存储引擎层。复杂的连接操作会带来大的网络开销。导致查询速度慢。")]),s._v(" "),a("h4",{attrs:{id:"memory存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#memory存储引擎"}},[s._v("#")]),s._v(" Memory存储引擎")]),s._v(" "),a("p",[s._v("将表中的数据存放在内存中，数据库重启或者崩溃，会导致数据表消失。常适用于临时数据的临时表默认使用"),a("strong",[s._v("哈希索引")])]),s._v(" "),a("p",[s._v("存储引擎非常快，只支持表锁，并发性能差，不支持TEXT和BOLOB列类型。")]),s._v(" "),a("h4",{attrs:{id:"archive存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#archive存储引擎"}},[s._v("#")]),s._v(" Archive存储引擎")]),s._v(" "),a("p",[s._v("只支持insert和select操作，支持索引，使用zlib对数据行进行压缩，压缩比1:10")]),s._v(" "),a("p",[s._v("试用场景:归档数据，日志信息，使用行锁来实现高并发插入。")]),s._v(" "),a("h4",{attrs:{id:"maria存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maria存储引擎"}},[s._v("#")]),s._v(" Maria存储引擎")]),s._v(" "),a("p",[s._v("取代MyISAM存储引擎，支持缓存数据和索引文件，支持MVCC，支持事务")]),s._v(" "),a("h3",{attrs:{id:"连接数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接数据库"}},[s._v("#")]),s._v(" 连接数据库")]),s._v(" "),a("p",[s._v("连接操作是一个连接进程和mysql实例进行通信")]),s._v(" "),a("p",[s._v("常有的进程通信方式：管道，命名管道，命名名字，TCP/IP套接字")]),s._v(" "),a("h4",{attrs:{id:"tcp-ip连接方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcp-ip连接方式"}},[s._v("#")]),s._v(" TCP/IP连接方式")]),s._v(" "),a("p",[s._v("连接过程：通过TCP/IP连接到数据库时候，数据库会先检查权限视图，判断发起的IP是否允许连接，该视图为user表")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"命名管道和共享内存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名管道和共享内存"}},[s._v("#")]),s._v(" 命名管道和共享内存")]),s._v(" "),a("p",[s._v("命名管道mysql必须启用--enable-named-pipe选项")]),s._v(" "),a("p",[s._v("共享内存连接方式必须启用--protocol-memory实现")]),s._v(" "),a("h4",{attrs:{id:"unix套接字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unix套接字"}},[s._v("#")]),s._v(" UNIX套接字")]),s._v(" "),a("p",[s._v("用户在配置文件中执行套接字路径：如 --socket=/tmp/mysql.sock")]),s._v(" "),a("p",[s._v("可以使用以下命令来查找套接字")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'socket'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("套接字登录方式")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql -u用户名 -S 套接字位置\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"第二章innodb存储引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二章innodb存储引擎"}},[s._v("#")]),s._v(" 第二章InnoDB存储引擎")])])}),[],!1,null,null,null);a.default=v.exports}}]);