(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1003:function(s,n,a){"use strict";a.r(n);var e=a(6),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"_1-背景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-背景"}},[s._v("#")]),s._v(" 1.背景")]),s._v(" "),n("p",[s._v("之后慢慢补充")]),s._v(" "),n("p",[n("img",{attrs:{src:a(497),alt:"image-20221221202252325"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(498),alt:"image-20221221202306498"}})]),s._v(" "),n("p",[s._v("工程详细简介")]),s._v(" "),n("p",[s._v("https://www.imooc.com/article/47506")]),s._v(" "),n("h2",{attrs:{id:"_2-让项目跑起来"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-让项目跑起来"}},[s._v("#")]),s._v(" 2.让项目跑起来")]),s._v(" "),n("p",[s._v("基础环境需要安装")]),s._v(" "),n("p",[s._v("python2.7+pip")]),s._v(" "),n("p",[s._v("之后导入项目文件，在项目文件下执行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/imoocc_online$ pip install -r requirements.txt \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("效果如下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/imoocc_online$ pip install -r requirements.txt \nCollecting Django==1.8.2 (from -r requirements.txt (line 1))\n  Downloading https://files.pythonhosted.org/packages/4e/9d/2a1835ccbf8e1f0d6755d0e938ffd855f23886d055a7a18cc00a5224a99b/Django-1.8.2-py2.py3-none-any.whl (6.2MB)\n    100% |████████████████████████████████| 6.2MB 255kB/s \nCollecting ansible==2.4.1.0 (from -r requirements.txt (line 2))\n。。。。。。。\nCollecting diff-match-patch==20121119 (from -r requirements.txt (line 12))\n  Downloading https://files.pythonhosted.org/packages/22/82/46eaeab04805b4fac17630b59f30c4f2c8860988bc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("这里安装包出现了问题有报错")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('    Traceback (most recent call last):\n      File "<string>", line 1, in <module>\n      File "setuptools/__init__.py", line 8, in <module>\n        import _distutils_hack.override  # noqa: F401\n      File "_distutils_hack/__init__.py", line 194\n        f\'spec_for_{name}\',\n                         ^\n    SyntaxError: invalid syntax\n    \n    ----------------------------------------\nCommand "python setup.py egg_info" failed with error code 1 in /tmp/pip-build-yVZXKB/setuptools/\nYou are using pip version 8.1.1, however version 22.3.1 is available.\nYou should consider upgrading via the \'pip install --upgrade pip\' command.\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("解决方法：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("wget https://bootstrap.pypa.io/pip/2.7/get-pip.py\npython get-pip.py\npip install --upgrade setuptools\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("安装数据库,安装mysql的时候注意输入密码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt install mysql-server\nsudo apt install redis-server -y\nsudo apt install mongodb -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:a(499),alt:"image-20221221204615324"}})]),s._v(" "),n("p",[s._v("模拟连接mysql,mongodb,redis")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#启动mysql\n/etc/init.d/mysql start\nly@ly:/mnt/hgfs/ros_share/imoocc_online$ /etc/init.d/mysql start\n[....] Starting mysql (via systemctl): mysql.service==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ===\nAuthentication is required to start 'mysql.service'.\nAuthenticating as: ly,,, (ly)\nPassword: \n==== AUTHENTICATION COMPLETE ===\n. ok \nly@ly:/mnt/hgfs/ros_share/imoocc_online$ /etc/init.d/mysql status\n● mysql.service - MySQL Community Server\n   Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled)\n   Active: active (running) since 三 2022-12-21 21:08:58 CST; 2min 39s ago\n Main PID: 65383 (mysqld)\n   CGroup: /system.slice/mysql.service\n           └─65383 /usr/sbin/mysqld\n\n12月 21 21:08:57 ly systemd[1]: Starting MySQL Community Server...\n12月 21 21:08:58 ly systemd[1]: Started MySQL Community Server.\n12月 21 21:11:30 ly systemd[1]: Started MySQL Community Server.\n\n#连接mysql\nly@ly:/mnt/hgfs/ros_share/imoocc_online$ mysql -uroot -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 4\nServer version: 5.7.33-0ubuntu0.16.04.1 (Ubuntu)\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql>  \n\n#启动mongo\nly@ly:/mnt/hgfs/ros_share/imoocc_online$ /etc/init.d/mongodb start\n\n#修改mongo的监听端口\nvim /etc/mongodb.cong\nbind_ip = 127.0.0.1改为0.0.0.0\n目的是为了让别的可以访问到，修改参数之后需要重启mongo\n/etc/init.d/mongodb restart\n\n#同理修改redis-server的bind.防止程序无法连接\nbind 127.0.0.1\n改为\nbind  0.0.0.0\n重启redis\nsudo /etc/init.d/redis-server restart\n登录连接测试\nly@ly:/mnt/hgfs/ros_share/imoocc_online$ redis-cli \n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br")])]),n("p",[s._v("进入文件，里面有mysql配置数据库的连接信息，需要在数据上新建库，用户和对应的密码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/imoocc_online$ sudo vim admin/settings/settings.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:a(500),alt:"image-20221221212801743"}})]),s._v(" "),n("p",[s._v("先修改MySQL的字符集,添加以下代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/mysql/my.cnf\n[client]\ndefault-character-set=utf8\n\n[mysqld]\ncharacter-set-server=utf8\ncollation-server=utf8_general_ci\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("改完之后重启mysql")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/imoocc_online$ sudo /etc/init.d/mysql restart\n#进入数据库\nly@ly:/mnt/hgfs/ros_share/imoocc_online$ sudo mysql -uroot -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 3\nServer version: 5.7.33-0ubuntu0.16.04.1 (Ubuntu)\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> create database imoocc;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> grant all on imoocc.* to imoocc@'127.0.0.1' identified by '123456';\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\nmysql> flush privileges;\nQuery OK, 0 rows affected (0.00 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("django的工程导入表，迁移命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/imoocc_online$ python ./manage.py makemigrations\nMigrations for 'detail':\n  0002_auto_20221221_2143.py:\n    - Alter field datatime on statisticsrecord\nly@ly:/mnt/hgfs/ros_share/imoocc_online$ \n#再次执行migrate就会连接数据库建立表格了\nly@ly:/mnt/hgfs/ros_share/imoocc_online$ python ./manage.py migrate\nOperations to perform:\n  Synchronize unmigrated apps: staticfiles, django_crontab, messages, crispy_forms\n  Apply all migrations: operations, users, sessions, admin, scanhosts, detail, auth, contenttypes\nSynchronizing apps without migrations:\n  Creating tables...\n    Running deferred SQL...\n  Installing custom SQL...\nRunning migrations:\n  Rendering model states... DONE\n  Applying contenttypes.0001_initial... OK\n  Applying auth.0001_initial... OK\n  Applying admin.0001_initial... OK\n  Applying contenttypes.0002_remove_content_type_name... OK\n  Applying auth.0002_alter_permission_name_max_length... OK\n  Applying auth.0003_alter_user_email_max_length... OK\n  Applying auth.0004_alter_user_username_opts... OK\n  Applying auth.0005_alter_user_last_login_null... OK\n  Applying auth.0006_require_contenttypes_0002... OK\n  Applying detail.0001_initial... OK\n  Applying detail.0002_auto_20221221_2143... OK\n  Applying operations.0001_initial... OK\n  Applying scanhosts.0001_initial... OK\n  Applying sessions.0001_initial... OK\n  Applying users.0001_initial... OK\nly@ly:/mnt/hgfs/ros_share/imoocc_online$ \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("p",[s._v("使用生成的账号测试能否成功连接")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/imoocc_online$ mysql -uimoocc -p -h127.0.0.1\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 11\nServer version: 5.7.33-0ubuntu0.16.04.1 (Ubuntu)\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> use imoocc\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nmysql> show tables;\n+----------------------------+\n| Tables_in_imoocc           |\n+----------------------------+\n| auth_group                 |\n| auth_group_permissions     |\n| auth_permission            |\n| auth_user                  |\n| auth_user_groups           |\n| auth_user_user_permissions |\n| cabinetinfo                |\n| connectioninfo             |\n| django_admin_log           |\n| django_content_type        |\n| django_migrations          |\n| django_session             |\n| hostloginifo               |\n| machineoperationsinfo      |\n| netconnectioninfo          |\n| networkinfo                |\n| othermachineinfo           |\n| physicalserverinfo         |\n| statisticsrecord           |\n| userinfo                   |\n| virtualserverinfo          |\n+----------------------------+\n21 rows in set (0.01 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br")])]),n("p",[s._v("可以看到表格已经建立")]),s._v(" "),n("h3",{attrs:{id:"_2-1使工程运行起来"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1使工程运行起来"}},[s._v("#")]),s._v(" 2.1使工程运行起来")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/imoocc_online$ python ./manage.py runserver 0.0.0.0:8000\nPerforming system checks...\n\nSystem check identified no issues (0 silenced).\nDecember 21, 2022 - 21:49:48\nDjango version 1.8.2, using settings 'admin.settings.settings'\nStarting development server at http://0.0.0.0:8000/\nQuit the server with CONTROL-C.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("在浏览器输入对应ip和端口就能访问对应工程了")]),s._v(" "),n("h2",{attrs:{id:"_3-在win上设置环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-在win上设置环境"}},[s._v("#")]),s._v(" 3.在win上设置环境")]),s._v(" "),n("p",[s._v("设置python2的环境")]),s._v(" "),n("p",[n("img",{attrs:{src:a(501),alt:"image-20221221221002549"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Collecting Django==1.8.2\n  Using cached Django-1.8.2-py2.py3-none-any.whl (6.2 MB)\nCollecting ansible==2.4.1.0\n  Using cached ansible-2.4.1.0.tar.gz (6.7 MB)\nERROR: Could not install packages due to an EnvironmentError: [Error 206] : 'c:\\\\users\\\\47361\\\\appdata\\\\local\\\\temp\\\\pip-install-ghhf__\\\\ansible\\\\test/integration/targets/copy/files/subdir/subdir1/circles/subdir1/circles/subdir1/cir\ncles/subdir1/circles/subdir1/circles/subdir1/circles/subdir1/circles/subdir1/circles/subdir2/subdir3/'\n安装有报错暂时不解决了。ubantu上面可以操作的\n跳过ansible安装，别的都可以安装，但是到最后面还有报错因为没有装的又mysql。ubantu环境上啥都有了，就把win当作编辑器就好了。在ubantu上运行\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_4-django的工程目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-django的工程目录结构"}},[s._v("#")]),s._v(" 4.django的工程目录结构")]),s._v(" "),n("p",[s._v("apps前端相关代码")]),s._v(" "),n("p",[s._v("detail机器详细信息相关的")]),s._v(" "),n("p",[s._v("operations机器操作相关的")]),s._v(" "),n("p",[s._v("reports机器报告相关的")]),s._v(" "),n("p",[s._v("user用户相关")]),s._v(" "),n("p",[s._v("修改models的时候会涉及到在detail的models，涉及数据库表格定义相关")]),s._v(" "),n("p",[s._v("conf自动化扫描配置文件，自动化执行的配置文件，主机的配置文件")]),s._v(" "),n("p",[s._v("extar_apps，ansible的相关模块放里面")]),s._v(" "),n("p",[s._v("logs存放日志")]),s._v(" "),n("p",[s._v("scanhosts自动化任务扫描")]),s._v(" "),n("p",[s._v("taskdo自动化任务执行")]),s._v(" "),n("p",[s._v("templates：django框架里面")]),s._v(" "),n("h2",{attrs:{id:"_5-python基础"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-python基础"}},[s._v("#")]),s._v(" 5.python基础")]),s._v(" "),n("p",[n("img",{attrs:{src:a(502),alt:"image-20221221225458597"}})]),s._v(" "),n("p",[s._v("ipython交互解释器")]),s._v(" "),n("p",[s._v("安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:~$ sudo pip install ipython\nly@ly:~$ ipython\nPython 2.7.12 (default, Mar  1 2021, 11:38:31) \nType \"copyright\", \"credits\" or \"license\" for more information.\n\nIPython 5.5.0 -- An enhanced Interactive Python.\n?         -> Introduction and overview of IPython's features.\n%quickref -> Quick reference.\nhelp      -> Python's own help system.\nobject?   -> Details about 'object', use 'object??' for extra details.\n\nIn [1]:      \n#找到历史出入信息\nctrl+r可以多次按\n？ aa 会输出aa的详细信息,？？两个问号更详细\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("python的[]元组类型不可变")]),s._v(" "),n("p",[s._v("{}字典类型，键值对的关系")]),s._v(" "),n("p",[n("img",{attrs:{src:a(503),alt:"image-20221221230759095"}})]),s._v(" "),n("p",[s._v("匿名函数")]),s._v(" "),n("p",[n("img",{attrs:{src:a(504),alt:"image-20221221231027468"}})]),s._v(" "),n("p",[s._v("正则表达式")]),s._v(" "),n("p",[s._v("需要提取的内容加上（）")]),s._v(" "),n("p",[n("img",{attrs:{src:a(505),alt:"image-20221221231348733"}})]),s._v(" "),n("p",[s._v("装饰器")]),s._v(" "),n("p",[s._v("**"),n("img",{attrs:{src:a(506),alt:"image-20221221231449723"}}),s._v("**这里是增加一个日志记录的功能，foo想要日志记录的功能直接加@就行了")]),s._v(" "),n("p",[n("img",{attrs:{src:a(507),alt:"image-20221221231548451"}})]),s._v(" "),n("p",[s._v("面向对象编程，类里面需要有哪些方法")]),s._v(" "),n("p",[n("img",{attrs:{src:a(508),alt:"image-20221221231753672"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(509),alt:"image-20221221232001338"}})]),s._v(" "),n("h2",{attrs:{id:"_6-django入门"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-django入门"}},[s._v("#")]),s._v(" 6.django入门")]),s._v(" "),n("p",[n("img",{attrs:{src:a(510),alt:"image-20221221232056419"}})]),s._v(" "),n("p",[s._v("一个容器项目下面有多个应用项目")]),s._v(" "),n("p",[n("img",{attrs:{src:a(511),alt:"image-20221221232307642"}})]),s._v(" "),n("p",[s._v("django安装的位置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:~$ pip install Django==1.8.2\nDEPRECATION: Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 is no longer maintained. pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support pip 21.0 will remove support for this functionality.\nDefaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: Django==1.8.2 in ./.local/lib/python2.7/site-packages (1.8.2)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:~$ whereis django-admin \ndjango-admin: /home/ly/.local/bin/django-admin.pyc /home/ly/.local/bin/django-admin /home/ly/.local/bin/django-admin.py\nly@ly:~$ \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("新建django工程")]),s._v(" "),n("p",[s._v("新建mydevops工程和scanhosts应用")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share$ django-admin startproject mydevops\nly@ly:/mnt/hgfs/ros_share$ ls\nimoocc_online  mydevops  setuptools-28.8.0.zip\nly@ly:/mnt/hgfs/ros_share$ cd mydevops/\nly@ly:/mnt/hgfs/ros_share/mydevops$ ls\nmanage.py  mydevops\nly@ly:/mnt/hgfs/ros_share/mydevops$ python ./manage.py startapp scanhosts\nly@ly:/mnt/hgfs/ros_share/mydevops$ ls\nmanage.py  mydevops  scanhosts\nly@ly:/mnt/hgfs/ros_share/mydevops$ \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("img",{attrs:{src:a(512),alt:"image-20221221233044149"}})]),s._v(" "),n("p",[s._v("urls.py进行对应路由的")]),s._v(" "),n("p",[s._v("setting.py配置")]),s._v(" "),n("p",[s._v("建立scanhosts应用")]),s._v(" "),n("p",[n("img",{attrs:{src:a(513),alt:"image-20221221233242784"}})]),s._v(" "),n("p",[s._v("views.py逻辑处理文件")]),s._v(" "),n("p",[n("img",{attrs:{src:a(514),alt:"image-20221222212320796"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(515),alt:"image-20221222212408035"}})]),s._v(" "),n("p",[s._v("django启动方式")]),s._v(" "),n("p",[s._v("这样启动可以在PC机器上访问")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/mydevops$ python manage.py runserver 0.0.0.0:8000\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:a(516),alt:"image-20221222212720923"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(517),alt:"image-20221224094835527"}})]),s._v(" "),n("p",[s._v("对于新建的应用，需要被工程使用，在setting.py中配置。这里是scanhosts。启用这个工程")]),s._v(" "),n("p",[n("img",{attrs:{src:a(518),alt:"image-20221222213202876"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(519),alt:"image-20221224095102525"}})]),s._v(" "),n("p",[s._v("在setting.py中还需要配置数据库连接，init_command初始化命令")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("DATABASES "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ENGINE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.db.backends.mysql'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NAME'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mydevops'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'USER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'PASSWORD'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysqlpass'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HOST'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'PORT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'OPTIONS'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'init_command'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET storage_engine=INNODB,'")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED, autocommit=1, names \"utf8\";'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[n("img",{attrs:{src:a(520),alt:"image-20221222224028370"}})]),s._v(" "),n("p",[s._v("设计好model类型")]),s._v(" "),n("p",[s._v("ip,name字段名字")]),s._v(" "),n("p",[s._v("db_table表格的名字")]),s._v(" "),n("p",[s._v("orm对象关系映射，对modle模型进行操作，不用直接对数据库进行操作")]),s._v(" "),n("p",[n("img",{attrs:{src:a(521),alt:"image-20221222224147500"}})]),s._v(" "),n("p",[s._v("根据这个方式定义好模型")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# -*- coding:utf-8 -*-\nfrom django.db import models\n\n# Create your models here.\nclass UserIPinfo(models.Model):\n    ip = models.CharField(max_length=40, default='', verbose_name=u'ip地址', null=True)\n    time = models.DateTimeField(verbose_name=u\"更新时间\", auto_now=True)\n\n    class Meta:\n        verbose_name = u'用户访问地址信息表'\n        verbose_name_plural = verbose_name\n        db_table = \"userinfo\"\n\nclass BrowseInfo(models.Model):\n    useragent = models.CharField(max_length=100, default='', verbose_name=u'用户浏览器agent信息', null=True)\n    models.CharField(max_length=256, verbose_name=u\"唯一设备ID\", default=\"\")\n\n    userip = models.ForeignKey('UserIPInfo')\n\n    class Meta:\n        verbose_name = u'用户浏览器信息'\n        verbose_name_plural = verbose_name\n        db_table = \"browseinfo\"\n        \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[n("img",{attrs:{src:a(522),alt:"image-20221222224717201"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#class Meta内容的信息详解\nverbose_name:指定数据库名称展示为这个值，不指定的话会默认为模型类的名称这里就【应用名字_UserInfo】\nverbose_name_pural: 取中文名字，可读性，便于识别\ndb_table:在数据库中的表名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("模型建立好之后，在数据库中建立对应的库,用户和做好相关授权")]),s._v(" "),n("p",[s._v("create database mydevops;")]),s._v(" "),n("p",[s._v("grant all on mydevops.* to admin@'127.0.0.1' identified by 'mysqlpass';")]),s._v(" "),n("p",[s._v("flush privileges;")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql> create database mydevops;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> grant all on mydevops.* to admin@'127.0.0.1' identified by 'mysqlpass';\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\nmysql> flush privileges;\nQuery OK, 0 rows affected (0.00 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("在终端模拟测试登录admin")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/mydevops$ mysql -uadmin -h127.0.0.1 -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 21\nServer version: 5.7.33-0ubuntu0.16.04.1 (Ubuntu)\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[n("img",{attrs:{src:a(523),alt:"image-20221222225159903"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(524),alt:"image-20221222225213322"}})]),s._v(" "),n("p",[s._v("python2在有中文的时候需要在最开始配置utf-8,不然会有编码错误")]),s._v(" "),n("p",[n("img",{attrs:{src:a(525),alt:"image-20221222225323903"}})]),s._v(" "),n("p",[s._v("建立模型")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/mydevops$ python manage.py makemigrations\nMigrations for 'scanhosts':\n  0001_initial.py:\n    - Create model BrowseInfo\n    - Create model UserIPInfo\n    - Add field userip to browseinfo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[n("img",{attrs:{src:a(526),alt:"image-20221222225416713"}})]),s._v(" "),n("p",[s._v("把迁移文件转化为sql文件到数据库")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ly@ly:/mnt/hgfs/ros_share/mydevops$ python manage.py migrate\nOperations to perform:\n  Synchronize unmigrated apps: staticfiles, messages\n  Apply all migrations: admin, scanhosts, contenttypes, auth, sessions\nSynchronizing apps without migrations:\n  Creating tables...\n    Running deferred SQL...\n  Installing custom SQL...\nRunning migrations:\n  Rendering model states... DONE\n  Applying contenttypes.0001_initial... OK\n  Applying auth.0001_initial... OK\n  Applying admin.0001_initial... OK\n  Applying contenttypes.0002_remove_content_type_name... OK\n  Applying auth.0002_alter_permission_name_max_length... OK\n  Applying auth.0003_alter_user_email_max_length... OK\n  Applying auth.0004_alter_user_username_opts... OK\n  Applying auth.0005_alter_user_last_login_null... OK\n  Applying auth.0006_require_contenttypes_0002... OK\n  Applying scanhosts.0001_initial... OK\n  Applying sessions.0001_initial... OK\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[n("img",{attrs:{src:a(527),alt:"image-20221222225508562"}})]),s._v(" "),n("p",[s._v("具体查看表")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql> use mydevops;\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nmysql> show tables;\n+----------------------------+\n| Tables_in_mydevops         |\n+----------------------------+\n| auth_group                 |\n| auth_group_permissions     |\n| auth_permission            |\n| auth_user                  |\n| auth_user_groups           |\n| auth_user_user_permissions |\n| browseinfo                 |\n| django_admin_log           |\n| django_content_type        |\n| django_migrations          |\n| django_session             |\n| userinfo                   |\n+----------------------------+\n12 rows in set (0.00 sec)\n\nmysql> desc userinfo;\n+-------+-------------+------+-----+---------+----------------+\n| Field | Type        | Null | Key | Default | Extra          |\n+-------+-------------+------+-----+---------+----------------+\n| id    | int(11)     | NO   | PRI | NULL    | auto_increment |\n| ip    | varchar(40) | YES  |     | NULL    |                |\n| time  | datetime(6) | NO   |     | NULL    |                |\n+-------+-------------+------+-----+---------+----------------+\n3 rows in set (0.00 sec)\n\nmysql> desc browseinfo;\n+-----------+--------------+------+-----+---------+----------------+\n| Field     | Type         | Null | Key | Default | Extra          |\n+-----------+--------------+------+-----+---------+----------------+\n| id        | int(11)      | NO   | PRI | NULL    | auto_increment |\n| useragent | varchar(100) | YES  |     | NULL    |                |\n| userip_id | int(11)      | NO   | MUL | NULL    |                |\n+-----------+--------------+------+-----+---------+----------------+\n3 rows in set (0.00 sec)\n\nmysql> \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br")])]),n("p",[n("img",{attrs:{src:a(528),alt:"image-20221222225607633"}})]),s._v(" "),n("h2",{attrs:{id:"_7-工程设计"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-工程设计"}},[s._v("#")]),s._v(" 7.工程设计")]),s._v(" "),n("p",[n("img",{attrs:{src:a(529),alt:"image-20221222225740315"}})]),s._v(" "),n("p",[s._v("use_info方法")]),s._v(" "),n("p",[n("img",{attrs:{src:a(530),alt:"image-20221222225818356"}})]),s._v(" "),n("p",[s._v("views相关代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('from django.shortcuts import render\nfrom django.http import JsonResponse, HttpResponse\nfrom models import *\nimport json\n\n# Create your views here.\n\ndef user_info(request):\n  ip_addr = request.META[\'REMOTE_ADDR\']\n  user_ua = request.META[\'HTTP_USER_AGENT\']\n\n  user_obj = UserIPinfo.objects.filter(ip = ip_addr)\n  if not user_obj:\n    res = UserIPinfo.objects.create(ip = ip_addr)\n    # print res.__dict__\n    ip_add_id = res.id\n  else:\n    ip_add_id = user_obj[0].id\n\n  BrowseInfo.objects.create(useragent = user_ua, userip_id = ip_add_id )\n\n  result = {"STATUS": "success",\n            "INFO": "User info",\n            "IP": ip_addr,\n            "UA": user_ua}\n  return HttpResponse(json.dumps(result), content_type="application/json")\n\ndef user_history(request):\n    ip_list = UserIPinfo.objects.all()\n    infos = {}\n    for item in ip_list:\n        infos[item.ip] = [ b_obj.useragent for b_obj in BrowseInfo.objects.filter(userip_id= item.id)]\n\n    result = {"STATUS":"success",\n              "INFO":infos,\n              }\n    return HttpResponse(json.dumps(result), content_type="application/json")\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("p",[s._v("models相关代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# -*- coding:utf-8 -*-\nfrom django.db import models\n\n# Create your models here.\nclass UserIPinfo(models.Model):\n    ip = models.CharField(max_length=40, default='', verbose_name=u'ip地址', null=True)\n    time = models.DateTimeField(verbose_name=u\"更新时间\", auto_now=True)\n\n    class Meta:\n        verbose_name = u'用户访问地址信息表'\n        verbose_name_plural = verbose_name\n        db_table = \"userinfo\"\n\nclass BrowseInfo(models.Model):\n    useragent = models.CharField(max_length=500, default='', verbose_name=u'用户浏览器agent信息', null=True)\n    models.CharField(max_length=256, verbose_name=u\"唯一设备ID\", default=\"\")\n\n    userip = models.ForeignKey('UserIPInfo')\n\n    class Meta:\n        verbose_name = u'用户浏览器信息'\n        verbose_name_plural = verbose_name\n        db_table = \"browseinfo\"\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[s._v("建立路由转发规则mydevops，urls.py下的相关代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from django.conf.urls import include, url\nfrom django.contrib import admin\nfrom scanhosts.views import *\n\nurlpatterns = [\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^getinfos/$', user_history),\n    url(r'^sendinfos/$', user_info),\n\n] \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("img",{attrs:{src:a(531),alt:"image-20221222230048931"}})]),s._v(" "),n("p",[s._v("sendinfo会使用user_info方法处理，这部分讲解内容在3-13")]),s._v(" "),n("p",[n("img",{attrs:{src:a(532),alt:"image-20221222230438469"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(533),alt:"image-20221222230600943"}})]),s._v(" "),n("p",[s._v("filter是django对数据库的查询，create是插入")]),s._v(" "),n("p",[n("img",{attrs:{src:a(534),alt:"image-20221222230822484"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(535),alt:"image-20221222231102206"}})]),s._v(" "),n("p",[s._v("在浏览器中访问方式")]),s._v(" "),n("p",[n("img",{attrs:{src:a(536),alt:"image-20221222231125507"}})]),s._v(" "),n("p",[s._v("检查数据库中数据是否插入")]),s._v(" "),n("p",[n("img",{attrs:{src:a(537),alt:"image-20221222231158563"}})]),s._v(" "),n("h3",{attrs:{id:"通过命令端方式访问django内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过命令端方式访问django内容"}},[s._v("#")]),s._v(" 通过命令端方式访问django内容")]),s._v(" "),n("p",[n("img",{attrs:{src:a(538),alt:"image-20221222231342388"}})]),s._v(" "),n("h2",{attrs:{id:"_8-信息接口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-信息接口"}},[s._v("#")]),s._v(" 8.信息接口")]),s._v(" "),n("p",[n("img",{attrs:{src:a(539),alt:"image-20221222231448314"}})]),s._v(" "),n("p",[s._v("1.配置好url转发")]),s._v(" "),n("p",[n("img",{attrs:{src:a(540),alt:"image-20221222231533099"}})]),s._v(" "),n("p",[s._v("views.py中user_history部分内容")]),s._v(" "),n("p",[n("img",{attrs:{src:a(541),alt:"image-20221222231614658"}})]),s._v(" "),n("p",[s._v("运行工程，在浏览器查看请求结果")]),s._v(" "),n("p",[n("img",{attrs:{src:a(542),alt:"image-20221222231755676"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(543),alt:"image-20221224125015624"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(544),alt:"image-20221224125034130"}})]),s._v(" "),n("h2",{attrs:{id:"_9-django日志logging模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-django日志logging模块"}},[s._v("#")]),s._v(" 9.Django日志logging模块")]),s._v(" "),n("p",[s._v("logger日志记录器。是日志接口")]),s._v(" "),n("p",[s._v("handler日志处理器，邮件发送还是终端上直接打印")]),s._v(" "),n("p",[s._v("formatter，格式器格式化除输出日志信息")]),s._v(" "),n("p",[s._v("filter过滤器，进行严格筛选")]),s._v(" "),n("p",[n("img",{attrs:{src:a(545),alt:"image-20221224220739300"}})]),s._v(" "),n("p",[s._v("在项目得settings里面配置logging相关信息")]),s._v(" "),n("p",[s._v("定义formatters,handlers,loggers相关配置项")]),s._v(" "),n("p",[s._v("leverlname:级别")]),s._v(" "),n("p",[s._v("asctime：时间日期")]),s._v(" "),n("p",[s._v("module：模块信息")]),s._v(" "),n("p",[s._v("lineno：对应的行号")]),s._v(" "),n("p",[s._v("message:打印信息")]),s._v(" "),n("p",[s._v("datefmt:s时间格式")]),s._v(" "),n("p",[n("img",{attrs:{src:a(546),alt:"image-20221225113135015"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(547),alt:"image-20221225115216661"}})]),s._v(" "),n("p",[s._v("应用的views引入")]),s._v(" "),n("p",[n("img",{attrs:{src:a(548),alt:"image-20221225120319008"}})]),s._v(" "),n("h2",{attrs:{id:"_10-邮件发送"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10-邮件发送"}},[s._v("#")]),s._v(" 10.邮件发送")]),s._v(" "),n("p",[n("img",{attrs:{src:a(549),alt:"image-20221225120727514"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(550),alt:"image-20221225120801196"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(551),alt:"image-20221225120826509"}})]),s._v(" "),n("p",[s._v("配置邮件客户端")]),s._v(" "),n("p",[n("img",{attrs:{src:a(552),alt:"image-20221225120904921"}})]),s._v(" "),n("p",[s._v("去服务端开启smtp服务，去邮箱打开")]),s._v(" "),n("p",[n("img",{attrs:{src:a(553),alt:"image-20221225120934302"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(554),alt:"image-20221225121026180"}})]),s._v(" "),n("p",[s._v("进入项目shell模式，邮件发送测试")]),s._v(" "),n("p",[n("img",{attrs:{src:a(555),alt:"image-20221225121216504"}})]),s._v(" "),n("p",[s._v("单独建立一个类处理邮件")]),s._v(" "),n("p",[n("img",{attrs:{src:a(556),alt:"image-20221225121408603"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(557),alt:"image-20221225121425986"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(558),alt:"image-20221225121443641"}})]),s._v(" "),n("p",[s._v("sehll测试")]),s._v(" "),n("p",[n("img",{attrs:{src:a(559),alt:"image-20221225121710032"}})]),s._v(" "),n("h2",{attrs:{id:"_11-imoocc工程中对于django框架的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_11-imoocc工程中对于django框架的应用"}},[s._v("#")]),s._v(" 11.imoocc工程中对于django框架的应用")]),s._v(" "),n("p",[s._v("model对数据库的操作")]),s._v(" "),n("p",[s._v("查看django的官方中文文档")]),s._v(" "),n("p",[n("img",{attrs:{src:a(560),alt:"image-20221225121829913"}})]),s._v(" "),n("p",[s._v("工程架构设计")]),s._v(" "),n("p",[n("img",{attrs:{src:a(561),alt:"image-20221225122254831"}})]),s._v(" "),n("p",[s._v("设置setting文件的目的是：线上线下环境有不同的配置。所以需要设置不通的setting")]),s._v(" "),n("p",[s._v("在使用的时候。由于项目的manage.py控制")]),s._v(" "),n("p",[s._v("以下是在项目启动的时候读取别的seting文件")]),s._v(" "),n("p",[n("img",{attrs:{src:a(562),alt:"image-20221225122646879"}})]),s._v(" "),n("p",[s._v("在manage.py里面需要这样配置")]),s._v(" "),n("p",[s._v("sys.argv参数位置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('if __name__ == "__main__":\n    if len(sys.argv) > 3:\n        run_arg = sys.argv[2]\n        if not run_arg.startswith(\'--settings\'):\n            os.environ.setdefault("DJANGO_SETTINGS_MODULE", "admin.settings.settings")\n    else:\n        os.environ.setdefault("DJANGO_SETTINGS_MODULE", "admin.settings.settings")\n\n    from django.core.management import execute_from_command_line\n\n    execute_from_command_line(sys.argv)\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("加入app应用")]),s._v(" "),n("p",[n("img",{attrs:{src:a(563),alt:"image-20221225123613836"}})]),s._v(" "),n("p",[s._v("models讲解")]),s._v(" "),n("p",[s._v("可以看apps和scanhosts下面的models文件配置信息")]),s._v(" "),n("p",[n("img",{attrs:{src:a(564),alt:"image-20221225123820416"}})]),s._v(" "),n("p",[s._v("里面的外键的解释")]),s._v(" "),n("p",[n("img",{attrs:{src:a(565),alt:"image-20221225124404192"}})]),s._v(" "),n("p",[s._v("学生属于班级，一个班级多个学生，一个学生只有一个班级")]),s._v(" "),n("p",[s._v("通过外键进行关联，通过外键关联")]),s._v(" "),n("p",[n("img",{attrs:{src:a(566),alt:"image-20221225124500556"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(567),alt:"image-20221225124516177"}})])])}),[],!1,null,null,null);n.default=t.exports},497:function(s,n,a){s.exports=a.p+"assets/img/image-20221221202252325.dbce5c9c.png"},498:function(s,n,a){s.exports=a.p+"assets/img/image-20221221202306498.50dab49d.png"},499:function(s,n,a){s.exports=a.p+"assets/img/image-20221221204615324.4b4d389e.png"},500:function(s,n,a){s.exports=a.p+"assets/img/image-20221221212801743.113223e7.png"},501:function(s,n,a){s.exports=a.p+"assets/img/image-20221221221002549.62bc56be.png"},502:function(s,n,a){s.exports=a.p+"assets/img/image-20221221225458597.bc992655.png"},503:function(s,n,a){s.exports=a.p+"assets/img/image-20221221230759095.4e71c90b.png"},504:function(s,n,a){s.exports=a.p+"assets/img/image-20221221231027468.d0a6afa2.png"},505:function(s,n,a){s.exports=a.p+"assets/img/image-20221221231348733.e1d00712.png"},506:function(s,n,a){s.exports=a.p+"assets/img/image-20221221231449723.556150e8.png"},507:function(s,n,a){s.exports=a.p+"assets/img/image-20221221231548451.d6ed243d.png"},508:function(s,n,a){s.exports=a.p+"assets/img/image-20221221231753672.24daac30.png"},509:function(s,n,a){s.exports=a.p+"assets/img/image-20221221232001338.248e569c.png"},510:function(s,n,a){s.exports=a.p+"assets/img/image-20221221232056419.6f53333a.png"},511:function(s,n,a){s.exports=a.p+"assets/img/image-20221221232307642.6e488d21.png"},512:function(s,n,a){s.exports=a.p+"assets/img/image-20221221233044149.0c3b950f.png"},513:function(s,n,a){s.exports=a.p+"assets/img/image-20221221233242784.6558fdc1.png"},514:function(s,n,a){s.exports=a.p+"assets/img/image-20221222212320796.3c1f326c.png"},515:function(s,n,a){s.exports=a.p+"assets/img/image-20221222212408035.522bf71f.png"},516:function(s,n,a){s.exports=a.p+"assets/img/image-20221222212720923.305a288b.png"},517:function(s,n,a){s.exports=a.p+"assets/img/image-20221224094835527.89be9b15.png"},518:function(s,n,a){s.exports=a.p+"assets/img/image-20221222213202876.a8b3bb87.png"},519:function(s,n,a){s.exports=a.p+"assets/img/image-20221224095102525.28cc8394.png"},520:function(s,n,a){s.exports=a.p+"assets/img/image-20221222224028370.93ede729.png"},521:function(s,n,a){s.exports=a.p+"assets/img/image-20221222224147500.027aa66d.png"},522:function(s,n,a){s.exports=a.p+"assets/img/image-20221222224717201.443a9817.png"},523:function(s,n,a){s.exports=a.p+"assets/img/image-20221222225159903.adf6c117.png"},524:function(s,n,a){s.exports=a.p+"assets/img/image-20221222225213322.79d8634e.png"},525:function(s,n,a){s.exports=a.p+"assets/img/image-20221222225323903.5a9a2074.png"},526:function(s,n,a){s.exports=a.p+"assets/img/image-20221222225416713.69af7fea.png"},527:function(s,n,a){s.exports=a.p+"assets/img/image-20221222225508562.c020d566.png"},528:function(s,n,a){s.exports=a.p+"assets/img/image-20221222225607633.5602844b.png"},529:function(s,n,a){s.exports=a.p+"assets/img/image-20221222225740315.6ee5aecf.png"},530:function(s,n,a){s.exports=a.p+"assets/img/image-20221222225818356.dce69ec2.png"},531:function(s,n,a){s.exports=a.p+"assets/img/image-20221222230048931.fb04f579.png"},532:function(s,n,a){s.exports=a.p+"assets/img/image-20221222230438469.1bd5e90e.png"},533:function(s,n,a){s.exports=a.p+"assets/img/image-20221222230600943.1092cb0b.png"},534:function(s,n,a){s.exports=a.p+"assets/img/image-20221222230822484.9a41371f.png"},535:function(s,n,a){s.exports=a.p+"assets/img/image-20221222231102206.65e8e3f1.png"},536:function(s,n,a){s.exports=a.p+"assets/img/image-20221222231125507.865b1b6e.png"},537:function(s,n,a){s.exports=a.p+"assets/img/image-20221222231158563.e925e170.png"},538:function(s,n,a){s.exports=a.p+"assets/img/image-20221222231342388.f0d48656.png"},539:function(s,n,a){s.exports=a.p+"assets/img/image-20221222231448314.d72f7fdf.png"},540:function(s,n,a){s.exports=a.p+"assets/img/image-20221222231533099.188f5f9f.png"},541:function(s,n,a){s.exports=a.p+"assets/img/image-20221222231614658.842bba1b.png"},542:function(s,n,a){s.exports=a.p+"assets/img/image-20221222231755676.d02b3d3e.png"},543:function(s,n,a){s.exports=a.p+"assets/img/image-20221224125015624.7952e49a.png"},544:function(s,n,a){s.exports=a.p+"assets/img/image-20221224125034130.e821aa0e.png"},545:function(s,n,a){s.exports=a.p+"assets/img/image-20221224220739300.31d17703.png"},546:function(s,n,a){s.exports=a.p+"assets/img/image-20221225113135015.9b557fea.png"},547:function(s,n,a){s.exports=a.p+"assets/img/image-20221225115216661.8be066a9.png"},548:function(s,n,a){s.exports=a.p+"assets/img/image-20221225120319008.3b0f955e.png"},549:function(s,n,a){s.exports=a.p+"assets/img/image-20221225120727514.49d831dd.png"},550:function(s,n,a){s.exports=a.p+"assets/img/image-20221225120801196.c8f3c49e.png"},551:function(s,n,a){s.exports=a.p+"assets/img/image-20221225120826509.473bec9e.png"},552:function(s,n,a){s.exports=a.p+"assets/img/image-20221225120904921.b3f2d99a.png"},553:function(s,n,a){s.exports=a.p+"assets/img/image-20221225120934302.192a2b3f.png"},554:function(s,n,a){s.exports=a.p+"assets/img/image-20221225121026180.fdd81d3f.png"},555:function(s,n,a){s.exports=a.p+"assets/img/image-20221225121216504.4a02ab24.png"},556:function(s,n,a){s.exports=a.p+"assets/img/image-20221225121408603.7ccf63bf.png"},557:function(s,n,a){s.exports=a.p+"assets/img/image-20221225121425986.17511840.png"},558:function(s,n,a){s.exports=a.p+"assets/img/image-20221225121443641.252cacac.png"},559:function(s,n,a){s.exports=a.p+"assets/img/image-20221225121710032.752d1b5d.png"},560:function(s,n,a){s.exports=a.p+"assets/img/image-20221225121829913.5d012aef.png"},561:function(s,n,a){s.exports=a.p+"assets/img/image-20221225122254831.defadd78.png"},562:function(s,n,a){s.exports=a.p+"assets/img/image-20221225122646879.7e851fb0.png"},563:function(s,n,a){s.exports=a.p+"assets/img/image-20221225123613836.b1e703c0.png"},564:function(s,n,a){s.exports=a.p+"assets/img/image-20221225123820416.7eedbe6a.png"},565:function(s,n,a){s.exports=a.p+"assets/img/image-20221225124404192.a9c1f8e2.png"},566:function(s,n,a){s.exports=a.p+"assets/img/image-20221225124500556.069a7d82.png"},567:function(s,n,a){s.exports=a.p+"assets/img/image-20221225124516177.1e2cb14d.png"}}]);