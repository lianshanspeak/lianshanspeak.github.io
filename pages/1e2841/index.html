<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>postgresql基础配置 | YAO blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?67b18e147ab89b527558aac88ec1f0d1"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="记录">
    <meta name="keywords" content="个人技术博客">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/assets/css/0.styles.4d143ccc.css" as="style"><link rel="preload" href="/assets/js/app.59a8e6e3.js" as="script"><link rel="preload" href="/assets/js/7.5b954204.js" as="script"><link rel="preload" href="/assets/js/11.e66a5eb7.js" as="script"><link rel="preload" href="/assets/js/12.7976eb91.js" as="script"><link rel="prefetch" href="/assets/js/10.8a2a77f4.js"><link rel="prefetch" href="/assets/js/100.af833779.js"><link rel="prefetch" href="/assets/js/101.3e099687.js"><link rel="prefetch" href="/assets/js/102.c9d471cf.js"><link rel="prefetch" href="/assets/js/103.d6d1a625.js"><link rel="prefetch" href="/assets/js/104.162f33cc.js"><link rel="prefetch" href="/assets/js/105.f1e54397.js"><link rel="prefetch" href="/assets/js/106.7f19132a.js"><link rel="prefetch" href="/assets/js/107.25371832.js"><link rel="prefetch" href="/assets/js/108.14a43b70.js"><link rel="prefetch" href="/assets/js/109.37e03610.js"><link rel="prefetch" href="/assets/js/110.e940d0fa.js"><link rel="prefetch" href="/assets/js/111.5d476651.js"><link rel="prefetch" href="/assets/js/112.d0b7a263.js"><link rel="prefetch" href="/assets/js/113.c0bff7cc.js"><link rel="prefetch" href="/assets/js/114.3dd80315.js"><link rel="prefetch" href="/assets/js/115.22645312.js"><link rel="prefetch" href="/assets/js/116.f56a9f42.js"><link rel="prefetch" href="/assets/js/117.d3fdb340.js"><link rel="prefetch" href="/assets/js/118.a85c5b68.js"><link rel="prefetch" href="/assets/js/119.cde4ed8e.js"><link rel="prefetch" href="/assets/js/13.e34ffe26.js"><link rel="prefetch" href="/assets/js/14.abe41aab.js"><link rel="prefetch" href="/assets/js/15.2f6b2d7e.js"><link rel="prefetch" href="/assets/js/16.7a6c465a.js"><link rel="prefetch" href="/assets/js/17.e7c80b0c.js"><link rel="prefetch" href="/assets/js/18.cde4ea2c.js"><link rel="prefetch" href="/assets/js/19.185b6820.js"><link rel="prefetch" href="/assets/js/2.b39077a8.js"><link rel="prefetch" href="/assets/js/20.cba57736.js"><link rel="prefetch" href="/assets/js/21.6809dd05.js"><link rel="prefetch" href="/assets/js/22.dcbc5cc3.js"><link rel="prefetch" href="/assets/js/23.6d0df575.js"><link rel="prefetch" href="/assets/js/24.16dea3e3.js"><link rel="prefetch" href="/assets/js/25.a2b79fc1.js"><link rel="prefetch" href="/assets/js/26.c5f5308d.js"><link rel="prefetch" href="/assets/js/27.8bbc4428.js"><link rel="prefetch" href="/assets/js/28.5c54dc8e.js"><link rel="prefetch" href="/assets/js/29.a42e46bb.js"><link rel="prefetch" href="/assets/js/3.cffbebe7.js"><link rel="prefetch" href="/assets/js/30.b43bac5d.js"><link rel="prefetch" href="/assets/js/31.0c62fcfe.js"><link rel="prefetch" href="/assets/js/32.34648702.js"><link rel="prefetch" href="/assets/js/33.08c87895.js"><link rel="prefetch" href="/assets/js/34.4d59a704.js"><link rel="prefetch" href="/assets/js/35.646b44d2.js"><link rel="prefetch" href="/assets/js/36.80a66b27.js"><link rel="prefetch" href="/assets/js/37.421e403a.js"><link rel="prefetch" href="/assets/js/38.9d29f791.js"><link rel="prefetch" href="/assets/js/39.d0200840.js"><link rel="prefetch" href="/assets/js/4.8b2ef19f.js"><link rel="prefetch" href="/assets/js/40.1891e335.js"><link rel="prefetch" href="/assets/js/41.97d3fd6c.js"><link rel="prefetch" href="/assets/js/42.7aa1318f.js"><link rel="prefetch" href="/assets/js/43.aab7a212.js"><link rel="prefetch" href="/assets/js/44.4b5fa36a.js"><link rel="prefetch" href="/assets/js/45.622ff538.js"><link rel="prefetch" href="/assets/js/46.d610e05a.js"><link rel="prefetch" href="/assets/js/47.12e2255c.js"><link rel="prefetch" href="/assets/js/48.b4cefb73.js"><link rel="prefetch" href="/assets/js/49.6c3bf149.js"><link rel="prefetch" href="/assets/js/5.42a2c2db.js"><link rel="prefetch" href="/assets/js/50.1c8ab9e9.js"><link rel="prefetch" href="/assets/js/51.31841acd.js"><link rel="prefetch" href="/assets/js/52.23852199.js"><link rel="prefetch" href="/assets/js/53.502b55d4.js"><link rel="prefetch" href="/assets/js/54.b331ed80.js"><link rel="prefetch" href="/assets/js/55.bf542ba6.js"><link rel="prefetch" href="/assets/js/56.06f8cb6c.js"><link rel="prefetch" href="/assets/js/57.ae52b41c.js"><link rel="prefetch" href="/assets/js/58.a2c555a8.js"><link rel="prefetch" href="/assets/js/59.41061973.js"><link rel="prefetch" href="/assets/js/6.90de7719.js"><link rel="prefetch" href="/assets/js/60.afd2f7e6.js"><link rel="prefetch" href="/assets/js/61.432756d0.js"><link rel="prefetch" href="/assets/js/62.3d00c9f9.js"><link rel="prefetch" href="/assets/js/63.fac02541.js"><link rel="prefetch" href="/assets/js/64.db31a905.js"><link rel="prefetch" href="/assets/js/65.afdcd498.js"><link rel="prefetch" href="/assets/js/66.778ae81f.js"><link rel="prefetch" href="/assets/js/67.582bbbfe.js"><link rel="prefetch" href="/assets/js/68.c44f2518.js"><link rel="prefetch" href="/assets/js/69.8b84437e.js"><link rel="prefetch" href="/assets/js/70.d9666edf.js"><link rel="prefetch" href="/assets/js/71.00fc5abd.js"><link rel="prefetch" href="/assets/js/72.fc04c1ec.js"><link rel="prefetch" href="/assets/js/73.13c1b537.js"><link rel="prefetch" href="/assets/js/74.8dc2ad4d.js"><link rel="prefetch" href="/assets/js/75.200d8e30.js"><link rel="prefetch" href="/assets/js/76.7adde9e3.js"><link rel="prefetch" href="/assets/js/77.9358fcea.js"><link rel="prefetch" href="/assets/js/78.40ebfe7c.js"><link rel="prefetch" href="/assets/js/79.7101d682.js"><link rel="prefetch" href="/assets/js/8.92500b61.js"><link rel="prefetch" href="/assets/js/80.29a4e018.js"><link rel="prefetch" href="/assets/js/81.3b09ac83.js"><link rel="prefetch" href="/assets/js/82.04f9540f.js"><link rel="prefetch" href="/assets/js/83.1abe25fb.js"><link rel="prefetch" href="/assets/js/84.5522a475.js"><link rel="prefetch" href="/assets/js/85.77fd8cc9.js"><link rel="prefetch" href="/assets/js/86.242da1b1.js"><link rel="prefetch" href="/assets/js/87.c1fd2733.js"><link rel="prefetch" href="/assets/js/88.e7217205.js"><link rel="prefetch" href="/assets/js/89.97500137.js"><link rel="prefetch" href="/assets/js/9.c42660e0.js"><link rel="prefetch" href="/assets/js/90.57fd7b16.js"><link rel="prefetch" href="/assets/js/91.f9553e3a.js"><link rel="prefetch" href="/assets/js/92.27cac0ad.js"><link rel="prefetch" href="/assets/js/93.19a43abc.js"><link rel="prefetch" href="/assets/js/94.351f08fe.js"><link rel="prefetch" href="/assets/js/95.36d4d224.js"><link rel="prefetch" href="/assets/js/96.952d6929.js"><link rel="prefetch" href="/assets/js/97.58bb623b.js"><link rel="prefetch" href="/assets/js/98.d3e75111.js"><link rel="prefetch" href="/assets/js/99.a46116ac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4d143ccc.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="YAO blog" class="logo"> <span class="site-name can-hide">YAO blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/shujuku/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>传统数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ee767f/" class="nav-link">postgresql</a></li><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">mysql</a></li><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">oracle</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/sql/" class="nav-link">《sql编程》</a></li><li class="dropdown-subitem"><a href="/note/dashuju/" class="nav-link">《大数据》</a></li><li class="dropdown-subitem"><a href="/note/postgresql/" class="nav-link">《postgresql》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维专项" class="dropdown-title"><a href="/yunwei/" class="link-title">运维专项</a> <span class="title" style="display:none;">运维专项</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/331efa/" class="nav-link">Docker&amp;k8s</a></li><li class="dropdown-item"><!----> <a href="/pages/0d801d/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/pages/48e74d/" class="nav-link">监控</a></li><li class="dropdown-item"><!----> <a href="/pages/d11aa9/" class="nav-link">linux知识</a></li><li class="dropdown-item"><!----> <a href="/pages/2f40d8/" class="nav-link">ansible</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/biancheng/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/74c26a/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">java</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">shell</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">C/C++/GO</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">前端</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="梦工厂" class="dropdown-title"><a href="/dream/" class="link-title">梦工厂</a> <span class="title" style="display:none;">梦工厂</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/115b2f/" class="nav-link">树莓派</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">Stm32/arduino</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">人工智能</a></li></ul></div></div><div class="nav-item"><a href="/guanyu/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/339240/" class="nav-link">一个人的世界观</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>luoyao</h3> <span>不积跬步 无以至千里</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/shujuku/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>传统数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ee767f/" class="nav-link">postgresql</a></li><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">mysql</a></li><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">oracle</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/sql/" class="nav-link">《sql编程》</a></li><li class="dropdown-subitem"><a href="/note/dashuju/" class="nav-link">《大数据》</a></li><li class="dropdown-subitem"><a href="/note/postgresql/" class="nav-link">《postgresql》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维专项" class="dropdown-title"><a href="/yunwei/" class="link-title">运维专项</a> <span class="title" style="display:none;">运维专项</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/331efa/" class="nav-link">Docker&amp;k8s</a></li><li class="dropdown-item"><!----> <a href="/pages/0d801d/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/pages/48e74d/" class="nav-link">监控</a></li><li class="dropdown-item"><!----> <a href="/pages/d11aa9/" class="nav-link">linux知识</a></li><li class="dropdown-item"><!----> <a href="/pages/2f40d8/" class="nav-link">ansible</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/biancheng/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/74c26a/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">java</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">shell</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">C/C++/GO</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">前端</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="梦工厂" class="dropdown-title"><a href="/dream/" class="link-title">梦工厂</a> <span class="title" style="display:none;">梦工厂</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/115b2f/" class="nav-link">树莓派</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">Stm32/arduino</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">人工智能</a></li></ul></div></div><div class="nav-item"><a href="/guanyu/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/339240/" class="nav-link">一个人的世界观</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>postgresql</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ff701f/" class="sidebar-link">生产环境问题记录</a></li><li><a href="/pages/ee767f/" class="sidebar-link">创建用户并且授权流程</a></li><li><a href="/pages/1d6465/" class="sidebar-link">postgresql原理</a></li><li><a href="/pages/e55fe9/" class="sidebar-link">获取用户下所有对象</a></li><li><a href="/pages/b64367/" class="sidebar-link">postgresql设置开机启动</a></li><li><a href="/pages/1e2841/" aria-current="page" class="active sidebar-link">postgresql基础配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1e2841/#部署管理配置" class="sidebar-link">部署管理配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/1e2841/#基本操作" class="sidebar-link">基本操作</a></li></ul></li><li><a href="/pages/84c2ae/" class="sidebar-link">导入数据库脚本文件</a></li><li><a href="/pages/dbb18f/" class="sidebar-link">查找消耗高SQL以及SQL优化</a></li><li><a href="/pages/44bcad/" class="sidebar-link">通过配置.psqlrc文件,定制日常维护脚本</a></li><li><a href="/pages/6c04cf/" class="sidebar-link">PG基础问题及处理方法</a></li><li><a href="/pages/e1675b/" class="sidebar-link">pg10分区表插入更新无法解决方法</a></li><li><a href="/pages/ea4d2c/" class="sidebar-link">postgresql中mvcc表膨胀问题</a></li><li><a href="/pages/14a079/" class="sidebar-link">PostgreSQL体系结构概述</a></li><li><a href="/pages/554d58/" class="sidebar-link">postgresql避免oom方法</a></li><li><a href="/pages/1dc6ed/" class="sidebar-link">数据库开发相关</a></li><li><a href="/pages/4da080/" class="sidebar-link">postgresql中wal日志</a></li><li><a href="/pages/afbb36/" class="sidebar-link">深度解析buffer manager、index-only</a></li><li><a href="/pages/f073ae/" class="sidebar-link">提问的方法</a></li><li><a href="/pages/2d50ab/" class="sidebar-link">数据库通识路径</a></li><li><a href="/pages/a994fc/" class="sidebar-link">监控指标</a></li><li><a href="/pages/13b87c/" class="sidebar-link">postgrsql学习记录</a></li><li><a href="/pages/d4299f/" class="sidebar-link">日常维护监控排错</a></li><li><a href="/pages/245550/" class="sidebar-link">pg监控目标</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>oracle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-5add8e0a><div class="articleInfo" data-v-5add8e0a><ul class="breadcrumbs" data-v-5add8e0a><li data-v-5add8e0a><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-5add8e0a></a></li> <li data-v-5add8e0a><a href="/shujuku/#数据库" data-v-5add8e0a>数据库</a></li><li data-v-5add8e0a><a href="/shujuku/#postgresql" data-v-5add8e0a>postgresql</a></li></ul> <div class="info" data-v-5add8e0a><div title="作者" class="author iconfont icon-touxiang" data-v-5add8e0a><a href="javascript:;" data-v-5add8e0a>luoyao</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-5add8e0a><a href="javascript:;" data-v-5add8e0a>2022-09-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">postgresql基础配置<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="基础配置"><a href="#基础配置" class="header-anchor">#</a> 基础配置</h1> <h2 id="部署管理配置"><a href="#部署管理配置" class="header-anchor">#</a> 部署管理配置</h2> <p>使用pg_ctl方式进行管理</p> <p>1.数据库的启动，查看状态，关闭</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost ~]# su - postgres
Last login: Tue Oct 12 23:34:33 EDT 2021 on pts/1
[postgres@localhost ~]$ /opt/pgsql/bin/pg_ctl -D /pgdata/10/data/ start
waiting for server to start....2021-10-13 00:40:19.174 EDT [25652] LOG:  listening on IPv6 address &quot;::1&quot;, port 1921
2021-10-13 00:40:19.174 EDT [25652] LOG:  listening on IPv4 address &quot;127.0.0.1&quot;, port 1921
2021-10-13 00:40:19.176 EDT [25652] LOG:  listening on Unix socket &quot;/tmp/.s.PGSQL.1921&quot;
2021-10-13 00:40:19.189 EDT [25653] LOG:  database system was shut down at 2021-10-12 23:36:10 EDT
2021-10-13 00:40:19.191 EDT [25652] LOG:  database system is ready to accept connections
 done
server started
[postgres@localhost ~]$ /opt/pgsql/bin/pg_ctl -D /pgdata/10/data/ status
pg_ctl: server is running (PID: 25652)
/opt/pg10/bin/postgres &quot;-D&quot; &quot;/pgdata/10/data&quot;
[postgres@localhost ~]$ /opt/pgsql/bin/pg_isready -p 1921
/tmp:1921 - accepting connections
[postgres@localhost ~]$ /opt/pgsql/bin/pg_ctl -D /pgdata/10/data/ -ms stop　　#smart（-ms）,fast(-mf),immediate(-mi)三种关闭模式
waiting for server to shut down....2021-10-13 00:43:51.783 EDT [25652] LOG:  received smart shutdown request
2021-10-13 00:43:51.784 EDT [25652] LOG:  worker process: logical replication launcher (PID 25659) exited with exit code 1
2021-10-13 00:43:51.785 EDT [25654] LOG:  shutting down
2021-10-13 00:43:51.791 EDT [25652] LOG:  database system is shut down
 done
server stopped
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>2.配置开机启动</p> <p>1.配置服务脚本，将linux脚本拷贝到/etc/init.d/中，将脚本重命名为postgresql-10并赋予执行权限</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@localhost ~]# ls postgresql-10.0/contrib/start-scripts/
freebsd  linux  osx
[root@localhost ~]# cp postgresql-10.0/contrib/start-scripts/linux /etc/init.d/postgresql-10
[root@localhost ~]# chmod +x /etc/init.d/postgresql-10
[root@localhost ~]# ls -lh /etc/init.d/postgresql-10
-rwxr-xr-x. 1 root root 3.5K Oct 13 00:48 /etc/init.d/postgresql-10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用</p> <p>chkconfig --list查看postgresql是否开机启动</p> <p>设置开机启动，或关闭chkconfig postgresql-10 on/off</p> <p>3.数据库配置基础</p> <p>postgresql中两个重要的全局配置文件postgresql.conf(文件配置，资源限制，集权设置)和pg_hba.conf（客户端连接和认证）都存于初始化目录中</p> <p>全局配置的修改方法</p> <ul><li>修改postgresql.cong文件</li> <li>在库中通过alter system set 命令修改全局配置（会产生一个postgresql.auto.conf文件，数据库启动时会加载此文件，并覆盖postgresql.conf中配置，不要修改它）</li></ul> <p>非全局修改方法</p> <ul><li>设置database级别</li> <li>alter database name set configparameter</li> <li>设置session级别配置</li> <li>通过set命令设置当前session配置</li></ul> <p>查询配置　　show all</p> <p>使配置生效：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>select pg_reload_conf();
或者
[postgres@localhost ~]$ /opt/pgsql/bin/pg_ctl -D /pgdata/10/data reload
server signaled
2021-10-13 01:31:28.393 EDT [25748] LOG:  received SIGHUP, reloading configuration files
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>允许数据库远程访问，需修改监听地址，pg_hba.conf文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> vi /pgdata/10/data/postgresql.conf
找到#listen_addresses = 'localhost'改为
listen_addresses = '*'
重启数据库：　 /opt/pgsql/bin/pg_ctl -D /pgdata/10/data stop/startecho &quot;host mydb pguser 0.0.0.0/0 md5&quot; &gt;&gt; /pgdata/10/data/pg_hba.confreload生效/opt/pgsql/bin/pg_ctl -D /pgdata/10/data/ reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p></p> <p>配置默认环境，设置完后执行source ~/.bashrc</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vi ~/.bashrc
export PG_HOME=/opt/pgsql
export PATH=$PG_HOME/bin:$PATH
PGUSER=postgres
PGHOST=127.0.0.1
PGDATABASE=postgres
PGPORT=1921
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="基本操作"><a href="#基本操作" class="header-anchor">#</a> 基本操作</h2> <p>--创建用户，创建空间目录，创建数据库，赋权</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>postgres=# create role pguser with password 'pguser';
CREATE ROLE
[root@localhost ~]# mkdir -p /database/pg10/pg_tbs/tbs_mydb
root@localhost ~]# chown -R postgres.postgres /database
[postgres@localhost ~]$ psql
psql (10.0)
Type &quot;help&quot; for help.

postgres=# create tablespace tbs_mydb owner pguser location '/database/pg10/pg_tbs/tbs_mydb';
CREATE TABLESPACE
postgres=# create database mydb with owner = pguser TEMPLATE=template0 ENCODING = 'UTF8' TABLESPACE=tbs_mydb;
CREATE DATABASE

postgres=# grant ALL on DATABASE mydb to pguser with Grant option;(WITH GRANT OPTION 这个选项表示该用户可以将自己拥有的权限授权给别人)
GRANT
postgres=# grant ALL on TABLESPACE tbs_mydb to pguser ;
GRANT

postgres=# alter role pguser login ;
ALTER ROLE
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>--psql元命令介绍</p> <p>\l查看库</p> <p>\db查看表空间</p> <p><img src="/assets/img/864900-20211013151726612-813942021.4d54aa94.png" alt="img"></p> <p>\d查看表定义</p> <p>mydb=&gt; create table test_1(id int,name text ,create_time timestamp without time zone default clock_timestamp());
CREATE TABLE</p> <p>mydb=&gt; alter table test_1 add primary key (id);
ALTER TABLE
mydb=&gt; \d test_1
Table &quot;public.test_1&quot;
Column | Type | Collation | Nullable | Default
-------------+-----------------------------+-----------+----------+-------------------
id | integer | | not null |
name | text | | |
create_time | timestamp without time zone | | | clock_timestamp()
Indexes:
&quot;test_1_pkey&quot; PRIMARY KEY, btree (id)</p> <p>查看表，索引大小</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mydb=&gt; insert into test_1 (id,name) select n,n || '_francs' from generate_series(1,500000) n;
INSERT 0 500000
mydb=&gt; select * from test_1  limit 1;
 id |   name   |        create_time
----+----------+----------------------------
  1 | 1_francs | 2021-10-13 03:36:25.607786
(1 row)
mydb=&gt; \di+ test_1_pkey
                          List of relations
 Schema |    Name     | Type  | Owner  | Table  | Size  | Description
--------+-------------+-------+--------+--------+-------+-------------
 public | test_1_pkey | index | pguser | test_1 | 11 MB |
(1 row)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>\sf查看函数代码</p> <p><img src="/assets/img/864900-20211013154537897-34133189.a0678237.png" alt="img"></p> <p>\x设置查询结果输出模式</p> <p><img src="/assets/img/864900-20211013154638930-1652145244.2156545c.png" alt="img"></p> <p>psql导入、导出数据表</p> <p>COPY是sql命令，需要superuser，主机上的文件</p> <p>\copy是元命令，不需要superuser，psql端文件</p> <p>COPY导入导出命令</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[postgres@localhost ~]$ cat test_copy.txt
1    a
2    b
3    c
4    d
[postgres@localhost ~]$ psql mydb postgres
mydb=# COPY public.test_copy from '/home/postgres/test_copy.txt';（实例名）
COPY 4
mydb=# select * from test_copy ;
 id | name
----+------
  1 | a
  2 | b
  3 | c
  4 | d
(4 rows)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>导出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mydb=# COPY public.test_copy to '/home/postgres/test.txt';
COPY 4
mydb=# \q
[postgres@localhost ~]$ ls
test_copy.txt  test.txt
[postgres@localhost ~]$ cat test.txt
1    a
2    b
3    c
4    d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>导出到csv格式：加 with csv header导出格式为csv，并显示字段名称</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mydb=# copy public.test_copy to '/home/postgres/test_copy.csv' with csv header;
COPY 4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,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" alt="img"></p> <p>如何导出部分数据，导出表test_copy，id等于2的数据</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mydb=# copy (select * from public.test_copy where id=2) to '/home/postgres/test_copy.csv' with csv header;
COPY 1
mydb=# \q
[postgres@localhost ~]$ ls
test_copy.csv  test_copy.txt  test.txt
[postgres@localhost ~]$ cat test_copy.csv
id,name
2,b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\copy原命令数据导入导出，一样的，把COPY命令换位\copy即可</p> <p>小表用\copy,大表建议用COPY效率更高</p></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/b64367/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">postgresql设置开机启动</div></a> <a href="/pages/84c2ae/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">导入数据库脚本文件</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/b64367/" class="prev">postgresql设置开机启动</a></span> <span class="next"><a href="/pages/84c2ae/">导入数据库脚本文件</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/505cd2/"><div>
            ansible部署k8s问题点复盘
            <!----></div></a> <span class="date">04-02</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/5d43b3/"><div>
            博客部署
            <!----></div></a> <span class="date">04-02</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/fb6db2/"><div>
            ansible远程重启系统之后继续执行命令
            <!----></div></a> <span class="date">03-15</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:473618849@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>备案号 | <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">川公网安备 51012202001343号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.59a8e6e3.js" defer></script><script src="/assets/js/7.5b954204.js" defer></script><script src="/assets/js/11.e66a5eb7.js" defer></script><script src="/assets/js/12.7976eb91.js" defer></script>
  </body>
</html>
